<!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/logo.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=5.1.4"><link rel="mask-icon" href="/logo.png?v=5.1.4" color="#222"><meta name="keywords" content="Google SEO, 互联网营销, 工业品营销, 矿山机械"><link rel="alternate" href="/atom.xml" title="Ray's Blog" type="application/atom+xml"><meta name="description" content="Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销"><meta property="og:type" content="website"><meta property="og:title" content="Ray&#39;s Blog"><meta property="og:url" content="http://love4026.org/page/9/index.html"><meta property="og:site_name" content="Ray&#39;s Blog"><meta property="og:description" content="Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销"><meta property="og:locale" content="zh-Hans"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Ray&#39;s Blog"><meta name="twitter:description" content="Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://love4026.org/page/9/"><title>Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销 - Ray's Blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Ray's Blog</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Google SEO|互联网营销|工业矿山机械</h1></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313724/centos-6-4下的python2-6-6下安装pip/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313724/centos-6-4下的python2-6-6下安装pip/" itemprop="url">centos-6-4下的python2-6-6下安装pip</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-01T07:46:21+08:00">2014-03-01</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">431</span></span></div></header><div class="post-body" itemprop="articleBody"><p>Pyuthon如果需要升级，请按以下步骤执行，注意版本号不同，命令可能会有所不同，注意下版本号数字就行，别输错了。</p><p>先升级Python,执行</p><p></p><div></div><p></p><pre>wget http://www.python.org/ftp/python/2.7.5/Python-2.7.5.tgz
tar zxvf Python-2.7.5.tgz
cd Python-2.7.5
./configure
make all
make install
make clean
make distclean</pre> 目前的路径应该是/usr/local/bin/python2.7,顺便看下版本<div><pre>/usr/local/bin/python2.7 -V</pre></div> 然后查下当前的版本<div><pre>python -V</pre></div> 我这里显示的是2.6.6<div><pre>mv /usr/bin/python /usr/bin/python2.6.6
ln -s /usr/local/bin/python2.7 /usr/bin/python</pre></div> 现在再看下版本<div><pre>python -V</pre></div> 应该显示2.7.5了 **以上操作可以不执行，现在来说下如何安装pip** 安装pip前，可能会需要让你安装setuptools<pre>wget https://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c11-py2.6.egg --no-check-certificate
sh setuptools-0.6c11-py2.6.egg</pre><p>安装好后，如下所示：</p><pre>
[root@zhongwen ~]# sh setuptools-0.6c11-py2.6.egg
Processing setuptools-0.6c11-py2.6.egg
Copying setuptools-0.6c11-py2.6.egg to /usr/local/lib/python2.6/site-packages
Adding setuptools 0.6c11 to easy-install.pth file
Installing easy_install script to /usr/local/bin
Installing easy_install-2.6 script to /usr/local/bin

Installed /usr/local/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg
Processing dependencies for setuptools==0.6c11
Finished processing dependencies for setuptools==0.6c11
</pre> 正式安装pip,此为依pip 1.4为例<pre>wget --no-check-certificate https://pypi.python.org/packages/source/p/pip/pip-1.4.tar.gz
tar -zxvf ./pip-1.4.tar.gz
cd pip-1.4
python setup.py install</pre><p>升级python后会导致yum不可用，解决办法如下：</p><p>vi /usr/bin/yum<br>把 #/usr/bin/python to #/usr/bin/python2.6</p><p>或者下载rpm包重新安装下yum<br><a href="http://mirror.centos.org/centos/5/os/x86_64/CentOS/yum-3.2.22-40.el5.centos.noarch.rpm" target="_blank" rel="noopener">http://mirror.centos.org/centos/5/os/x86_64/CentOS/yum-3.2.22-40.el5.centos.noarch.rpm</a><br>rpm -Uvh –replacepkgs yum-3.2.22-40.el5.centos.noarch.rpm</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313722/中国黑客传说：游走在黑暗中的精灵/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313722/中国黑客传说：游走在黑暗中的精灵/" itemprop="url">中国黑客传说：游走在黑暗中的精灵</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-28T05:51:20+08:00">2014-02-28</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/转载/" itemprop="url" rel="index"><span itemprop="name">转载</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">3,264</span></span></div></header><div class="post-body" itemprop="articleBody"><p><a href="http://chinageek-wordpress.stor.sinaapp.com/uploads/2013/03/V.jpg" target="_blank" rel="noopener"><img src="http://chinageek-wordpress.stor.sinaapp.com/uploads/2013/03/V.jpg" alt="V"></a></p><p>他是我所认识的最强大的地下黑客之一，在本文中我姑且称他为V。</p><p>之所以是之一，是因为我还认识另外一个叫A的黑客，A宣称自己成功入侵了包括Google、Facebook、Twitter等你几乎能叫得上名字的所有大型互联网公司。</p><p>而V要低调的多。</p><p>我认为V已经是地下黑客世界中的王者，虽然他从不肯告诉我他入侵的那些公司的名字，但我仍然会毫不犹豫的将他列为当今世界上最强大的黑客之一。</p><p>V至今仍恪守着古老的黑客守则，就如同中世纪的骑士们执着于骑士精神一般。他从不在任何公众场合谈论入侵了什么网站，入侵后也从不删除数据或是进行破坏，他也不会用入侵获得的成果来牟利。</p><p>V只是一个人，他的身后没有任何的机构或组织，因此才更加的难能可贵。</p><p><strong>幽灵</strong></p><p>“我曾经持续观察了一个女孩3年，3年中一直看着她和男朋友谈情说爱。她是个美女，我只见过她两次，是朋友的朋友。</p><p>最后她没有选择一直在谈情说爱的男朋友，而是和一个比她大了8岁的男人结婚。当她和那个比她大8岁的男人的结婚照出现在相册时，我彻底被现实社会给击败了。”</p><p>V坦诚，有时候他喜欢窥探他人的隐私。我告诉他，窥私欲是人类的天性，是所有黑客走上黑客之路的源动力。</p><p>QQ查找好友的“可能认识的人”，把女孩推荐给了V（朋友的朋友）。女孩用自己的照片做了头像，所以一眼就能认出来。随后V查看了女孩的个人资料，知道了女孩的邮箱地址。V查出了女孩用的网易邮箱的密码（下文会解释），发现密码很有规律，是“姓名全拼+!@#”，或者“woaini+生日+姓名全拼”。</p><p>V进入女孩的邮箱后，发现女孩注册了12306用来订火车票。V通过这个注册邮箱，获取了女孩在12306的密码。登录12306后，V得到了女孩和她家人的所有身份证信息以及出行记录。同时女孩在携程上预订的机票信息也会发送到这个邮箱。自此，女孩只要出行想去什么地方，去过哪里，全都在V的掌控之中。</p><p>网易邮箱为了保护账户安全可以绑定QQ。V看到女孩的网易邮箱没有绑定QQ，就去绑定了一个自己的QQ。这样就算女孩把邮箱密码换了，V也能够通过绑定的QQ号强制改回来，从而实现了对女孩的终生监控。女孩至今都没发现安全认证的QQ号不是自己的。</p><p>有一次，V用一个QQ的XSS漏洞，获得了女孩在腾讯的Cookie，从而能够浏览她的微博私信、QQ空间、私人相册、朋友网、QQ每天都和谁说话了，QQ每天在哪里登陆过（如果对此技术有疑惑或者有兴趣的朋友可以查阅拙作《白帽子讲Web安全》）。V就像一双隐形的眼睛，在背后默默的注视着女孩的一举一动，一颦一笑。也许V比女孩最亲密的人，都更了解女孩的一切。</p><p>这里没有什么狗血的爱情故事，V只是默默的观察着，而从未惊动过女孩。</p><p>V还控制了很多大型商场、写字楼的内网。有一段时间，他曾经研究过保安的行为。</p><p>“公司给保安们安排的监控电脑，是无法上网消遣的。我看到有几个技术型保安，买了一个叫如意天线的东西，专门破解附近无线密码的玩意，还带无线网卡功能。</p><p>他们把用来监控的电脑装上了这个如意天线网卡，破解了写字楼很多楼层的密码，记录在一个文档里面。比如：WIFI名，密码是多少的一个文档，大约有几十个。</p><p>保安对于整个商场的网络安全来说，是个很大的隐患。我还特意登录了他们用的客户端，看他们平时都做些什么，研究他们。保安们每天用电脑的需求就是聊QQ，上网看电影。”</p><p>我想监守自盗，不过如此吧。</p><p>控制了商场的内部系统就能修改充值卡、积分卡的数据，从而免费购物，V也验证过这一点。</p><p><strong>翻手为云</strong></p><p>不过观察女孩、研究保安、控制商场和写字楼都只是V强大能力的冰山一角。V通过控制公共服务设施，具备了很多只在电影中出现的很科幻的能力。</p><p>V都不太好意思提像“伪造任意手机号码发送短信”等半公开的技术。V能够做到查询指定手机的短信内容、通讯记录。还能查到指定手机号当前所在基站的编号，然后找到对应编号基站的物理地址，这意味着他能快速定位到任何一个人的真实地理位置所在。这一切都基于V对运营商内部系统权限的控制。也许你已经意识到了，控制了运营商的内部系统，就可以针对每个省的手机用户实现定向推送短信。</p><p>V已经拥有了强大的舆论控制能力。借助社交网络和新闻资讯网站，以及运营商级别的手机广播，V可以让自己的思想在10分钟内传遍整个互联网。但V从未滥用过他的能力。</p><p>V控制了大部分粉丝数量在百万和千万级的微博大号，他给我展示的战果里不乏像苍井空、欧弟这样的人民艺术家。他告诉我，大部分微博大号都是经纪人在打理，而非本人，真不知道粉丝们每天瞎起个什么劲。所以“何润东”同学的“大概8点20分发”可能也是这样闹出来的乌龙。V在一些影响力巨大的微博大号后台里仔细研究过他们的行为，有些大号也是本人在操作，比如李开复、keso等意见领袖。</p><p>“咳咳，那个谁，keso同学，你的密码是7位的数字，赶紧找个时间改改吧！”</p><p>如同往常一样，V并未惊动这些大号们，只是在背后默默的观察着他们的一言一行。</p><p>“观察女孩子是猥琐的事情，我还希望能够做些正义的事情。”，V说。</p><p>“你有没有想过未来像维基解密的创始人阿桑奇一样，揭露一些真相？”，我问。</p><p>“也许吧，我希望让更多‘需要靠奥特曼打小怪兽培养正义感’的年轻人们，能够有机会倾听到社会真正的声音。”，V如是说。</p><p>无独有偶，阿桑奇在接受TED采访时，也谈到“纳税人有权知道他们缴税来支撑的这些事情的真相。”</p><p>自古侠以武犯禁，人在做，天在看。多行不义者，小心会被V盯上后“研究一段时间”。</p><p>V告诉我，他控制过很多电力、自来水、煤气等基础设施服务公司。以电力公司为例，一个小区在开发商开发好后，随着房子卖出，物业公司会联系电力公司为每家每户布线装表。此时，业主的联系信息（和房产证的信息基本一致）将被写入电网的相关系统，只要在电网、自来水公司、煤气公司的数据库里查询一下记录，就能查出很多“房叔”、“房姐”之类的人。</p><p><strong>地下世界的王者</strong></p><p>对于真正强大的黑客来说，已经勿须再关注是否能控制个别网站的权限，V所控制的权限都是以“行业”为单位来划分的。</p><p>“网页游戏行业90%的公司，一些大型电商、大型论坛，80%的连锁酒店行业，80%以上的在线预订行业，手机App排行比较高的公司，几家最大的航空公司……”，V拉出了长长的一串名单。</p><p>我问V，“还有什么网站是你黑不掉的吗？”</p><p>V答道：“目前成功率是100%，只要有耐心，还没有黑不掉的。</p><p>有几个站，我已经持续盯了6年了，我的感觉是快要拿下了。</p><p>黑站黑多了，你就会有这样的直觉。”</p><p>我想任何网站一旦知道有一个像V这样的人在长期惦记着，都会感到毛骨悚然吧。这种长期的、持续的攻击方式，在安全行业里有一个专业术语，叫APT（Advanced Persistent Threat）。但V对此不屑一顾，他不知道为什么这么好玩的事情一定要加上一个专业名词。</p><p>“以前我会自己去找一些WEB程序的0day，现在基本上不需要了。</p><p>现在靠的是对目标的了解。把目标分解后，不一定非得在WEB系统上耗时间。和目标相关的所有人，或者同一交换机，同一骨干路由下的服务器也会成为我的攻击目标。</p><p>每一次攻击行为都做到极致，对手其实是自己，而不是任何其他系统或人。重要的是整个攻击过程开心就好。还有一种感觉我说不出来。每一次证实自己的想法，做到极限的时候，都会伴随着快感。”</p><p>V发现了很多独特的，有创意的攻击手法，他也乐在其中。“Hacking For Fun”在他的身上体现的淋漓尽致。</p><p><strong>领先一个时代的攻击技术</strong></p><p>V对国内的公司兴趣已经不大了，因为没什么挑战。目前V走上了国际化的道路。</p><p>他最大的成就，是积累了一个去重后有13亿条数据的数据库。每条记录，都包含了用户名、密码、身份证号（社保ID）、手机号、邮箱、登录IP等信息。</p><p>对于V来说，想知道谁的密码，只需要在库中简单的查询一下，马上就得到了。有时候密码经过了哈希算法的处理，需要经过彩虹表的反查，或者V会拿到一个云计算中心去用分布式计算框架破解（对技术有疑惑或者有兴趣的读者可以参阅拙作《白帽子讲Web安全》）。所以V能够直接查到女孩的邮箱密码。</p><p>“道哥，你的Facebook账号和Twitter账号都是同一个弱口令，好多年了，改改吧。”，V一脸坏笑的对我说。</p><p>V在入侵的过程中，遇到任何需要破解的账户，大部分都可以直接查询出密码，无往而不利。这个数据库，像滚雪球一样越滚越大，最终量变形成了质变。</p><p>在前几天，Youtube刚刚宣布他们的月度活跃用户数达到了10亿，这意味着互联网上每两个网民中就有一个是Youtube的活跃用户。V可能会在背后暗自偷笑吧，他的13亿去重后的用户数据，也覆盖了半个互联网。每两个人中，就有一个人的密码在V的掌控，你会不会是那一个人呢？</p><p>当其他的小黑客们还在摆弄着各种扫描器和0day的时候，V已经用领先了整整一个时代的技术 —- 大数据的方式 —- 来黑网站了。</p><p>在真正强大的黑客面前，互联网公司的任何防御措施都像是一张纸，显得如此的薄弱，一捅就破。黑客们只能靠道德来约束自己的行为，能力越强，责任越大。</p><p>V最后给了我一张图，也许你们已经猜到了，就是本文的配图（点击图片可查看高清无码大图）。V从他的13亿条记录中轻巧的抽取出了80万登录IP，绘制了这张铺满全世界的地图：</p><p>从空旷的格陵兰岛，到炽热的撒哈拉大沙漠；从寒冷的西伯利亚，到充满野性的亚马逊丛林；从北极冰原，到太平洋、大西洋上星罗密布的岛屿；</p><p>V，在这个星球上，还有什么地方是你不曾征服的吗？你点亮了全世界！</p><p>原文：<a href="http://www.javaranger.com/archives/849" target="_blank" rel="noopener">http://www.javaranger.com/archives/849</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313716/从运行原理及使用场景看apache和nginx/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313716/从运行原理及使用场景看apache和nginx/" itemprop="url">从运行原理及使用场景看apache和nginx</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-22T02:08:19+08:00">2014-02-22</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">4,834</span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>用正确的工具，做正确的事情。<br><strong>本文只作为了解Apache和Nginx知识的一个梳理，想详细了解的请阅读文末参考链接中的博文。</strong></p></blockquote><h2 id="Web服务器"><a href="#Web服务器" class="headerlink" title="Web服务器"></a>Web服务器</h2><p>Web服务器也称为WWW(WORLD WIDE WEB)服务器，主要功能是提供网上信息浏览服务。</p><ul><li>应用层使用HTTP协议。</li><li>HTML文档格式。</li><li><p>浏览器统一资源定位器(URL)。<br>Web服务器常常以B/S（Browser/Server）方式提供服务。浏览器和服务器的交互方式如下：</p><div><br><br> GET /index.php HTTP/1.1<br><br> +—————+ +—————-+<br> | +——————-&gt; |<br> | Browser | | Server |<br> | &lt;——————-+ |<br> +—————+ +—————-+<br><br> HTTP/1.1 200 OK`<br></div></li></ul><ol><li>浏览器向服务器发出HTTP请求(Request)。</li><li>服务器收到浏览器的请求数据，经过分析处理，向浏览器输出响应数据（Response）。</li><li><p>浏览器收到服务器的响应数据，经过分析处理，将最终结果显示在浏览器中。<br>Apache和Nginx都属于Web服务器，两者都实现了HTTP 1.1协议。</p><h2 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>Apache HTTP Server是Apache软件基金会的一个开放源代码的网页服务器，可以在大多数计算机操作系统中运行，由于其跨平台和安全性。被广泛使用，是最流行的Web服务器端软件之一。它快速、可靠并且可通过简单的API扩充，将Perl／Python等解释器编译到服务器中。 – <a href="http://zh.wikipedia.org/wiki/Apache_HTTP_Server" target="_blank" rel="noopener">维基百科</a></p><h3 id="Apache组件"><a href="#Apache组件" class="headerlink" title="Apache组件"></a>Apache组件</h3><p>Apache是基于模块化设计的，它的核心代码并不多，大多数的功能都被分散到各个模块中，各个模块在系统启动的时候按需载入。</p><div><br><pre><code>+----------+
      +- | Module   | -----------------+
      |  +----------+                  |
      |                          +------------+
+-----------+   Apache HTTPD     | php module |
| Module    |                    +------------+
+-----------+              +----------+|
      +----------+-------- |  MPM     |+
                 |         +----+---+-+
               +-v-----------+  |   |
               |    ARP      &amp;lt;--+   |
               +------+------+      |
                      |             |
      +---------------v-------------v--+
      |      Operating  System         |
      +--------------------------------+</code></pre><br></div><br>MPM（Multi -Processing Modules，多重处理模块）是Apache的核心组件之一，Apache通过MPM来使用操作系统的资源，对进程和线程池进行管理。Apache为了能够获得最好的运行性能，针对不同的平台 (Unix/Linux、Window)做了优化，为不同的平台提供了不同的MPM，用户可以根据实际情况进行选择，其中最常使用的MPM有 prefork和worker两种。至于您的服务器正以哪种方式运行，取决于安装Apache过程中指定的MPM编译参数,在X系统上默认的编译参数为 prefork。<br><br>由于大多数的Unix都不支持真正的线程，所以采用了预派生子进程(prefork)方式，象Windows或者Solaris这些支持 线程的平台，基于多进程多线程混合的worker模式是一种不错的选择。Apache中还有一个重要的组件就是APR（Apache portable Runtime Library），即Apache可移植运行库，它是一个对操作系统调用的抽象库，用来实现Apache内部组件对操作系统的使用，提高系统的可移植性。 Apache对于php的解析，就是通过众多Module中的php Module来完成的。<br><br>### Apache生命周期<br><br><div><br><pre><code>+--------------------------------------------------------------+
   |                 +---------------------+       启动阶段        |
   |                 |    系统启动, 配置     |                      |
   |                 +----------+----------+                      |
   |                            |                                 |
   |                 +----------v----------+                      |
   |                 |      模块的初始化     |                      |
   |                 +-+--------+--------+-+                      |
   |                   |        |        |                        |
   |   +-------------+ | +------v-------+| +--------------+       |
   |   | 子进程初始化  |&amp;lt;+ | 子进程初始化   |+&amp;gt;|  子进程初始化  |       |
   |   +------+------+   +-------+------+  +-------+------+       |
   +--------------------------------------------------------------+
   |          |                  |                 |     运行阶段  |
   |     +----v----+        +----v----+       +----v----+         |
   |     | 请求循环 |        |  请求循环 |       | 请求循环 |         |
   |     +----+----+        +----+----+       +----+----+         |
   |          |                  |                 |              |
   |   +------v------+    +------v------+   +------v------+       |
   |   |  子进程结束   |    |  子进程结束  |   |   子进程结束  |       |
   |   +-------------+    +-------------+   +-------------+       |
   +--------------------------------------------------------------+</code></pre><br></div><br>这个生命周期是在perfork工作下的示意，从图中可以看出，Apache对于每一个请求都要启动一个单独的进程来处理。<br><br>### Apache的工作模式<br><br>#### <strong>prefork的工作原理</strong><br><br>一个单独的控制进程(父进程)负责产生子进程，这些子进程用于监听请求并作出应答。Apache总是试图保持一些备用的 (spare)或是空闲的子进程用于迎接即将到来的请求。这样客户端就无需在得到服务前等候子进程的产生。在Unix系统中，父进程通常以root身份运行以便邦定80端口，而 Apache产生的子进程通常以一个低特权的用户运行。User和Group指令用于配置子进程的低特权用户。运行子进程的用户必须要对他所服务的内容有读取的权限，但是对服务内容之外的其他资源必须拥有尽可能少的权限。<br><br>#### <strong>worker的工作原理</strong><br><br>每个进程能够拥有的线程数量是固定的。服务器会根据负载情况增加或减少进程数量。一个单独的控制进程(父进程)负责子进程的建立。每个子进程能够建立ThreadsPerChild数量的服务线程和一个监听线程，该监听线程监听接入请求并将其传递给服务线程处理和应答。Apache总是试图维持一个备用(spare)或是空闲的服务线程池。这样，客户端无须等待新线程或新进程的建立即可得到处理。在Unix中，为了能够绑定80端口，父进程一般都是以root身份启动，随后，Apache以较低权限的用户建立子进程和线程。User和Group指令用于配置Apache子进程的权限。虽然子进程必须对其提供的内容拥有读权限，但应该尽可能给予他较少的特权。另外，除非使用了suexec ，否则，这些指令配置的权限将被CGI脚本所继承。<br><br>### Apache的运行<br><br>#### 启动阶段<br><br>在启动阶段，Apache主要进行配置文件解析(例如http.conf以及Include指令设定的配置文件等)、模块加载(例如mod_php.so,mod_perl.so等)和系统资源初始化（例如日志文件、共享内存段等）工作。在这个阶段，Apache为了获得系统资源最大的使用权限，将以特权用户root（X系统）或超级管理员administrator(Windows系统)完成启动。<br><br>这个过程可以通过下图来深入了解：<br><div><br><pre><code>+--------+      
       |  开始   |      
       +----+---+         
            |
 +----------v------------+   解析主配置文件http.conf中配置信息， 
 |     解析配置文件        |   像LoadModule, AddType
 +----------+------------+   等指令被加载至内存
            |
 +----------v------------+   依据AddModule, LoadModule等指令
 |   加载静态/动态模块      |   加载Apache模块，像mod_php5.so被
 +----------+------------+   加载至内存，映射到Apache地址空间。
            |
 +----------v------------+   日志文件、共享内存段，数据库链接
 |     系统资源初始化      |    等初始化
 +----------+------------+
            |
        +---v----+
        |  结束   |
        +--------+</code></pre><br></div><h4 id="运行阶段"><a href="#运行阶段" class="headerlink" title="运行阶段"></a>运行阶段</h4><p>在运行阶段，Apache主要工作是处理用户的服务请求。在这个阶段，Apache放弃特权用户级别，使用普通权限，这主要是基于安全性的考虑，防止由于代码的缺陷引起的安全漏洞。</p><p>由于Apache的Hook机制，Apache 允许模块(包括内部模块和外部模块，例如<code>mod_php5.so</code>,<code>mod_perl.so</code>等)将自定义的函数注入到请求处理循环中。<code>mod_php5.so</code>/<code>php5apache2.dll</code>就是将所包含的自定义函数，通过Hook机制注入到Apache中，在Apache处理流程的各个阶段负责处理php请求。</p><p>Apache将请求处理循环分为11个阶段，依次是：Post-Read-Request，URI Translation，Header Parsing，Access Control，Authentication，Authorization，MIME Type Checking，FixUp，Response，Logging，CleanUp。</p><p>Apache处理http请求的生命周期:</p><p><img src="http://yansu.org/public/upload/apache-http-handle.jpg" alt="Apache处理http请求的生命周期"></p></li><li><p>Post-Read-Request阶段:在正常请求处理流程中，这是模块可以插入钩子的第一个阶段。对于那些想很早进入处理请求的模块来说，这个阶段可以被利用。</p></li><li>URI Translation阶段 : Apache在本阶段的主要工作：将请求的URL映射到本地文件系统。模块可以在这阶段插入钩子，执行自己的映射逻辑。mod_alias就是利用这个阶段工作的。</li><li>Header Parsing阶段 : Apache在本阶段的主要工作：检查请求的头部。由于模块可以在请求处理流程的任何一个点上执行检查请求头部的任务，因此这个钩子很少被使用。mod_setenvif就是利用这个阶段工作的。</li><li>Access Control阶段 : Apache在本阶段的主要工作：根据配置文件检查是否允许访问请求的资源。Apache的标准逻辑实现了允许和拒绝指令。mod_authz_host就是利用这个阶段工作的。</li><li>Authentication阶段 : Apache在本阶段的主要工作：按照配置文件设定的策略对用户进行认证，并设定用户名区域。模块可以在这阶段插入钩子，实现一个认证方法。</li><li>Authorization阶段 : Apache在本阶段的主要工作：根据配置文件检查是否允许认证过的用户执行请求的操作。模块可以在这阶段插入钩子，实现一个用户权限管理的方法。</li><li>MIME Type Checking阶段 : Apache在本阶段的主要工作：根据请求资源的MIME类型的相关规则，判定将要使用的内容处理函数。标准模块mod_negotiation和mod_mime实现了这个钩子。</li><li>FixUp阶段 : 这是一个通用的阶段，允许模块在内容生成器之前，运行任何必要的处理流程。和Post_Read_Request类似，这是一个能够捕获任何信息的钩子，也是最常使用的钩子。</li><li>Response阶段 : Apache在本阶段的主要工作：生成返回客户端的内容，负责给客户端发送一个恰当的回复。这个阶段是整个处理流程的核心部分。</li><li>Logging阶段 : Apache在本阶段的主要工作：在回复已经发送给客户端之后记录事务。模块可能修改或者替换Apache的标准日志记录。</li><li><p>CleanUp阶段 : Apache在本阶段的主要工作：清理本次请求事务处理完成之后遗留的环境，比如文件、目录的处理或者Socket的关闭等等，这是Apache一次请求处理的最后一个阶段。</p><h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>Nginx（发音同engine x）是一款由俄罗斯程序员Igor Sysoev所开发轻量级的网页服务器、反向代理服务器以及电子邮件（IMAP/POP3）代理服务器。起初是供俄国大型的门户网站及搜索引擎Rambler（俄语：Рамблер）使用。 – <a href="http://zh.wikipedia.org/wiki/Nginx" target="_blank" rel="noopener">维基百科</a></p><h3 id="Nginx的模块与工作原理"><a href="#Nginx的模块与工作原理" class="headerlink" title="Nginx的模块与工作原理"></a>Nginx的模块与工作原理</h3><p>Nginx由内核和模块组成，其中，内核的设计非常微小和简洁，完成的工作也非常简单，仅仅通过查找配置文件将客户端请求映射到一个location block（location是Nginx配置中的一个指令，用于URL匹配），而在这个location中所配置的每个指令将会启动不同的模块去完成相应的工作。</p><p>Nginx的模块从结构上分为核心模块、基础模块和第三方模块：</p></li></ol><ul><li>核心模块：HTTP模块、EVENT模块和MAIL模块</li><li>基础模块：HTTP Access模块、HTTP FastCGI模块、HTTP Proxy模块和HTTP Rewrite模块，</li><li><p>第三方模块：HTTP Upstream Request Hash模块、Notice模块和HTTP Access Key模块。<br>Nginx的模块从功能上分为如下三类:</p></li><li><p>Handlers（处理器模块）。此类模块直接处理请求，并进行输出内容和修改headers信息等操作。Handlers处理器模块一般只能有一个。</p></li><li>Filters （过滤器模块）。此类模块主要对其他处理器模块输出的内容进行修改操作，最后由Nginx输出。</li><li>Proxies （代理类模块）。此类模块是Nginx的HTTP Upstream之类的模块，这些模块主要与后端一些服务比如FastCGI等进行交互，实现服务代理和负载均衡等功能。<br><div><br><pre>`                     +                    ^<pre><code>    Http Request |                    |  Http Response
                 |                    |
+---------+------v-----+         +----+----+
|  Conf   | Nginx Core |         | FilterN |
+---------+------+-----+         +----^----+
                 |                    |
                 |               +----+----+
                 |               | Filter2 |
</code></pre>choose a handler | +—-^—-+<br>based conf | |<pre><code>      |               +----+----+
      |               | Filter1 |
      |               +----^----+
      |                    | Generate content
+-----v--------------------+----+
|           Handler             |
+-------------------------------+
</code></pre></pre></div></li></ul><p><br>Nginx本身做的工作实际很少，当它接到一个HTTP请求时，它仅仅是通过查找配置文件将此次请求映射到一个location block，而此location中所配置的各个指令则会启动不同的模块去完成工作，因此模块可以看做Nginx真正的劳动工作者。通常一个location中的指令会涉及一个handler模块和多个filter模块（当然，多个location可以复用同一个模块）。handler模块负责处理请求，完成响应内容的生成，而filter模块对响应内容进行处理。</p><h3 id="Nginx架构及工作流程"><a href="#Nginx架构及工作流程" class="headerlink" title="Nginx架构及工作流程"></a>Nginx架构及工作流程</h3><p><img src="http://yansu.org/public/upload/nginx-architecture.png" alt="Nginx架构"></p><p>上图是Nginx的架构，这个架构类似于Apache的Worker工作状态，Nginx的每一个Worker进程都管理着大量的线程，真正处理请求的是Worker之下的线程。</p><p>所有实际上的业务处理逻辑都在worker进程。worker进程中有一个函数，执行无限循环，不断处理收到的来自客户端的请求，并进行处理，直到整个nginx服务被停止。Worker中这个函数执行内容如下：</p><ol><li>操作系统提供的机制（例如epoll, kqueue等）产生相关的事件。</li><li>接收和处理这些事件，如是接受到数据，则产生更高层的request对象。</li><li>处理request的header和body。</li><li>产生响应，并发送回客户端。</li><li>完成request的处理。</li><li>重新初始化定时器及其他事件。</li></ol><h3 id="Nginx和FastCGI"><a href="#Nginx和FastCGI" class="headerlink" title="Nginx和FastCGI"></a>Nginx和FastCGI</h3><h4 id="FastCGI"><a href="#FastCGI" class="headerlink" title="FastCGI"></a>FastCGI</h4><p>FastCGI是一个可伸缩地、高速地在HTTP server和动态脚本语言间通信的接口。多数流行的HTTP server都支持FastCGI，包括Apache、Nginx和lighttpd等。同时，FastCGI也被许多脚本语言支持，其中就有PHP。</p><p>FastCGI是从CGI发展改进而来的。传统CGI接口方式的主要缺点是性能很差，因为每次HTTP服务器遇到动态程序时都需要重新启动脚本解析器来执行解析，然后将结果返回给HTTP服务器。这在处理高并发访问时几乎是不可用的。另外传统的CGI接口方式安全性也很差，现在已经很少使用了。</p><p>FastCGI接口方式采用C/S结构，可以将HTTP服务器和脚本解析服务器分开，同时在脚本解析服务器上启动一个或者多个脚本解析守护进程。当HTTP服务器每次遇到动态程序时，可以将其直接交付给FastCGI进程来执行，然后将得到的结果返回给浏览器。这种方式可以让HTTP服务器专一地处理静态请求或者将动态脚本服务器的结果返回给客户端，这在很大程度上提高了整个应用系统的性能。</p><h4 id="Nging和FastCGI合作"><a href="#Nging和FastCGI合作" class="headerlink" title="Nging和FastCGI合作"></a>Nging和FastCGI合作</h4><p>Nginx不支持对外部程序的直接调用或者解析，所有的外部程序（包括PHP）必须通过FastCGI接口来调用。FastCGI接口在Linux下是socket（这个socket可以是文件socket，也可以是ip socket）。</p><p>接下来以Nginx下PHP的运行过程来说明。PHP-FPM是管理FastCGI的一个管理器，它作为PHP的插件存在。</p><ol><li>FastCGI进程管理器php-fpm自身初始化，启动主进程php-fpm和启动start_servers个CGI 子进程。主进程php-fpm主要是管理fastcgi子进程，监听9000端口。fastcgi子进程等待来自Web Server的连接。</li><li>当客户端请求到达Web Server Nginx是时，Nginx通过location指令，将所有以php为后缀的文件都交给127.0.0.1:9000来处理，即Nginx通过location指令，将所有以php为后缀的文件都交给127.0.0.1:9000来处理。</li><li>FastCGI进程管理器PHP-FPM选择并连接到一个子进程CGI解释器。Web server将CGI环境变量和标准输入发送到FastCGI子进程。</li><li>FastCGI子进程完成处理后将标准输出和错误信息从同一连接返回Web Server。当FastCGI子进程关闭连接时，请求便告处理完成。</li><li>FastCGI子进程接着等待并处理来自FastCGI进程管理器（运行在 WebServer中）的下一个连接。</li></ol><h2 id="Apache和Nginx比较"><a href="#Apache和Nginx比较" class="headerlink" title="Apache和Nginx比较"></a>Apache和Nginx比较</h2><h3 id="功能对比"><a href="#功能对比" class="headerlink" title="功能对比"></a>功能对比</h3><p>Nginx和Apache一样，都是HTTP服务器软件，在功能实现上都采用模块化结构设计，都支持通用的语言接口，如PHP、Perl、Python等，同时还支持正向和反向代理、虚拟主机、URL重写、压缩传输、SSL加密传输等。</p><ol><li>在功能实现上，Apache的所有模块都支持动、静态编译，而Nginx模块都是静态编译的，</li><li>对FastCGI的支持，Apache对Fcgi的支持不好，而Nginx对Fcgi的支持非常好；</li><li>在处理连接方式上，Nginx支持epoll，而Apache却不支持；</li><li>在空间使用上，Nginx安装包仅仅只有几百K，和Nginx比起来Apache绝对是庞然大物。</li></ol><h3 id="Nginx相对apache的优点"><a href="#Nginx相对apache的优点" class="headerlink" title="Nginx相对apache的优点"></a>Nginx相对apache的优点</h3><ul><li>轻量级，同样起web 服务，比apache 占用更少的内存及资源</li><li>静态处理，Nginx 静态处理性能比 Apache 高 3倍以上</li><li>抗并发，nginx 处理请求是异步非阻塞的，而apache则是阻塞型的，在高并发下nginx 能保持低资源低消耗高性能。在Apache+PHP（prefork）模式下，如果PHP处理慢或者前端压力很大的情况下，很容易出现Apache进程数飙升，从而拒绝服务的现象。</li><li>高度模块化的设计，编写模块相对简单</li><li>社区活跃，各种高性能模块出品迅速啊</li></ul><h3 id="apache相对nginx的优点"><a href="#apache相对nginx的优点" class="headerlink" title="apache相对nginx的优点"></a>apache相对nginx的优点</h3><ul><li>rewrite，比nginx 的rewrite 强大</li><li>模块超多，基本想到的都可以找到</li><li>少bug，nginx的bug相对较多</li><li>超稳定</li><li>Apache对PHP支持比较简单，Nginx需要配合其他后端用</li></ul><h3 id="选择Nginx的优势所在"><a href="#选择Nginx的优势所在" class="headerlink" title="选择Nginx的优势所在"></a>选择Nginx的优势所在</h3><ol><li>作为Web服务器: Nginx处理静态文件、索引文件，自动索引的效率非常高。</li><li>作为代理服务器，Nginx可以实现无缓存的反向代理加速，提高网站运行速度。</li><li>作为负载均衡服务器，Nginx既可以在内部直接支持Rails和PHP，也可以支持HTTP代理服务器对外进行服务，同时还支持简单的容错和利用算法进行负载均衡。</li><li>在性能方面，Nginx是专门为性能优化而开发的，在实现上非常注重效率。它采用内核Poll模型(epoll and kqueue )，可以支持更多的并发连接，最大可以支持对50 000个并发连接数的响应，而且只占用很低的内存资源。</li><li>在稳定性方面，Nginx采取了分阶段资源分配技术，使得CPU与内存的占用率非常低。Nginx官方表示，Nginx保持10 000个没有活动的连接，而这些连接只占用2.5MB内存，因此，类似DOS这样的攻击对Nginx来说基本上是没有任何作用的。</li><li>在高可用性方面，Nginx支持热部署，启动速度特别迅速，因此可以在不间断服务的情况下，对软件版本或者配置进行升级，即使运行数月也无需重新启动，几乎可以做到7×24小时不间断地运行。</li></ol><h2 id="同时使用Nginx和Apache"><a href="#同时使用Nginx和Apache" class="headerlink" title="同时使用Nginx和Apache"></a>同时使用Nginx和Apache</h2><p>由于Nginx和Apache各自的优势，现在很多人选择了让两者在服务器中共存。在服务器端让Nginx在前，Apache在后。由Nginx做负载均衡和反向代理，并且处理静态文件，讲动态请求（如PHP应用）交给Apache去处理。</p><p>原文地址：<a href="http://yansu.org/2014/02/15/apache-and-nginx.html" target="_blank" rel="noopener">http://yansu.org/2014/02/15/apache-and-nginx.html</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol><li><a href="http://blog.csdn.net/hguisu/article/details/7395181" target="_blank" rel="noopener">Apache运行机制剖析</a></li><li><a href="http://qing.blog.sina.com.cn/tj/69004f5933000xlt.html" target="_blank" rel="noopener">Apache处理http请求的生命周期</a></li><li><a href="http://tengine.taobao.org/book/chapter_02.html" target="_blank" rel="noopener">Nginx平台初探</a></li><li><a href="http://liuxun.org/blog/nginx-jia-gou-zong-lan/" target="_blank" rel="noopener">Nginx架构综述</a></li><li><a href="http://blog.csdn.net/hguisu/article/details/7403622" target="_blank" rel="noopener">Apache, nginx, lighttpd性能比较</a></li></ol></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313714/vps无密码登陆（ssh证书让putty免密码登陆linux）windows下的设置/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313714/vps无密码登陆（ssh证书让putty免密码登陆linux）windows下的设置/" itemprop="url">vps无密码登陆（ssh证书让putty免密码登陆linux）windows下的设置</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-21T12:16:20+08:00">2014-02-21</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">476</span></span></div></header><div class="post-body" itemprop="articleBody"><p>SSH证书让Putty免密码登陆Linux的方法，此方法是针对windows端下的。<br>1.第一步，下载putty，建议下载这个中文版。<a href="http://code.google.com/p/puttycn/" target="_blank" rel="noopener">http://code.google.com/p/puttycn/</a><br>主要是下载到puttygen.exe</p><p>2、用PuTTY SSH 密钥生成工具puttygen.exe生成密钥<br>生成的密钥类型和位数按照默认的就行，SSH-2 RSA，2048位<br>生成密钥时你需要在空白区域移动鼠标,以便产生随机数据<br>点击保存私钥(可以不设置密码保护)</p><p>保存下你的私钥到文件中（ppk后缀的），这个文件很重要，一定要放好，公钥文件是放到linux端的，你也可以保存下，等会需要生成的公钥。<br>密码不需要填写。</p><p>3、SSH密码方式登入远端Linux服务器/VPS,创建.ssh/authorized_keys.<br>vim ~/.ssh/authorized_keys<br>将puttygen.exe生成的公钥内容粘贴至~/.ssh/authorized_keys.<br>比如我生成的内容为：<br>ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQsdfEA0TkpyA25QTupNR/CALYVjDmpgPWE2oiRzMs8CLIX8IAiTbYPsdfooT7cdGsdf75ipTCV8+fV8Fdfyq5SfkTqA8aninNjDfw2y5fkaPwvoQhK3qFqxQkBBO2tgj4K90pXAdlub2OPsd135dcj9b2bSvv9KssdfdggfhNsV/NkDAojpYmK1YWhZsUj4EuVdvvgeIFIAYo9OPzFCtARctCEDLVmsI8/M9UOTMPdvOkr7KAzvDcQ7dZwQWWDDeUAQtN+NBdOj5bn8YasXS4X01cU4krBOs5nUrnsxD+kciz0kROLiAn1Hv4G1osd8pvXTRup5w== rsa-key-20140221</p><p>注:公钥内容就在显示的公钥(P)由OpenSSH认可: 这行字符下面.<br>至于为什么文件名是authorized_keys,可以在/etc/ssh/sshd_config中找到下面两行</p><p>#PubkeyAuthentication yes</p><p>#AuthorizedKeysFile .ssh/authorized_keys</p><p>4.用SSH证书登陆你的Linux服务器/VPS<br>Putty→会话:将服务器IP填好<br>Putty→连接→数据:填好自动登陆用户名<br>Putty→连接→SSH→认证:选择认证私钥文件<br>回到Putty→会话:保存的会话,填个名称保存下吧,下次直接双击名称就可以登录了,赶紧登录吧.</p><p>选择你的私钥文件即可，上一步要保存你的私钥文件的，这个文件一定要保存好。</p><p>5.为了安全你需要取消SSH的密码认证方式.（可选操作，添加后你将不能使用密码方式登陆）<br>vim /etc/ssh/sshd_config<br>添加下面这行<br>PasswordAuthentication no<br>重启SSH服务<br>service sshd restart</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313709/linode被注入恶意软件解决办法/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313709/linode被注入恶意软件解决办法/" itemprop="url">linode被注入恶意软件解决办法</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-14T02:49:56+08:00">2014-02-14</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">570</span></span></div></header><div class="post-body" itemprop="articleBody"><p>今天接到linode通知，一个VPS中有恶意软件，让我删除，不过VPS无法开机了，以前也遇到过一次， 这次又遇到了，看来只有把VPS直接重新创建才行，linode也建议如此。<br>Hello,</p><p>You may want to audit the following log files and writable directories:</p><ul><li>“/var/log/auth.log”: You may have fallen victim to a SSH brute force attack.</li><li>“last”: You can cross reference recent account logins with the brute force attempts in “/var/log/auth.log”.</li><li>/tmp: This directory is often used by attackers to store their files in.</li><li>Web server logs: You may have installed a vulnerable script or web application.</li><li>“ps aux”: Check for foreign processes.</li></ul><p>If you do find that your system has been compromised, I’d strongly suggest completely redeploying your Linode as it is often very difficult to determine the full scope of an attack. If downtime is a concern to you, the following guide will assist you with safely recovering your data and redeploying your Linode with minimal downtime:</p><ul><li><a href="http://library.linode.com/troubleshooting/compromise-recovery" target="_blank" rel="noopener">http://library.linode.com/troubleshooting/compromise-recovery</a></li></ul><p>If you do not want to spin up a new Linode as advised in the above guide, you can simply deploy a new distribution and mount your old disk images within it to copy your data over. You will first need to free up some space to deploy the new distribution. You can do this by resizing your existing disk image:</p><ul><li><a href="http://library.linode.com/linode-platform/manager/managing-disk-images#resize_a_disk_image" target="_blank" rel="noopener">http://library.linode.com/linode-platform/manager/managing-disk-images#resize_a_disk_image</a></li></ul><p>You can then deploy your new distribution and attach your old disk images to it:</p><ul><li>Select the “Deploy a Linux Distribution” link on your dashboard.</li><li>Choose your desired distribution, fill in the the required values, and then click on “Deploy”.</li><li>Return to the dashboard and select your new configuration profile.</li><li>Attach your old disk image to the drive setup of your new deployment.</li><li>Boot into your new deployment and mount your old disk image.</li><li>Copy your data.</li></ul><p>Once you have redeployed your Linode, I’d also recommend implementing some of the security measures advised in our “Security Basics” guide to minimize the risks of a security breach in the future:</p><ul><li><a href="http://library.linode.com/using-linux/security-basics" target="_blank" rel="noopener">http://library.linode.com/using-linux/security-basics</a></li></ul><p>I hope that you have found this information helpful. Please keep us updated on your progress and findings.</p><p>Thanks,<br>Mark<br>Linode Support</p><p>=====<br>如果你不想rebuild，建议以下做法，可以删除掉恶意软件，然后正常重新启动。主要是通过lish连接VPS，如果你的VPS确定无法启动了，首先要做的是Rescue and Rebuild<br>具体操作在这儿：<a href="https://library.linode.com/rescue-and-rebuild" target="_blank" rel="noopener">https://library.linode.com/rescue-and-rebuild</a><br>然后再通过lish连接你的VPS，进入VPS后，删除恶意软件即可。</p><p>连接到VPS后，先mount -o barrier=0 /dev/xvda<br>接着 cd /media/xvda<br>使用以下命令删除恶意软件<br>比如我的 find /media/xvda/home/ -name “*.rar” | xargs rm -rf</p><p>把这些恶意办的删掉，VPS便可以重新启动了。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313707/回乡见闻17篇，告诉你一个真实中国/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313707/回乡见闻17篇，告诉你一个真实中国/" itemprop="url">回乡见闻17篇，告诉你一个真实中国</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-10T11:41:48+08:00">2014-02-10</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/转载/" itemprop="url" rel="index"><span itemprop="name">转载</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">8,672</span></span></div></header><div class="post-body" itemprop="articleBody"><p>此文系转发<br>作者：国泰君安有色组</p><p>国泰君安有色组整理了网络上全国各地回乡见闻十七篇，供大家参考！见闻地域横跨了十多个省的县市农村，我们希望能从这些点来了解中国基层面的社会问题。我们从见闻中可以发现如下一些问题：<br>1，农村农业确实是大问题。农村空心化日益严重，耕地荒芜或转作宅基地的情况没有好转。农村的河流和土壤污染严重，环保有很大空间。终于可以理解习主席为啥在十七届三中全会把农村粮食问题放在首位了。<br>2，二三线城市房价有风险。二三线城市出现大量新建住宅，不少在2014-2015年上市，担心会出现销售困难局面，不知对地产商和银行有多大负面影响。<br>3，家乡人民的收入普遍提高。年轻人低收入的能赚2000-3000元/月，更多人收入在3000-5000元/月之间，如果能有一技之能（如建筑等）收入能达到5000元/月以上。和一线城市白领的差距不大。<br>4，汽车普及率提高很快。就我看到的，年轻人和父母在一个城市生活的基本都买了车。普通家庭买10万以内的国产车，有钱的家庭买20万以上的合资车撑门面。<br>5，反腐执行的还比较严厉。地方公务员和事业单位人员都抱怨没有过年福利了，公务车也不敢偷偷乱用了。<br>6，农村信基督教的变多了。很多家的供桌上，圣母取代了观音和大肚佛的位置。<br>一、回乡见闻——内蒙古乌兰察布<br>内蒙最落后的地区之一，乌兰察布集宁区，没什么资源也没什么工业。常住人口35万，旧城区没什么太大变化，比较冷清。新城区却正在大肆建设，面积差不多有旧城区的四倍。开车60km/h的速度走了二十分钟仍然能看见在盖房子。感觉都快和呼和浩特一般大了。都不知道这些房子最后卖给谁。房子价格不高，4000元/平米。当地教师收入平均5000元左右/月。其他事业单位的物价工资也差不多。小工收入两三百一天貌似。物价挺高，小饭馆一碗普通面条15元，炒菜一盘20以上吧。其他就没什么了，最感叹的就是房子盖的太多。<br>二、回乡见闻——西部某省<br>西部某吊丝省份的n县交界处的一个小农村。<br>目前年轻人在老家盖楼都选择沿路建设,不像老一辈都要选个好风水的地方。<br>年轻人盖楼了,一般又都把小孩接到大城市打工,所盖之楼多为空楼,还需要父母时不时去看看多数楼现在都是两层的,主要是老家的人觉得可能会被拆迁,所以几乎都加了一层楼.目前110M^2的第二层,所有费用(含人工费)约4万(不含装修)!而如果被拆迁,则按照900元m^2-补偿老家的人现在对耕地都很敏感,家里国家给出的征收价格是42.5元/m2,还有山林等土地,现在都非常重视.重视的目的倒不是其质量,而是可能会获得的赔偿费用!可以说,土地资本化的意识,已经深入到天国最深处。<br>从乡镇到村的路上,一路都有新建的楼房,已经没有当初走读时候的冷清.同时残砖断垣也处处可见,经打听,原来是村民为了赔偿而抢修的建筑物,但被政府视为违建(政府已经打过招呼,不要建设,这些人都是为了套钱而建设,不是为了住)而拆除!<br>人们之所以这么疯狂,是因为,周围一个村,因为为了把土地让渡给某石化公司建设石化项目而整体搬迁,在赔偿过程中,如果有人知道明天要来测量,今晚加班建设的楼房,都可以获得赔偿.这件事情给后来的人们树立了一个很坏的榜样,这直接导致另一个村拆迁事项,目前也没有达成一丁点协议。<br>已经搬迁的那个村,最多的获赔偿200万左右,整个村平均一人约10万/人,政府还承诺在镇上免费提供宅基地,在宅基地完工之前,政府为搬迁的家庭每户提供9000元的房租/年!<br>县城周围到处是工地!都在盖房子<br>人们也都担心地产会崩盘,但又对之趋之若骛!<br>三、回乡见闻——河南商丘睢县<br>县城房子盖的太多了，卖不动，有下跌的趋势。<br>土地开始流转，承包了地的，基本全转向经济作物。有房地产开发商弄到的地，基本是荒着，随便种些东西，有钱赔，等着转成非农业用地，搞旅游休闲农业。我认为基本上没这个可能，村里的人也不会同意，盯着呢。<br>基本没啥产业，还是外出打工为主。<br>四、回乡见闻—山东某县城<br>1、县城农村生活还是很艰苦，男人基本都是在外面打工，春节回来互相交流最多的是打工赚钱多少，谁谁开车回来了，谁谁在县城买房之类。春节放鞭炮比往年明显减少。饿不着，但生活条件差，消费着廉价商品。<br>2、母系社会，基本上家里就靠女人，做饭，洗衣服，家务，带孩子（孙辈）。儿女啃老很多，不管父母有钱没钱，基本都啃。<br>3、交通，路修的很宽，车不多。街道脏乱。出租车过年随便涨价。<br>4、县城大超市进不去，都是本地超市垄断。<br>5、酒精气息浓厚：澡堂，逛街，30岁以上男的，酒味，烟味浓烈的很多。<br>五、回乡见闻——岭南某县<br>岭南县级市，一百多万人，一直以来是鱼米之乡，去年全年财税收入16亿。从财政收入来看，总体来说是个穷地方，但人口和劳务输出得多，大家觉得生活得还不错。<br>住：<br>之前即便在市区内，大部分居民都是住自建的房子，一般四五层。现在随着进城的人越来越多，市区商品房也不少了，甚至有些大一点的乡镇也有了商品房。市区一般的在3500 rmb/m2以上。也有碧桂园开发的高档盘，别墅或联排别墅，8000 rmb/m2，在郊外。<br>行：<br>各亲亲戚戚，包括农村打工的，只要家里有壮劳力并且负担轻的，都买了代步用轿车。儿时的玩伴，基本上都有自己的车了（35岁左右）。大年初一，本来想去当地最大公园玩玩的（离我家4km)，开车开了一个多小时，没到门口，绝望了，又开回来，接着又堵了一个多小时。（注：大部分车都是外地牌，人们基本都是在外面谋生）<br>物价：<br>牛羊肉 &gt; 38元/斤，土鸡（活）：25元/斤，一刀切猪肉：15元/斤，其实也不便宜，但是，肉质确实比北京的好多了。青菜很便宜。<br>收入：<br>在外打工的不清楚，正常本地的各种单位，2000~3000/月就不错了，能提供的稳定岗位实在是太少太少，很多人找不到工作干，全职主妇很多。<br>城市面貌：<br>脏乱差，这也和当地习俗有关，过年时，不到初三不能扫地……<br>农村：<br>空心化，没啥人口了，也就过年才能多见些人，其实即使过年，在农村人也少多了。之前农村常见的各种庆祝活动（舞狮舞龙棋牌球赛等），都再也不见踪影。<br>环境：<br>有厂矿的地方，局部污染非常严重，主要是煤烟（水泥，陶瓷），以及污水排放（电子厂，纸厂之类），街道扬尘很多，垃圾能够集中存放，但都存在乱焚烧垃圾的现象。<br>六、回乡见闻——安徽中部小镇<br>人口现状：大部分年轻人都移民到附近的中等城市了，镇上只有老年人，小孩子更是寥寥无几，90年代初的三所小学，每年都能招7，80人，现在三所小学合并为一所，招6，7个人就不错了<br>工业现状：镇上有个煤矿相关的企业，长期以来是镇上的经济支柱，目前工人工资在两三千左右，其他小企业的工资一千左右（安徽确实是个屌丝地方）<br>商业现状：镇上有数家小超市，因为平房很便宜，很多附近的农民也来养老<br>房地产：新建了很多30层左右的高楼，是kq的保障房工程，但因为地处偏远，基本完全没人住，标价3千左右<br>投资渠道：无<br>空气绿化水：前几年镇上建了个小化工厂，因为严重水污染被关停。最近上游建了个特大规模的化工厂，但是对环境目前影响不太大。树早在90年代就被砍光了，绿化不行。<br>结论：小城镇的老龄化和严重萎缩已成定局。<br>七、回乡见闻-——鲁东南<br>鲁东南沿海一个山区县，人口50多万，不靠海，经济在山东算中等吧。<br>1. 县城周边全都是新盖的住宅楼，新盘一个挨一个，环境不怎么样不过都起了高大上的名字，其中一个楼盘叫“星河湾”，还有一个叫“御景园”，价格也就三千到五六千的水平，到了晚上这些楼盘亮灯的房间很少。一个亲戚二十多岁在北京打工，和女朋友加在一起一个月六千左右，租住沙河的农民自建房，去年结婚丈母娘要求领证必须有房，回家让父母借了二十多万首付买了一套空放着。一个亲戚在镇上机械厂打工，月收入有三千左右，也是为结婚借一二十万首付买了房子，没钱装修空放着，嫌住楼也不舒服，结婚后还是住家里的平房。一个亲戚在家乡开诊所，赚钱不少，这几年也买了好几套房子空放着，说是以后养老。<br>2.市政建设力度很大，环城是双向八车道的大马路，很多宏伟的政府建筑，最气派的就是政府部门的大楼还有垄断企业比如烟草电力，老丈人站指着刚建好的沿河公园，自豪的说这<br>公园不比北京的公园差。听一个政府工作的亲戚说县的财政收入不多，这些都是政府欠了很多债建的。拆迁力度很大，能看见很多村都是整村整村的平掉，当然中间少不了几个孤零零的钉子户。<br>3.路上汽车越来越多，县城里的商业区停车位都不太好找了，绝大多数都是十万以内的，国产车比如长城比亚迪奇瑞吉利这些档次的占很大比例，偶尔可见好一点的。很多新手，从坡起熄火和龟速爬行以及盲目并线能看出来，估计都是开车时间不长。有亲戚两口子收入每月六七千，也借钱买了十万左右的福克斯，因为单位里的人都在最近一两年买了车。<br>4.干部的福利受反腐影响很大。一离休的亲戚，以前每个月都有肉蛋鱼，逢年过节都有过节费，今年这些都没有了，据他说一年少收入七八千，那些在职的少收的礼品贿赂更多。<br>5.污染很厉害，在家的几天每天都是浓雾，初一出门能见度不到20米，能闻到刺鼻的气味，而那几天帝都空气都是优和良。一起吃饭的亲戚朋友们都认为帝都是空气污染最厉害的地方，却意识不到身边严重的污染。<br>6.农村劳动力很缺乏，想维修个房子都很难找到人，水利设施还有道路缺乏维护。石材厂乱挖石材，把山里的植被都破坏了，废石材扔的到处都是污染环境。养猪场和养鸡场垃圾随便往河里扔，废水随便往河里排。<br>八、回乡见闻——反腐成果<br>家乡小县城，各大单位过年什么都不敢发了。我爸单位订购的东西都退了。<br>公车查的很严，高速路口都在查。后备箱一瓶酒都不敢放。周末单位大院公车排成排，不敢开了<br>九、回乡见闻——四川某普通地级市<br>1 农业县改成区，还设立了经济开发区，据说也是县级的行政区。个人感觉有点蛋疼，听说是应对上面的政策，跟省直管县有关，我也不是很清楚。<br>2 房价基本上没变化了，记得前几年每次春节我爸都会说某个楼盘又创下了新高，今年很失望，听到的价格和上次基本是一样的。现在基本上市区6k，新区5k，附近乡镇3k。<br>3 隔壁家小孩三本计算机毕业，找了个3.5k的工作没去，培训了3个月，在成都找了个5.6k的工作。从我妈那里听到的，大妈们很专业，说待遇时还有零有整的。<br>4 我妈之前遇到我初中同学，问他家的情况，前几年听说他家贷款买挖掘机一月还2w多按揭，觉得很厉害。现在才知道当时借高利贷买的，后来还不起卖了挖掘机自己还添了钱才把债还上，现在该同学打工月薪1.8k，他lp在德克士打工，有2k多，算工作不错的。他还说在老家的初中同学里面xx同学混得不错，因为他上过大学，姐夫又是所在单位管人力的，现在工资还不错，买了房和车。<br>5 一个远房亲戚在当地最好的医院做医生，月薪七八千，算当地高富帅（其实不高也不帅），娶的播音主持专业毕业在电力局工作的美女，女生家庭背景也不错。<br>6 一个邻居本来合伙开厂，挺有钱，结果经营混乱开垮了，现在唯一资产也就是地皮了，挂出去1500w，暂时没人买，他家没现金了，生活开支都成问题了，靠他lp开茶馆维持。之前他家儿子上大学时本打算找关系去个好单位，现在没钱了关系也不灵了。他家儿子毕业后在野外搞了三个月测量，吃不了这个苦辞职了，现在找了个感觉不靠谱的单位说是在培训。<br>7 当地新盖的楼盘几乎都是坑爹货，我爸说市区基本也就俩楼盘有点小区环境，其他的基本上连个小区都没有。<br>十、回乡见闻——湖北县城<br>上个帖子说中部县城很多人打工年收入10w往外，我住湖北武汉，老家也是湖北的，316国道上的小城镇根据我的感觉，个人年收入10w以上的也许还不是很普遍，但是家庭收入10w往外的确实很普遍了，但是基本上都是依赖与房地产行业，包括：泥瓦工，包括室内装修，基本上大工一天收入都在250往外，下面县城、小镇上的人工费跟武汉持平，有可能还略高，从事这些行业的女人一天收入基本也都在100一天往外，很多是两口子一起在工地上； 五金，包括不锈钢、铝合金门窗之类，这是目前年轻人从事最多的行业，多数是十五六岁入行，基本上第一年能保本或略亏，第二年基本上能小赚，三年以上的靠谱青年，年挣10w是比较容易的<br>农村基本上没什么人了，一般地里也都没空着，主要是河南的收割机大队伍，每年从北往南的不停的在跑，到了农忙的时候在城镇里干活的中年人回去忙两三个星期就完了，如今有这个收入是很正常， 不过我有点担心的是这个状态能保持多长时间？房地产行业还能这样火热持续10年么？<br>能持续10年往外当然好，基本上都富裕了，<br>如果不能持续那么就，很多已经进入这些行业的年轻人，尤其是那些20-35岁之间的，从来没进过工厂，再去工厂也很难适应了，将来何去何从？<br>十一、回乡见闻——新农村路在何方？<br>过去的十年中，国家连续多年出台一号文件，集中精力解决了农村的部分问题，缓解了农村问题的持续恶化。但是，十年过去了，农村问题指标而没治本，问题依然存在，甚至是被表面的繁华掩盖而积蓄起来了，如果处理不慎，哪一天爆发出来，依旧可能成为社会动荡的一大诱因。<br>过去十年，所做工作实际上就是实现工业反哺农业的问题，增加了对农村的投入。但对于农村的去向，农民的将来，农业的维持，都没有很好地解决方案。所以，一旦工业本身出现问题时，无法支撑对农业的投入，三农问题必然会出现报复性的反弹，从而成为社会动荡的大问题。<br>回家，发现农村存在相当多的问题。在此我做一些尽可能的客观描述，以供大家参考。<br>一、农民问题。在这些年的社会发展中，农村的人口结构已经发生了巨大的变化。村子中一部分人家，通过读书和工作等方式，跳出了农门，几乎和村子联系很少了。而另外一部分人家，通过早年在外打拼，赚的第一桶金，如今就发家致富了。对于大部分人来说，都是留在村中，通过外出打工或打临工等方式获得经济的来源。对于这部分人，他们的特点是通常文化水平低，与父辈相比，缺乏那种吃苦耐劳的性格，同时，极易受到外界不良思想的影响，因此，道德底线较低，也缺乏法律的意识。<br>对于村子中格局的形成，外出人员由于回家较少，影响较少，所以，几乎是由生活在村中的村民自发形成。影响村风的因素主要包括基层政府引导、经济基础和社会思想等因素。在这些因素中，基层政府基本处于瘫痪状态，甚至是退出状态，所以，那种影响处于宏观，而非微观。自然村的自治，大多是通过血缘关系来决定一切，那个家族人多，能打架，那这个家族自然获得了话语权。而公共权力，也就是基层机构，对此即无心，也无力，大多是采取了默认态度，只要不出人命，就看不到政府的那只调解的手。虽然，宗族的影响曾经在农村中起到决定性的作用，但是，解放后的数次运动，早已经打破和清扫干净了那些封建的残留，只是，如今公权力的退出，留下来的真空亦不知道怎么填补了。<br>农村的经济基础，也就是经济来源，主要是来自打工收入。土地的产出已经微不足道，分的土地的作用只有这么几个作用，一是获得国家的补贴，二是卖地所得，三是变成自家的宅基地。所以，在取消农业税之后，土地与农民的关系，已经发生了变化，农民和土地之间已无那种依附关系了。对经济利益的争夺，也正成为农民潜意识的一种行为。在这个经济利益的争夺中，法律和公权力都成为旁观者，只要不死人，决定的标准只有两条，一是家族的力量，二是暴力。<br>对于现代的农民，在外界思想的冲击下，变得自暴自弃、麻木不仁和自私自利的个体，血缘关系成为判断利益共同体的基本依据，除此之外，金钱是所有行为驱动的根本动力。村子中稍有能力的，都尽可能的离开村子了，留下来的，大部分素质相当的差。整个村落的道德底线早已荡然无存，也无人有此能力改变现状。想在村子中做事，一是有钱，二是有权，三是有人，四是出卖肉体。<br>十二、回乡见闻——江西鄱阳<br>自然村一个，村里年青人基本外出打工。<br>1。买车的越来越多，在家的，也有外地开回家的；<br>2。又有不少去县城买房的，房价3000+；<br>3。工地的收入很高，10w+不是难事，进厂做衣服的越来越难，有不少年青人转战工地；<br>4。菜价与城市持平甚至更高，假冒伪劣商品横行；<br>5。不抽烟的年青人很多；<br>6。老实干活，踏实过日子是主流观念<br>十三、回乡见闻——浙江台州<br>老家浙江台州北边一个平时人口38万不到，过年人口55万的县城，20多万人（因为平时也有一点外来人口的）都去外面上学的上学，工作的工作，做生意的做生意了~。县城在浙江排名是倒着数的，大概能排倒数前25的样子，周边的县也都算各个地级市里面倒数的……。没办法，因为山多交通实在是不方便，再加上中心城市不太给力，就成这样子了。<br>我是住在该县二镇（也可以说是一镇，县城是街道了）里。过年的时候坐公交车都要抢着上了。也是，平时38万人口的交通公用设施一到过年的时候就明显不够用了。想想这也和铁路总公司的烦恼差不多吧。<br>过年的物价肯定是偏高的，我就不说什么夸张的数字了。豆芽大概是6元一斤，豆腐现在是3.5元一斤吧，早餐的小笼包是10元1屉都是过年才有的价格。平时小笼包大概是7元1屉 10个。沙县小吃兰州拉面好像都是全国统一价，我去看了一下和北上广深是没有区别的。水果，本地草莓是25元1斤，我最常吃的普通香蕉是3.5元1斤，砀山梨是3元一斤，青枣是8元一斤，感觉都比城市要贵。<br>再来说说小城的房价吧，基本都是1万以上的楼盘，二手房是在8000左右，不过，这里一直在建经济适用房，大部分的经适房最后的去向是小县城里有关系的人，大概是4000多一平方，市场价的40%左右，这也是我一直反对政府大规模建经适房的原因最后的流向都是不太正常的越是小的地方越是要拼关系的 浙江大部分小县城房子都是1万左右了<br>本地工资很低大部分年轻人都是2000~3000左右的工资实际上本地的工资是支撑不起这么高的消费的由于本地的产业比较低端工资也低大部分大学生（本科）一出去就不会再回当地就业了，基本都留上海杭州宁波等地了。农村的空心化也很严重，平时一个村子里，见不到多少人了，而且，是在相对好一点的镇里，都是这种情况，我对浙江省提出的中心镇的建设也就呵呵了，还是觉得中心城市建设，才更符合当前的情况。到时候，中心镇建好不久又衰了，浪费钱毫无意义。<br>县的经济情况显然不太好但县里无论哪个角落奥迪宝马奔驰路虎都是随处可见的在本地也算不上什么豪车了从过年的情况来看好点的村子基本都是一户一车了差点的村子也差不多3户一车了车子普及率还算不错的 宾利凯迪拉克保时捷也不少只可惜牌照都不是浙J ，浙J对于他们来说，也就是过年才来一次的地方 浙A浙B沪满大街的跑还有青海新疆陕西黑龙江广东江苏北京等全国各地牌照的车子。<br>对了本地有两家上市企业都很小的规模除了啤酒厂滤网橡胶汽车用品制药造袜子等产业该地最大的产业就是旅游业了每年差不多能吸引1000万（具体数字没找到但1000万是有的 2010年上半年就400多万了）的游客吧。<br>新近领导又开始想发展特色农业，种起了火龙果、草莓、葡萄、水蜜桃、甘蔗等各种经济作物。政府免费平整土地并将各村的土地统一承包给了粮食局再转包给种植大户，统一种经济作物，每亩地每年的承包费是400斤的稻谷，大概是600元不到的样子<del>~不过老百姓也高兴，大部分的地荒着也是荒着，都好几年了，压根没人种，以前我也想说一下这个良田弃耕的问题，在浙江还是蛮严重的，我家还有一点自留地，在土地上种的全是大樟树，反正不用人管，放那儿，长大了再卖给树商，没人买就一直种那儿。哈哈</del>不过良田不种稻还是挺可惜的。<br>我老家在镇区1公里左右的一村子里，有人花35万买我老家房子，没卖（我家还有一老房子。几百年了，文物贩子来我家要拆我老家木雕石雕，笑死我了，也没卖） 现在想想<br>北上广深的房价其实也不是那么夸张了。随便一个农村人卖一卖房子+卖地也能有不少，钱不是，再加上自己挣点，在北上广深凑个首付也不是很难的事。<br>有时候，我也在想老家人的挣钱本领真的是太高了。我们这种上班的DS和他们实在是无法比，近些年也听闻有些人做生意不太顺的，但大部分人也是能够活的不错的。具体的情况是，在外地开浴室的大概1个月能有5万的收入（两夫妻）。卖五金的比这高一点，卖手机有一段时间是很赚钱的（以前1—2年能在杨浦区买一套房），现在亏钱，一年几十万几十万的亏，最近貌似又好了一点，旁边做这些生意的比较多，所以，有所了解，卖五金建材其实有一定风险的，都是三角债，要垫资什么的，头脑手段一定要好，还有就是诚信，他们在羡慕着我们我们在羡慕着他们有钱人得不到的才觉得是最好的。<br>农村有点跟不上时代的，通网线以及网购（主要是快递送货范围太小了）是很不方便的，这点也让人无语。虽然，我老家离镇里不远~。<br>还有介绍一下山区的情况吧。山区的情况越来越不尽如人意了，穷的真的是很穷，电当然是有的，可惜他们有了钱，还在山区建房。我很不理解这种情况，还是觉得应该将他们迁到镇里来，否则，各种扶贫成本实在是太高了。年轻人是很不愿意去山区的，除非是旅游、探险之类的，那边医疗教育各种水平也跟不上，有部分人过的还是蛮艰辛的。<br>水泥路，只要是行政村都有一条，哪怕是山区<del>~~ 习大大在的时候，搞的（或者是习大大后面一位赵搞的）。<br>环境：农村的环境是很糟糕的。虽然，基本每个村都建了公厕，但是，排污的最终去向竟然是天然的水塘，这让我有点接受不了。。。觉得恶心每个村也有管垃圾的清洁工了，定时收垃圾的。水塘真的是</del>小时候游泳摸螺蛳洗衣服洗菜都可以，现在的水塘水都发绿看了很倒胃口的，也有是近几年修路，将很多天然水道截断了，活水变成了死水等原因。<br>我对老家的希望就是早点建杭台温铁路或者绍台铁路，老家一直没铁路，旅游业也发挥不出最大的效力，回家也只能选择自驾或者大巴，还是蛮不方便的，通铁路回家可以多点选择，更主要的是方便，还很快~也能帮助一下还在县里面的父老乡亲们，多一点致富的路。<br>说了这么多，都是些实话，只是淡淡的叙述一下，浙江一个普通落后县的情况，有点乱，大家见谅。我给的信息其实还是蛮多的城市化的大潮是势不可挡乡村的没落已然是现在进行时了。下图是我家乡的一位摄影大师拍的关于家乡的景色欢迎大家来我家乡旅游或者养老也是不错的。<br>十四、乡村见闻<br>几年没回了，今年略将所见写写。<br>1，考学的，基本安家在城市。没上学的，基本从青年到中年在广东浙江打工，老小留守。<br>2，手机电视基本普及，有些家也有了冰箱洗衣机。房屋翻新的不多，大都是旧屋，说明打工基本能养家，但普遍挣钱不多，大多数人没能力翻修新房。<br>3，主要交通工具是摩托，路是土路，能通卡车<br>4，供电比以前好，高压电，没有以前偶尔停电现象了<br>5，土地抛荒严重，种地收割已用机器，比以前用人和牛轻松多了<br>6，村民幸福感强的两件事，一当然是挣钱多，二是生了几个男孩；<br>7，以前做饭是烧禾和煤，现在主要是柴禾，电饭锅，电磁炉；<br>8，赌博很普遍，特别是过年的时候。<br>9，最近几年读书无用论很流行，但大多村民还是觉得上学比不上学好。<br>感想:经济上的进步大都依赖打工，这也意味着很大的风险，如果经济衰退，无工可打，大多数村民的生活水平会急剧下降。<br>十五、回乡见闻——华北某县城<br>中部某欠发达省，资源大县，县城人口六万人。今年煤炭市场不好，所以县城经济受影响，不过超市火爆，饭店火爆，大街上汽车川流不息，小区好汽车越来越多，北京天津牌照的相当多，当地较重视教育，邻居好几个小孩在北京混的都不错，小区不少邻居在北京都买了房子。据亲戚说农村人越来越少，出现了农业合作社。当地公务员年收入只有三四万。<br>十六、回乡见闻——老挖绿教的坑，今天说说我老家基督教的情况<br>春节回到南方老家农村，农村里的青壮年基本都外出打工，只留下老人和小孩。农村地区教堂林立，几乎每村都建，而且资金雄厚，每次都给参加祈祷的老人一定物资奖励，锅、毛巾、米、油之类，小孩去有牛奶糖果，老人小孩都乐意去，有些人因此真信了，过年就不去庙里上香，不放鞭炮。当年香火旺的庙现在冷清破败许多。过年去老舅家拜年，老人一口一句主保佑你地叫，这可是真信啊。<br>帮忙建房子，信教有谁家建房子，号召教友义务帮忙，有的还送水泥钢筋，很有吸引力。帮忙埋死人。村里青壮年外出，老人死了少人料理后事，一般传统葬礼要么潦草了事要么花费巨大，信教的人死了后事教会会出面料理，仪式隆重花费又少，这对老人诱惑极大。这两条都是听来的，可信度极高。<br>这些教会不同以往的教会，因为他们从不去镇上的大教堂礼拜，镇上大礼拜堂同时供奉着耶稣和观音可以烧香来拜（地方特色我小时候就这样），他们不屑。<br>资金雄厚，钱从哪儿来？突然间这么多训练良好的神职人员是谁支持、培训的？<br>政府部门对这种态势完全无视。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313705/vmware安装-centos-添加使用root用户/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313705/vmware安装-centos-添加使用root用户/" itemprop="url">vmware安装-centos-添加使用root用户</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-07T07:05:43+08:00">2014-02-07</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">174</span></span></div></header><div class="post-body" itemprop="articleBody"><p>Vmware简易安装linux系统centos6.4 时，默认只能自己创建一个非root用户（因为root用户默认存在），所以你安装好后，是没法使用root用户登陆的。<br>下面是如何给root用户添加密码。</p><p>1、进入超级用户模式<br>[demo@localhost ~]$ su<br>Password:</p><p>2、添加文件的写权限<br>[root@localhost demo]# chmod u+w /etc/sudoers</p><p>3、编辑/etc/sudoers文件。也就是输入命令”vi /etc/sudoers”,进入编辑模式，找到这一 行：”root ALL=(ALL) ALL”在起下面添加”demo ALL=(ALL) ALL”(这里的demo是你的用户名)，然后保存退出。<br>[root@localhost demo]# vi /etc/sudoers</p><p>4、撤销文件的写权限。<br>[root@localhost demo]# chmod u-w /etc/sudoers</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313703/我装了四年b，才能和你一起聊电影/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313703/我装了四年b，才能和你一起聊电影/" itemprop="url">我装了四年b，才能和你一起聊电影</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-01-18T07:40:17+08:00">2014-01-18</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/转载/" itemprop="url" rel="index"><span itemprop="name">转载</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">2,070</span></span></div></header><div class="post-body" itemprop="articleBody"><p>我刚入学的时候，对电影的认识而非常有限，阅片量排除毛片不到50。<br>那天我在寝室看《大事件》，对面寝室的胖子过来蹭烟，走过我身边的时候很刻意的摇了摇头。</p><p>“怎么？你也看过《大事件》？那个长镜头是不是很碉堡？”我很兴奋的想和他讨论。<br>“你不觉得那个长镜头太做作了吗？杜琪峰的特点是对演员的调度，建议你去看看他的《枪火》，商场的那场戏才叫碉堡。”说完胖子拿起我桌上的烟盒，先是抽了一根，然后又拿了三根。</p><p>我在胖子的建议下看了《枪火》，觉得确实很牛逼。作为自尊心很强的白羊座，我同时看完了杜琪峰所有的电影，以期在和胖子的讨论中不落下风。</p><p>“ 除了《枪火》，《暗战》和《PTU》也很牛逼，《黑社会》更是证明了杜琪峰的老当益壮。”胖子再次来蹭烟的时候，我展开了这个话题。我料定他接下来肯定会说《阿郎的故事》或者《开心鬼撞鬼》这样古董片，等他说起的时候，我只消淡定的吐口烟圈，说句“过多爽”，就能立于不败之地了呢。<br>“ 导演是靠荷尔蒙拍片的，杜琪峰已经不行了，你该看看银河其他人的片子，比如《暗花》《非常突然》，我很看好游达志和游乃海。”<br>我擦，这尼玛不按套路出牌啊， 说的人我从来没听过啊。<br>胖子扔下一脸茫然的我，大大方方的拿走了我五根烟。</p><p>作为自尊心很强的白羊座，我决定恶补香港电影史。于是我打开时光网和豆瓣，把所有评分比较高的电影都看了一遍。为了对付胖子，我决定在下次的对话中提起陈果这个人物，作为一个文艺又小众的导演，聊起陈果的电影实在是装逼的首选。<br>“陈果你怎么看？是不是除了许鞍华之外香港最有人文情怀的导演？” 胖子来蹭烟的时候我这么问到。注意，这里我还提到了许鞍华，以及人文情怀，简直进可攻退可守呢。<br>“《三更2》你看过吗？”胖子故技重施。<br>“ 嗯，陈可辛监制，李碧华编剧，奚仲文艺术指导，杜可风摄影，很豪华的阵容。“ 我故意说得很快，以显示自己对他们的熟络。<br>“ 我是让你注意其中的另外一个导演朴赞郁。香港电影已经死了你知道吗？日本电影和台湾电影都半死不活，只有韩国电影才能代表亚洲的最高水准，而朴赞郁又是韩国电影的翘楚，《共同警备区》知道吗？复仇三部曲知道吗？”<br>胖子说完，一副哀其不幸的样子，当然，这次他拿走了我半盒烟。</p><p>作为自尊心很强的白羊座，我决定恶补亚洲电影史。在这一个学期里，我没日没夜的看电影，甚至撸管的时候看得都是《天边一朵云》（造成的后遗症是我现在看到西瓜就勃起）。就这样，我变成了亚洲电影的专家，出口不离沟口健二和小津，间或加入奉俊昊和金基德，当然马吉德马吉迪这样拗口的名字也烂熟于心，手边更是常放着一本《蛤蟆的油》。谁要跟我聊亚洲电影的未来，我一定先和他谈谈泰国类型片的发展。</p><p>当胖子再次走进我们寝室的时候，我已经做好了击败他的准备，因为只要是网上搜得到的亚洲电影，我都能把故事梗概说出来，而且这次我决定后发制人，等他先开口。<br>胖子似乎知道我一学期的努力，心中有所忌惮，他并没有聊起电影，而是谈起了认同感。<br>“ 当代文化的中心在西方，亚洲永远只能逢迎，这个现状短时间内改变不了。”<br>“ 可黑泽明就很牛逼啊，他的电影影响了好莱坞。”<br>“ 呵呵，好莱坞会被影响吗？不，好莱坞就像一块海绵，吸收各国电影的精华，而亚洲的电影人总是希望得到他们的认同。比如《卧虎藏龙》，这就是拍给好莱坞看的功夫片，真正研究功夫电影的人谁喜欢？哎，世界电影都被好莱坞同化了。从黄金时代开始，这样的格局就注定了——亨利金，比利怀尔德，奥逊威尔斯·，这些才是真正的Master。”<br>胖子特意在结尾说了一个英文，把我衬托的更加窘迫，这次他没有蹭烟，而是问我借了五百块钱，说是在豆瓣的美国电影小组中泡到了几个妹子，要去开房。</p><p>作为自尊心很强的白羊座，我决定也要带妹子去开房，当然，前提是我研究完美国电影。于是在接下来的一个学年里，我购买了迅雷会员，翘掉了所有选修课，把80多年来奥斯卡所有得奖提名的影片都看了一遍。为了考验自己的实力，我还自己和自己玩电影人名的接龙，比如比利怀尔德——德帕尔马——马丁斯科塞斯——斯皮尔伯格——格里菲斯——斯皮尔伯格，如此往复，我可以玩一整个下午。</p><p>一年后，我刚看完《阿凡达》，准备找胖子聊一聊。我大概的思路是从《阿凡达》中的动作捕捉技术谈到《极地特快》，然后提到罗伯特泽米斯基的《谁陷害了兔子罗杰》，接下来就是斯皮尔伯格的《人工智能》以及库布里克的《2001太空漫游》，最后总结出美国电影人在技术和艺术上的崇高追求，当然，聊完之后顺带让他还那五百块钱。</p><p>我来到胖子寝室的时候他正对着电脑屏幕发呆，一脸落寞。看到我来了，问我要了一根烟。<br>“ 你看《阿凡达》了吗？巨牛逼！”<br>“ 今天能别和我提电影吗？”胖子打断了我。<br>” 为什么？”<br>“ 因为哺育整个欧洲的电影诗人——侯麦，去世了。”</p><p>我没有说话，作为自尊心很强的白羊座，我同时也很善良，我不忍心在一个人悲痛的时候让他还钱，更重要的是，我从来没听说过侯麦。<br>接下来的剧情就是重复上面的过程，我开始学习欧洲电影史。因为临近毕业，我没有充足的时间来卧薪藏胆，所以每当我学习完一个大师，就去和胖子交流，但无论如何，胖子总能说到我的软肋。</p><p>比如我问：你看过基耶斯洛夫斯基的《双面维罗妮卡》吗？<br>胖子答：你看过艾米丽杨的《维罗妮卡决定去死》吗？<br>我问：你看过安东尼奥尼的《中国》吗？<br>胖子答：你看过人民出版社的《社会主义中国不容污蔑》吗？</p><p>就这样，在毕业的时候，我仍旧没能要回那五百块钱。<br>直到离校的那天，大家都喝得东倒西歪，我拉住胖子，大发感慨。<br>“ 如果我不是白羊座，大学四年不会那么和你较劲，也不会到现在还是处男。”<br>胖子笑了笑，没有说话，轻车熟路的从我的烟盒里拿出一根烟。<br>“ 你到底看过多少部电影？你不觉得累吗？”<br>我最终还是把自尊心抛之脑后，问出了这个困扰我四年的问题。<br>胖子猛吸了两口烟，又从我烟盒了拿了几根，提起行李，默默的走出了寝室，只留下茫然的我。</p><p>几分钟后，我收到了一条胖子的短信，里面只有七个字——因为我也是白羊座。</p><p>原文：<a href="http://www.douban.com/group/topic/48262743/" target="_blank" rel="noopener">http://www.douban.com/group/topic/48262743/</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313697/linode-vps-安装-longview/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313697/linode-vps-安装-longview/" itemprop="url">linode-vps-安装-longview</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-01-13T05:08:04+08:00">2014-01-13</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">997</span></span></div></header><div class="post-body" itemprop="articleBody"><p>安装教程可以参考官方的说明，你可以使用它提供的自动安装，我试了下没有成功，所以改为手工安装。按照它说的做一般就没有问题的，中间有可能会出现一点问题，仔细看文档就行了。<br><a href="https://library.linode.com/longview#sph_installing-the-client" target="_blank" rel="noopener">https://library.linode.com/longview#sph_installing-the-client</a></p><p>以 Fedora and CentOS 为例子。<br>1、首先通过ssh登陆你的VPS<br>2、创建一个文件，通过以下命令，如果是root用户无需sudo 命令。<br>sudo nano /etc/yum.repos.d/longview.repo<br>3、把以下内容粘贴到 longview.repo 文件中，你可以使用vi编辑器，也可以使用nano编辑器<br>[longview]<br>name=Longview Repo<br>baseurl=<a href="https://yum-longview.linode.com/DIST/REV/noarch/" target="_blank" rel="noopener">https://yum-longview.linode.com/DIST/REV/noarch/</a><br>enabled=1<br>gpgcheck=1</p><p>这里需要注意的就是baseurl=后面的网址，不能随便填，要根据你的系统选择合适的文件，比如centos 6 以上版本的，是 <a href="https://yum-longview.linode.com/centos/6/noarch/repodata/" target="_blank" rel="noopener">https://yum-longview.linode.com/centos/6/noarch/repodata/</a><br>具体的你可以打开 <a href="https://yum-longview.linode.com/" target="_blank" rel="noopener">https://yum-longview.linode.com/</a> 根据里面的内容，寻找相应的目录。</p><p>查看系统版本可以通过 cat /etc/redhat-release</p><p>4、这一步就是保存你的文件了。nono 使用 Control-X, 然后输入 Y. vi 就使用:wq</p><p>下面的就没什么问题，你可以直接按照官方的提示操作</p><ol><li><p>使用以下命令下载linode.key文件到你的系统</p><pre>sudo wget https://yum-longview.linode.com/linode.key</pre></li><li><p>使用以下命令导入key文件</p><pre>sudo rpm --import linode.key</pre></li><li><p>创建存入api的目录</p><pre>sudo mkdir -p /etc/linode/</pre></li><li><p>创建longview.key文件来保存你的api key。api在下面会告诉你怎么得到。</p><pre>sudo nano /etc/linode/longview.key</pre></li><li><p>想得到api key得先登陆 <a href="https://manager.linode.com/" target="_blank" rel="noopener">Linode Manager</a>.</p></li><li>选择一个<strong>Longview</strong> .</li><li>单击 <strong>Add Client</strong>. 然后出提示以下界面<a href="https://library.linode.com/assets/1383-lv_install.png" target="_blank" rel="noopener"><img src="https://library.linode.com/assets/1383-lv_install.png" alt="Manually adding a system to Linode Longview."></a></li><li>点击 <strong>go back</strong> 按键返回到 Linode 管理面板.</li><li>单击 <strong>i</strong> 按键, 图示如下.<a href="https://library.linode.com/assets/1391-lv_overview_swap_i_crop.png" target="_blank" rel="noopener"><img src="https://library.linode.com/assets/1391-lv_overview_swap_i_crop.png" alt="Manually adding a system to Linode Longview."></a></li><li>复制 API key, 图标如下.<a href="https://library.linode.com/assets/1380-lv_api.png" target="_blank" rel="noopener"><img src="https://library.linode.com/assets/1379-lv_api_sm.png" alt="Manually adding a system to Linode Longview."></a></li><li>再返回到终端命令界面, 向 <tt>longview.key</tt> 文件中粘贴你刚复制的API key.</li><li>然后保存，通过命令 <strong>Control-X</strong>, 再按 <strong>Y</strong>.</li><li>通过键入以下命令安装longview:<br><pre>sudo yum install -y linode-longview</pre><br>Congratulations! The Longview client is now installed on your Fedora or CentOS system.</li></ol><p>如果不出问题，就可以成功安装上了。</p><p>安装完之后有一个系统配置。很简单创建一个数据库。然后把数据库的用户名和密码写入<em>/etc/linode/longview.d/MySQL.conf，然后再重启longview</em></p><pre>service longview restart</pre><h2 id="Manual-Configuration-All-Distributions"><a href="#Manual-Configuration-All-Distributions" class="headerlink" title="Manual Configuration (All Distributions)"></a><a href="https://library.linode.com/longview/longview-for-mysql#sph_id7" target="_blank" rel="noopener">Manual Configuration (All Distributions)</a></h2><p>To enable the MySQL Longview app manually, follow these steps on your Linode via SSH:</p><ol><li><p>Create a new MySQL user with minimal privileges for Longview. Run the following queries on your database as the root MySQL user to create the new user:</p><pre>CREATE USER 'linode-longview'@'localhost' IDENTIFIED BY '***************';
flush privileges;</pre></li><li><p>Edit <tt>/etc/linode/longview.d/MySQL.conf</tt> to include the same username and password you just added. It should look like the following:<strong>File:</strong><em>/etc/linode/longview.d/MySQL.conf</em></p><div><br><pre>#username root<br>#password example_password<br>username linode-longview<br>password <strong><strong><strong>***</strong></strong></strong></pre><br></div></li><li><p>Restart Longview:</p><pre>service longview restart</pre></li><li><p>Refresh the Longview MySQL tab in the Linode Manager.<br>You should now be able to see Longview data for MySQL. If that’s not the case, proceed to the <a href="https://library.linode.com/longview/longview-for-mysql#sph_id3" target="_blank" rel="noopener">Troubleshooting</a> section at the end of this article.</p></li></ol><p>安装成功后，如果后台提示你的时间有问题，按以下操作安装ntp时间同步服务：</p><pre class="lang:sh decode:true">yum install ntp
service ntpd start
chkconfig ntpd on</pre><p>关于lnmp的一些问题</p><p>因为我服务器使用的是lnmp.org上的 lnmp。 有些小问题需要解决，一个就是 apache状态获取不了，因为显示403.<br>解决办法可以看这个。<br><a href="http://bbs.vpser.net/thread-2858-1-6.html" target="_blank" rel="noopener">http://bbs.vpser.net/thread-2858-1-6.html</a><br>如果没有安装lynx 选安装它</p><pre class="lang:default decode:true">yum install lynx -y</pre><p>然后修改 vi /usr/local/apache/conf/extra/httpd-info.conf 把</p><pre class="lang:default decode:true">&lt;Location /server-status&gt;
    SetHandler server-status
    Order deny,allow
    Deny from all
    Allow from .example.com
&lt;/Location&gt;</pre> 改为<pre class="lang:default decode:true">&lt;Location /server-status&gt;
    SetHandler server-status
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
&lt;/Location&gt;</pre> 然后重启apache<pre class="lang:default decode:true">service httpd restart</pre><p>以上可以解决apache问题。<br>还有一个问题就是nginx状态获取不到。<br>修改 longview的一些配置即可， vi /etc/linode/longview.d/Nginx.conf<br>把里面的nginx_status，改为 status即可。<br>然后重启你的longview.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://love4026.org/313694/centos-ssh无密码登入linux设置/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray Chang"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/313694/centos-ssh无密码登入linux设置/" itemprop="url">centos-ssh无密码登入linux设置</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-01-13T04:47:39+08:00">2014-01-13</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">328</span></span></div></header><div class="post-body" itemprop="articleBody"><p>测试的是linode的VPS</p><p>1、在本机创建密钥</p><pre class="lang:sh decode:true">[root@localhost ~]# ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /root/.ssh/id_rsa.
Your public key has been saved in /root/.ssh/id_rsa.pub.
The key fingerprint is:
*****
</pre><p>2、复制公密到服务器,先使用cd /root/.ssh/进入 .ssh目录</p><pre class="lang:sh decode:true">[root@localhost .ssh]# scp id_rsa.pub root@50.126.53.22:/root/.ssh/1.192.121.77
root@50.126.53.22's password: 
id_rsa.pub                                    100%  408     0.4KB/s   00:00  </pre><p>3、上一步上传完成后，在服务器的/root/.ssh/目录下，会多一个文件1.192.121.77,登陆服务器，cd /root/.ssh/然后添加公密到服务器的的信任区域</p><pre class="lang:sh decode:true">[root@li482-108 .ssh]# cat 1.192.121.77 &gt;&gt; authorized_keys</pre><p>备注： 2，3两步可由命令ssh-copy-id一步到位</p><pre class="lang:default decode:true">[root@localhost .ssh]# ssh-copy-id root@50.126.53.22
Password:
Now try logging into the machine, with "ssh 'root@50.126.53.22'", and check in:

  .ssh/authorized_keys

to make sure we haven't added extra keys that you weren't expecting.
</pre><p>至此已经完成了所有配置，现在你再使用 ssh <a href="mailto:root@50.126.53.22" target="_blank" rel="noopener">root@50.126.53.22</a> 应该就不需要密码了。</p><p>如果ssh 50.126.53.22返回 Agent admitted failure to sign using the key<br>ps -Af|grep agent查看有无ssh-agent有无运行，若没有</p><pre class="lang:sh decode:true">[root@localhost .ssh]# ssh-agent</pre><p>添加id_rsa到ssh-agent</p><pre class="lang:sh decode:true">[root@localhost .ssh]# ssh-add id_rsa</pre></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"><a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a> <a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/39/">39</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/logo.png" alt="Ray Chang"><p class="site-author-name" itemprop="name">Ray Chang</p><p class="site-description motion-element" itemprop="description">Think Difficulty</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">386</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">13</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">171</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/sbmzhcn" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://twitter.com/love4026/" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span><span class="links-of-author-item"><a href="https://plus.google.com/u/0/106618658391372851068" target="_blank" title="Google Plus"><i class="fa fa-fw fa-google"></i> Google Plus</a></span><span class="links-of-author-item"><a href="https://www.facebook.com/love4026" target="_blank" title="Facebook"><i class="fa fa-fw fa-facebook"></i> Facebook</a></span><span class="links-of-author-item"><a href="https://www.v2ex.com/member/sbmzhcn" target="_blank" title="V2EX"><i class="fa fa-fw fa-globe"></i> V2EX</a></span><span class="links-of-author-item"><a href="mailto:love4026@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" class="cc-opacity" target="_blank"><img src="/images/cc-by-nc-nd.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="http://www.lanthy.com/" title="蓝悉" target="_blank">蓝悉</a></li><li class="links-of-blogroll-item"> <a href="http://www.shibang-china.com/" title="世邦中文" target="_blank">世邦中文</a></li><li class="links-of-blogroll-item"> <a href="http://www.sbmchina.com/" title="世邦英文" target="_blank">世邦英文</a></li><li class="links-of-blogroll-item"> <a href="http://www.kamychina.com/" title="科煤机电" target="_blank">科煤机电</a></li></ul></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">Copyright &copy; <span itemprop="copyrightYear">2018</span><span class="with-love" id="heart"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Chang. Allrights reserved.</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4, modified by Ray Chang.</div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> 本站访客数<span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人次</span><span class="site-pv"><i class="fa fa-eye"></i> 本站总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css"><script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script></body></html>