<!DOCTYPE html><html class="theme-next pisces" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/logo.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=5.1.4"><link rel="mask-icon" href="/logo.png?v=5.1.4" color="#222"><meta name="keywords" content="Google SEO, 互联网营销, 工业品营销, 矿山机械"><link rel="alternate" href="/atom.xml" title="Ray's Blog" type="application/atom+xml"><meta name="description" content="Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销"><meta property="og:type" content="website"><meta property="og:title" content="Ray&#39;s Blog"><meta property="og:url" content="https://www.love4026.org/index.html"><meta property="og:site_name" content="Ray&#39;s Blog"><meta property="og:description" content="Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销"><meta property="og:locale" content="zh-Hans"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Ray&#39;s Blog"><meta name="twitter:description" content="Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"ICJR9PAGXV",apiKey:"bc2584b59e34f42a84707067e8cef8a5",indexName:"love4026.org",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://www.love4026.org/"><title>Google SEO|互联网营销|工业品营销|矿山机械电子商务|B2B、SEM、社交、EDM邮件营销、市场营销 - Ray's Blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Ray's Blog</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Google SEO|互联网营销|工业矿山机械</h1></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-友情链接"><a href="/links/" rel="section"><i class="menu-item-icon fa fa-fw fa-link"></i><br> 友情链接</a></li><li class="menu-item menu-item-chrome扩展（域名所属人）"><a href="/serp-analyzer/" rel="section"><i class="menu-item-icon fa fa-fw fa-link"></i><br> Chrome扩展（域名所属人）</a></li><li class="menu-item menu-item-外贸留言板系统"><a href="/20180615/google-seo-inquiry-messageboard/" rel="section"><i class="menu-item-icon fa fa-fw fa-link"></i><br> 外贸留言板系统</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="algolia-popup popup search-popup"><div class="algolia-search"><div class="algolia-search-input-icon"><i class="fa fa-search"></i></div><div class="algolia-search-input" id="algolia-search-input"></div></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div id="algolia-pagination" class="algolia-pagination"></div></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/20180830/goodbye-jquery/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/20180830/goodbye-jquery/" itemprop="url">[转载]再见JQuery，我的老朋友</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-30T11:56:30+08:00">2018-08-30</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/20180830/goodbye-jquery/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/20180830/goodbye-jquery/" itemprop="commentCount"></span></a></span> <span id="/20180830/goodbye-jquery/" class="leancloud_visitors" data-flag-title="[转载]再见JQuery，我的老朋友"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">2,879</span></span></div></header><div class="post-body" itemprop="articleBody"><p>目前来说，随着html5的兴起，大部分网站已经可以抛弃jQuery了，但仍有部分行业是离不开它的，主要为了兼容IE浏览器，有很多的jQuery插件也导致它不太可能立即消失。</p><p>但对于大部分网站来说，不使用jQuery一样可以做到同样的效果，原生的JS目前已经可以和jQuery一样方便了。</p><p>我09年接触jQuery到现在也差不多快10年了，看着前端日新月异的变化，中间也错失了很多，在这缤纷变化的世界里，有时一旦不愿意接受变化，就会慢慢的被淘汰。很多3-5年的技术人员，还是一直用着jQuery，对于新的技术没有积极去学习尝试，导致离主流技术越来越远，自己的竞争力也在下降。</p><p>最近看到一篇关于jQuery的文章，jQuery的确过时了，虽然一时也不会死掉，但我们要看到这种趋势。</p><h3 id="Polyfill-io"><a href="#Polyfill-io" class="headerlink" title="Polyfill.io"></a>Polyfill.io</h3><p><strong>自动化的 JavaScript Polyfill 服务</strong></p><p>Polyfill 可以为旧浏览器提供和标准 API 一样的功能。比如你想要 IE 浏览器实现 Promise 和 fetch 功能，你需要手动引入 es6-promise、whatwg-fetch。而通过 Polyfill.io，你只需要引入一个 JS 文件。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.polyfill.io/v2/polyfill.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Polyfill.io 通过分析请求头信息中的 UserAgent 实现自动加载浏览器所需的 polyfills。</p><p>Polyfill.io 有一份默认功能列表，包括了最常见的 polyfills：document.querySelector、Element.classList、ES5 新增的 Array 方法、Date.now、ES6 中的 Object.assign、Promise 等。</p><p>你也可以通过传递 features 参数来自定义功能列表：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 加载 Promise&amp;fetch --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.polyfill.io/v2/polyfill.min.js?features=Promise,fetch"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 加载所有 ES5&amp;ES6 新特性 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.polyfill.io/v2/polyfill.min.js?features=es5,es6"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Polyfill.io 还提供了其他 API，具体请查阅官方文档：</p><p>以下是原文：</p><pre><code>免责声明
本文是仓促之作，从构思到成文不足半天。文中没有提到很多优秀的库和框架，提前在此致歉，因为没时间搜集整理。但这不代表笔者对这些库和框架没有敬意。实际上，包括jQuery在内，我的敬意是给这些名字背后整个社区和贡献者的，当然包括库和框架的最初编写者，比如John Resig。
另外，时间所限，本文粗略、不严谨，甚至可能不客观地描绘了前端技术的发展脉络。对前端发展走向的这个判断，仅代表本人自己的主观认知，并非业界共识，恳请广大读者了解。千万不要以本文观点作为评价前端技术发展的依据。谢谢！

作者：奇舞周刊
链接：https://juejin.im/post/5b5af8565188251b186bcfcb
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
</code></pre><h3 id="Github抛弃jQuery"><a href="#Github抛弃jQuery" class="headerlink" title="Github抛弃jQuery"></a>Github抛弃jQuery</h3><p>2018年7月25日，Mislav Marohnić发了一条推文，宣布GitHub.com前端已经彻底删除了jQuery（下图）。而且，还自问自答地解释（低调炫耀），删除jQuery之后也没用其他框架，而是全部依赖原生API。</p><p>很多人不知道，我和jQuery颇有渊源。大概11年前（2007年），因为“疯狂迷恋”jQuery，我在国内率先翻译了jQuery 1.1的文档。后来有同好基于我翻译的版本继续翻译了jQuery新版文档，还不忘记在“关于”中提到我（<a href="http://hemin.cn/jq/about.html）：" target="_blank" rel="noopener">http://hemin.cn/jq/about.html）：</a></p><p>居然称我为“国内jQuery的引路人”，惭愧。但在当时jQuery文档奇缺的情况下，我翻译的中文版应该是帮到了不少同学的。后来，我还翻译了Learning jQuery（《jQuery基础教程》）。<br>正因与jQuery的这个不解之缘，GitHub.com彻底抛弃jQuery的消息才触动我想了一些事。于是，决定写这篇小文，以飨读者（但愿有用，哈哈）。</p><h3 id="jQuery的辉煌"><a href="#jQuery的辉煌" class="headerlink" title="jQuery的辉煌"></a>jQuery的辉煌</h3><p>jQuery最初诞生于2006年8月，作者是John Resig（<a href="https://zh.wikipedia.org/wiki/JQuery）。10多年前，网页开发者（当时还没有“前端”这个概念）深受浏览器不兼容性之苦。以jQuery为代表的一批JavaScript库/框架应运而生：" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/JQuery）。10多年前，网页开发者（当时还没有“前端”这个概念）深受浏览器不兼容性之苦。以jQuery为代表的一批JavaScript库/框架应运而生：</a></p><ul><li>Dojo</li><li>jQuery</li><li>MooTools</li><li>Prototype</li><li>Yahoo! User Interface Library (YUI)</li><li>Script.aculo.us</li></ul><p>这些库有的像jQuery一样是主打通用性，比如Dojo、Prototype；有的则走更专业化的路线，比如YUI（组件化）和Script.aculo.us（动画交互）。从通用功能看，这些库大都提供了如下特性：</p><ul><li>语法糖：链式调用、实用函数</li><li>选择元素：基于各种标准选择符和库自定义的选择符，以及通过回调进行筛选</li><li>操作DOM：创建和操作元素，乃至各种属性操作</li><li>处理事件：ready事件及各种注册和触发事件的方法，乃至委托</li><li>动画：基于animate的CSS属性动画，以及内置动画方法</li><li>Ajax：封装原生的XMLHttpRequest API，简化请求方法及回调处理</li></ul><p>一批宣传和推广这些库和框架的书籍相继面世，迅速推动了这些库的采用。2010年出版的DOM Scripting, 2nd（《JavaScript DOM脚本编程艺术（第2版）》）就是其中之一。这本书专门有一个附录，介绍当时流行的库，主推jQuery。</p><p>当时jQuery官网的自我描述是这样的：</p><p> “a fast and concise JavaScript Library that simplifies HTML document traversing, event handling, animating, and Ajax interactions for rapid web development. jQuery is designed to change the way that you write JavaScript.”</p><p>不错，正是这样。jQuery凭借其选择器方法、面向集合的链式调用、对事件和Ajax的完善支持、简单而强大的动效等独有优势，迅速风靡，成为几乎所有网站开发必备的JavaScript库，乃至开创了jQuery编程风格。</p><p>开发者选择jQuery的理由简单直接：</p><ul><li>跨浏览器</li><li>简单高效</li><li>稳定可靠</li><li>插件丰富</li></ul><p>2011年新版的“犀牛书”第6版——JavaScript: The Definitive Guide, 6th甚至拿出第19章整整64页篇幅隆重讲解了jQuery（“Chapter 19. The jQuery Library”）。</p><p>jQuery从此走向鼎盛和辉煌。后来，随着前端交互越来越重和移动应用的普及，jQuery UI、jQuery Mobile相继面世。</p><p>时至今日，jQuery仍然在支撑着数以千万计各种规模网站的运作——尽管聚光灯下已经不常看到她的身影。</p><h3 id="历史的选择"><a href="#历史的选择" class="headerlink" title="历史的选择"></a>历史的选择</h3><p>最近10年，是“前端行业”有史以来发展最快的10年。</p><p>移动社交时代的到来不仅没有让桌面Web失色，反倒刺激了Web标准的迅猛改进。HTML5不仅带来了极大的向后兼容性，也带来了更丰富的原生DOM API。CSS从CSS3开始走上模块化的快车道，文本样式、排版布局、媒体查询，各种新模块让人目不暇接。</p><p>各大主流浏览器也在快速跟进，Firefox、Chrome、Opera、Safari、IE乃至Edge，都在积极重构甚至重写内核，争做支持Web标准的“楷模”。在这个大背景下，各大互联网公司不断调高兼容的IE版本号，从8到9到10，再到11。</p><p>当然，还有ECMAScript语言标准。自从划时代的ES6（ECMAScript 2015）发布之后，JavaScript终于真正开始摆脱“玩具”语言的尴尬境地。更重要的，从ES6起，ECMAScript也进入了快速迭代、每年发一版的节奏。ES7、ES8，以及ES9，每次都会给这门语言注入更强大的语言特性。</p><p>与此同时，Node.js和Babel等服务端运行时及转译工具的出现，也让前端工程化，以及向传统工业级软件开发最佳实践靠拢的速度日益加快。</p><p>2012年，笔者在图灵社区翻译过一篇文章“JavaScript宝座：七大框架论剑”（<a href="http://www.ituring.com.cn/article/8108）。当时的“七大框架”是：" target="_blank" rel="noopener">http://www.ituring.com.cn/article/8108）。当时的“七大框架”是：</a></p><ul><li>Backbone</li><li>Knockout</li><li>Spine</li><li>CanJS</li><li>Ember</li><li>AngularJS</li><li>Batman</li><li>Meteor</li></ul><p>后来，谷歌主打SPA（Single Page Application，单页应用）的Angular终于一枝独秀。不久，脸书推出的“在JS里写HTML一样优雅”的React则一路高歌猛进。最终，集各家所长且简单易用的Vue横空出世。</p><p>前端开发已经从后“刀耕火种”时代的“农业文明”，逐渐进化为以大规模、可扩展、规范化、自动化为特征的准“工业文明”。<br>俗话说：“皮之不存，毛将焉附。”随着时代变迁、技术进步，jQuery赖以存在的环境正逐渐消失。如前所述，新的环境催生了一批框架新秀。曾经辉煌的jQuery终于走到了可以华丽谢幕的时刻。</p><h3 id="几句忠告"><a href="#几句忠告" class="headerlink" title="几句忠告"></a>几句忠告</h3><p>8年前，DOM Scripting, 2nd在推荐开发者使用前端库时，语重心长地说过下面这段话：</p><p> “开发中使用库当然没问题，但前提是不要仅仅只知道怎么使用，更要知道它的工作原理。如果不能超越这些库，那在这些库变成你的拐杖之时，你也会随之“残废”。在使用某个库之前，一定要花时间学习掌握JavaScript和DOM。我们从一开头就强调“知其所以然”的重要性，告诉大家不能满足于仅仅“知其然”。如果使用了库，却不晓得其背后原理，无论对自己还是对产品都将是有害的。”</p><p>2012年，从后端转前端不久的Ray Nicholus接手了一个跨浏览器文件上传库（<a href="https://github.com/FineUploader）的维护和开发工作。他的第一反应就是用jQuery重写这个库。然而，用户反对引入任何对其他库的依赖。结果他只能使用原生浏览器的API。那又怎样呢？他发现，原来放弃jQuery的写法比自己想象的要容易。" target="_blank" rel="noopener">https://github.com/FineUploader）的维护和开发工作。他的第一反应就是用jQuery重写这个库。然而，用户反对引入任何对其他库的依赖。结果他只能使用原生浏览器的API。那又怎样呢？他发现，原来放弃jQuery的写法比自己想象的要容易。</a></p><p>2014年，Ray发表了：“You Don’t Need jQuery!”系列博客（<a href="https://blog.garstasio.com/you-dont-need-jquery/）。2016年，他的著作Beyond" target="_blank" rel="noopener">https://blog.garstasio.com/you-dont-need-jquery/）。2016年，他的著作Beyond</a> jQuery （Apress，<a href="https://www.amazon.com/dp/1484222342/）出版。Ray建议，学习前端开发，本来应该是这个顺序：" target="_blank" rel="noopener">https://www.amazon.com/dp/1484222342/）出版。Ray建议，学习前端开发，本来应该是这个顺序：</a></p><ol><li>学习JavaScript</li><li>学习Web API</li><li>学习jQuery（或其他框架/库）</li></ol><p>但很多人实际上是从#3开始的，然后过了很久才开始#1和#2（甚至从来没想过#1和#2）。结果就是“只知其然，而不知其所以然”。</p><p>如今，时移世易，jQuery即将谢幕，新一代组件化开发框架粉墨登场。然而，“太阳底下没有新鲜事。”不管是使用Angular，还是React，抑或是Vue，还是要真正理解它们背后的工作原理。<br>（为避免广告嫌疑，我在这里就不着重推荐360导航前端的刘博文同学即将出版的《深入浅出Vue.js》一书了，哈哈哈～～，因为没有封面可以展示。）</p><h3 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h3><p>jQuery作为第一代前端库的优秀代表，成就了今天Web的繁荣，也成就了一代Web开发者。作为“国内jQuery的引路人”（这个帽子是别人给的，我借用一下，哈哈），我个人对jQuery的感情是复杂的。既不希望它离开，又希望它早点离开。我想，这应该也是很多早期接触jQuery的前端开发者的心声吧。</p><p>作者：奇舞周刊<br>链接：<a href="https://juejin.im/post/5b5af8565188251b186bcfcb" target="_blank" rel="noopener">https://juejin.im/post/5b5af8565188251b186bcfcb</a><br>来源：掘金<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/20180731/javascript-hoisting/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/20180731/javascript-hoisting/" itemprop="url">Javascript Hoisting 变量提升</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-31T09:54:32+08:00">2018-07-31</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/20180731/javascript-hoisting/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/20180731/javascript-hoisting/" itemprop="commentCount"></span></a></span> <span id="/20180731/javascript-hoisting/" class="leancloud_visitors" data-flag-title="Javascript Hoisting 变量提升"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">476</span></span></div></header><div class="post-body" itemprop="articleBody"><p>函数和变量的声明总是会被解析器悄悄地被“提升”到方法体的最顶部</p><p>上面是javascript变量提升的概念。为了更好地理解“变量提升”，我们先来看一段代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(foo);</span><br><span class="line">    <span class="keyword">var</span> foo = <span class="string">"Javascript"</span>;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>控制台输出：undefined 为什么输出了undefined，而没有报错呢？</p><p>原来javascript是函数作用域，解析器会在函数开头处自动去声明局部变量，局部变量都会被放在函数的入口处定义，所以上面的代码实际会被解释成：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"> 	<span class="keyword">var</span> foo;</span><br><span class="line">    <span class="built_in">console</span>.log(foo);</span><br><span class="line">    foo = <span class="string">"Javascript"</span>;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>另外，需要注意Javascript中函数的两种声明方式存在的坑：</p><p>function fn(){} //函数声明式<br>var fn = function(){}; //函数表达式<br>对于函数声明式，解析器会确保在所有代码执行之前声明已经被解析。而对于函数表达式，与定义其它基本类型变量一样，逐句执行并解析。</p><p>我们再来举个例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 函数声明式 */</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	fn();</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'来自函数声明式fn'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 函数表达式 */</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	fn();</span><br><span class="line">	<span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'来自函数表达式fn'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>控制台依次输出：</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">来自函数声明式fn</span><br><span class="line">fn is <span class="keyword">not</span> <span class="keyword">a</span> <span class="function"><span class="keyword">function</span></span></span><br></pre></td></tr></table></figure><p>可以看到，当使用函数声明的形式来定义函数时，可将调用语句写在函数声明之前，而后者，则会报错。</p><p>所以在Javascript中，变量的声明会被提升，而变量的赋值则不会。而函数的声明与变量的声明是不一样的，函数的函数体也会被一起提升，但请使用函数声明的形式才能提升。</p><p>原文: <a href="http://liaokeyu.com/%E6%8A%80%E6%9C%AF/2016/10/18/javascript_hoisting_%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87.html" target="_blank" rel="noopener">http://liaokeyu.com/%E6%8A%80%E6%9C%AF/2016/10/18/javascript_hoisting_%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87.html</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/20180730/javascript-closures/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/20180730/javascript-closures/" itemprop="url">JavaScript中的匿名函数、闭包</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-30T12:31:07+08:00">2018-07-30</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/20180730/javascript-closures/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/20180730/javascript-closures/" itemprop="commentCount"></span></a></span> <span id="/20180730/javascript-closures/" class="leancloud_visitors" data-flag-title="JavaScript中的匿名函数、闭包"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">1,046</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p>匿名函数：就是没有函数名的函数。</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通函数 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">box</span><span class="params">()</span> </span>&#123;               <span class="comment">//函数名是 box </span></span><br><span class="line">       <span class="keyword">return</span><span class="string">'Lee'</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//匿名函数</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;               <span class="comment">//匿名函数，会报错</span></span><br><span class="line">     <span class="keyword">return</span><span class="string">'Lee'</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过表达式自我执行</span></span><br><span class="line"> (functionbox() &#123;            <span class="comment">//封装成表达式</span></span><br><span class="line">        alert(<span class="string">'Lee'</span>); </span><br><span class="line">&#125;)();                  <span class="comment">//()表示执行函数，并且传参</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//把匿名函数赋值给变量 </span></span><br><span class="line"><span class="keyword">var</span> box=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;            <span class="comment">//将匿名函数赋给变量 </span></span><br><span class="line">       <span class="keyword">return</span><span class="string">'Lee'</span>; </span><br><span class="line">&#125;;</span><br><span class="line"> alert(box());            <span class="comment">//调用方式和函数调用相似</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//函数里的匿名函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">box</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;                  <span class="comment">//函数里的匿名函数，产生闭包 </span></span><br><span class="line">        <span class="keyword">return</span><span class="string">'Lee'</span>;</span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line">alert(box()());               <span class="comment">//调用匿名函数</span></span><br></pre></td></tr></table></figure><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>闭包的英文单词是closure，这是JavaScript中非常重要的一部分知识，因为使用闭包可以大大减少我们的代码量，使我们的代码看上去更加清晰等等，总之功能十分强大。</p><p>闭包的含义：闭包说白了就是函数的嵌套，内层的函数可以使用外层函数的所有变量，即使外层函数已经执行完毕（这点涉及JavaScript作用域链）。</p><p>使用闭包有一个优点，也是它的缺点：就是可以把局部变量驻留在内存中，可以避免使用全局变量。</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> name=<span class="string">'sun'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span>&#123;     <span class="comment">//通过匿名函数返回 a() 局部变量 </span></span><br><span class="line">        <span class="keyword">return</span> name; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br><span class="line">alert(a()());         <span class="comment">//通过a()()来直接调用匿名函数返回值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b=a();</span><br><span class="line">alert(b());          <span class="comment">//另一种调用匿名函数返回值</span></span><br></pre></td></tr></table></figure><p>匿名函数最大的用途是创建闭包（这是JavaScript语言的特性之一），并且还可以构建命名空间，以减少全局变量的使用。</p><h2 id="闭包的经典案例"><a href="#闭包的经典案例" class="headerlink" title="闭包的经典案例"></a>闭包的经典案例</h2><p>通过全局变量来累加</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num=<span class="number">0</span>;     <span class="comment">//全局变量 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">()</span></span>&#123;</span><br><span class="line">  num++;               <span class="comment">//模块级可以调用全局变量，进行累加</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a();   <span class="comment">//1</span></span><br><span class="line">a();   <span class="comment">//2           //执行函数，累加了 </span></span><br><span class="line">alert(num);      <span class="comment">//输出全局变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num=<span class="number">0</span>;</span><br><span class="line">    num++;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">alert(a());         <span class="comment">//1</span></span><br><span class="line">alert(a());        <span class="comment">//1               //无法实现累加，因为局部变量又被初始化了</span></span><br></pre></td></tr></table></figure><p>每次调用，变量num都会被初始化，所以每次调用都会返回1而不是累加。我们可以用普通函数内部嵌套匿名函数，形成一个闭包来使变量驻留在内存中。</p><p>使用闭包进行累加</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">        num++;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b=a();      <span class="comment">//获得函数 </span></span><br><span class="line"></span><br><span class="line">alert(b());  <span class="comment">//1     //调用匿名函数 </span></span><br><span class="line">alert(b());  <span class="comment">//2      //第二次调用匿名函数，实现累加</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong> 闭包允许内层函数引用父函数中的变量，但是该变量是最终值</p><p>看下面的例子</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> * <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"> *     <span class="tag">&lt;<span class="name">li</span>&gt;</span>one<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> *     <span class="tag">&lt;<span class="name">li</span>&gt;</span>two<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> *     <span class="tag">&lt;<span class="name">li</span>&gt;</span>three<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> *     <span class="tag">&lt;<span class="name">li</span>&gt;</span>one<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> * <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">var lists = document.getElementsByTagName('li');</span><br><span class="line">for(var i = 0 , len = lists.length ; i <span class="tag">&lt; <span class="attr">len</span> ; <span class="attr">i</span>++)&#123;</span></span><br><span class="line"><span class="tag">    <span class="attr">lists</span>[<span class="attr">i</span>]<span class="attr">.onmouseover</span> = <span class="string">function()&#123;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">alert</span>(<span class="attr">i</span>);    </span></span><br><span class="line"><span class="tag">    &#125;;</span></span><br><span class="line"><span class="tag">&#125;</span></span><br></pre></td></tr></table></figure><p>你会发现当鼠标移过每一个</p><li>元素时，总是弹出4，而不是我们期待的元素下标。这是为什么呢？</li><p></p><p><strong>注意事项里已经讲了（最终值）。</strong></p><p>显然这种解释过于简单，当mouseover事件调用监听函数时，首先在匿名函数<code>(function(){ alert(i); })</code> 内部查找是否定义了 i，结果是没有定义；因此它会向上查找，查找结果是已经定义了，并且i的值是4（循环后的i值）；所以，最终每次弹出的都是4。</p><h3 id="解决方案一"><a href="#解决方案一" class="headerlink" title="解决方案一"></a>解决方案一</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lists = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'li'</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> , len = lists.length ; i &lt; len ; i++)&#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</span><br><span class="line">        lists[index].onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            alert(index);    </span><br><span class="line">        &#125;;                    </span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="解决方案二"><a href="#解决方案二" class="headerlink" title="解决方案二"></a>解决方案二</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lists = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'li'</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, len = lists.length; i &lt; len; i++)&#123;</span><br><span class="line">    lists[i].$$index = i;    <span class="comment">//通过在Dom元素上绑定$$index属性记录下标</span></span><br><span class="line">    lists[i].onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.$$index);    </span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="解决方案三"><a href="#解决方案三" class="headerlink" title="解决方案三"></a>解决方案三</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eventListener</span><span class="params">(list, index)</span>&#123;</span></span><br><span class="line">    list.onmouseover = <span class="function"><span class="keyword">function</span><span class="params">()</span>&#123;</span></span><br><span class="line">        alert(index);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">var lists = document.getElementsByTagName(<span class="string">'li'</span>);</span><br><span class="line"><span class="keyword">for</span>(var <span class="built_in">i</span> = <span class="number">0</span> , len = lists.<span class="built_in">length</span> ; <span class="built_in">i</span> &lt; len ; <span class="built_in">i</span>++)&#123;</span><br><span class="line">    eventListener(lists[i] , i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/20180615/google-seo-inquiry-messageboard/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/20180615/google-seo-inquiry-messageboard/" itemprop="url">适用企业外贸推广的留言板询盘管理系统</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-15T14:50:01+08:00">2018-06-15</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/外贸推广/" itemprop="url" rel="index"><span itemprop="name">外贸推广</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/20180615/google-seo-inquiry-messageboard/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/20180615/google-seo-inquiry-messageboard/" itemprop="commentCount"></span></a></span> <span id="/20180615/google-seo-inquiry-messageboard/" class="leancloud_visitors" data-flag-title="适用企业外贸推广的留言板询盘管理系统"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">570</span></span></div></header><div class="post-body" itemprop="articleBody"><p>外贸营销留言板程序开源了！</p><p>Github 地址：</p><p><a href="https://github.com/sbmzhcn/inquiry" target="_blank" rel="noopener">https://github.com/sbmzhcn/inquiry</a></p><hr><p>一个简单的留言板程序，在外贸网站运行测试多年没有任何问题。如果你的公司没有留言板程序，或者现在需要去找一个简单的留言板程序，这个很适合你。</p><p>本人之前在矿山机械行业工作，给公司开发过留言板程序并且运行多年。 这几天我重新写了一个留言板程序，希望可以帮助广大做外贸的同行们。</p><p><strong>特点：</strong></p><ol><li>自动过滤垃圾留言信息</li><li>语言翻译功能集成</li><li>一键复制留言信息</li></ol><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol><li>把文件上传到服务器根目录</li><li>然后打开install.php, 例如： <a href="http://www.yourdomain.com/install.php" target="_blank" rel="noopener">http://www.yourdomain.com/install.php</a></li><li>安装完毕会在content目录下生成一个数据库</li></ol><h2 id="表单字段说明"><a href="#表单字段说明" class="headerlink" title="表单字段说明"></a>表单字段说明</h2><p>具体的字段设置你可以在系统根目录下的updata.php里查看。</p><p>姓名与邮箱是必填的，其它都是非必须的。</p><p>submit.html有一个示例文件</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="attribute">type</span>=<span class="string">"hidden"</span> <span class="attribute">name</span>=<span class="string">"from_company"</span> <span class="attribute">value</span>=<span class="string">"YourName"</span> /&gt;这个隐藏字段代表网站属于哪个牌子。</span><br><span class="line">&lt;input <span class="attribute">type</span>=<span class="string">"hidden"</span> <span class="attribute">name</span>=<span class="string">"referer"</span> <span class="attribute">value</span>=<span class="string">"http://www.youwantedsite.com"</span> /&gt;这个隐藏字段代表你强制把referer改为某个网站。</span><br></pre></td></tr></table></figure><p>字段：</p><p><code>name</code> <code>email</code> <code>title</code> <code>content</code> <code>country</code> <code>phone</code> <code>address</code> <code>from_company</code></p><h3 id="config-php-配置文件"><a href="#config-php-配置文件" class="headerlink" title="config.php 配置文件"></a>config.php 配置文件</h3><p>下面是config里的内容。请修改DB_NAME,务必要以.php结尾，防止下载。BING_TRANSLATE_KEY Bing的翻译API，可以去注册一个。Akismet_API_Key 反垃圾服务，wordpress的反垃圾插件就是用它。根据此系统的域名，注册一个。有问题，再联系我，上次调试是没问题的。QQ:75504026</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//database name</span></span><br><span class="line">define(<span class="string">'DB_NAME'</span>,<span class="string">'#inquiry_system.sqlite.php'</span>);</span><br><span class="line"><span class="comment">//database prefix</span></span><br><span class="line">define(<span class="string">'DB_PREFIX'</span>,<span class="string">'wp'</span>);</span><br><span class="line"><span class="comment">//bing translate api key</span></span><br><span class="line"><span class="comment">//define('ACCOUNT_KEY', 'nujIh3e7l8Xs8CkP44xTHwu4Gaw0vV1xzaSgXZy');  已废弃</span></span><br><span class="line">define(<span class="string">'BING_TRANSLATE_KEY'</span>, <span class="string">'7724d07b364645asdfds8ca7dfsds49624'</span>);</span><br><span class="line"><span class="comment">//Akismet API Key</span></span><br><span class="line">define(<span class="string">'Akismet_API_Key'</span>,<span class="string">'aaa7ab1s1df6e9'</span>);</span><br><span class="line"><span class="comment">//system root</span></span><br><span class="line">define(<span class="string">'BLOG_ROOT'</span>,dirname(<span class="keyword">__FILE__</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="软件截图"><a href="#软件截图" class="headerlink" title="软件截图"></a>软件截图</h2><p><img src="https://github.com/sbmzhcn/inquiry/blob/master/docs/inquiry-screen01.png?raw=true" alt=""></p><p><img src="https://github.com/sbmzhcn/inquiry/blob/master/docs/inquiry-screen02.png?raw=true" alt=""></p><p><img src="https://github.com/sbmzhcn/inquiry/blob/master/docs/inquiry-screen03.png?raw=true" alt=""></p><h2 id="联系我"><a href="#联系我" class="headerlink" title="联系我"></a>联系我</h2><p>QQ: 75504026</p><p>Email: <a href="mailto:love4026@gmail.com" target="_blank" rel="noopener">love4026@gmail.com</a></p><p>Website: <a href="https://sbmzhcn.github.io" target="_blank" rel="noopener">https://sbmzhcn.github.io</a></p><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><h3 id="2018-4-19"><a href="#2018-4-19" class="headerlink" title="2018-4-19"></a>2018-4-19</h3><ul><li>bing翻译使用最新版本，去除之前的翻译</li><li>复制按钮使用原生的js即可，不用再使用flash技术了</li></ul><h2 id="关键词"><a href="#关键词" class="headerlink" title="关键词"></a>关键词</h2><p>留言板程序 简单留言板 外贸留言板 外贸营销 跨境电商留言板</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/20180524/do-you-have-technical-anxiety/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/20180524/do-you-have-technical-anxiety/" itemprop="url">你有技术焦虑吗？</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-24T14:55:01+08:00">2018-05-24</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/个人日志/" itemprop="url" rel="index"><span itemprop="name">个人日志</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/20180524/do-you-have-technical-anxiety/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/20180524/do-you-have-technical-anxiety/" itemprop="commentCount"></span></a></span> <span id="/20180524/do-you-have-technical-anxiety/" class="leancloud_visitors" data-flag-title="你有技术焦虑吗？"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">476</span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p><a href="https://www.v2ex.com/t/456479" target="_blank" rel="noopener">https://www.v2ex.com/t/456479</a><br>最近在V2EX上看到有人问，你有技术焦虑吗，提到现在各种技术迭代非常快，很多新兴的技术没有时间去了解。</p></blockquote><p>下面有一个的回复可以代表技术的更新速度之快</p><blockquote><p>相比前端，这些都是事？？？？<br>reacr, preact, omi, nest,<br>vue, nuxt,<br>webpack3, webpack4, parcel,<br>ng 全家桶,<br>ts, es678, 各种 polyfill,<br>scss/less/sass, cssnext, postcss, stylus.</p></blockquote><p>看到这些深有感触，我刚进入工作的时候那时候最多有个jQuery，现在前端和后端几乎没区别了。前端最开始只是html+css编写，现在是各种构建工具，而且一代比一代强，刚学会一个下一个新的工具又出来了。</p><p>到了我这个年纪，不光有技术、学习上的焦虑，应该还有中年焦虑，这应该是很多人都曾有的，工作8年，看到很多人离开，我还在原地，很多事情让我觉得有时能力是一方面，但选择往往很重要，很多时候选择决定了你的位置。</p><p>对于技术，有些是可以沉淀的，像技术原理、算法、数据结构这些，有些是更新变化很快，像前端的构建工具、CSS框架、JS框架。</p><p>我们常去做那些可以沉淀的事情，焦虑可以避免很多。</p><p>每个人到了一定年纪都会遇到那个年纪应该会出现的事情，比如离职、结婚、生育，不到那个阶段你根本体会不了什么感觉，生命是一步一步去体验经历的，焦虑也没有用，路总还是要跟着别人走一遍。</p><p>只要你有前进的动力，就会有”焦虑“，只要不影响到自己的生活，焦虑还是有一定好处的。无论何时，不放弃学习，就不用害怕。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/20180419/search-engine-elasticsearch-vs-solr/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/20180419/search-engine-elasticsearch-vs-solr/" itemprop="url">搜索引擎介绍Elasticsearch和Solr</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-19T13:13:15+08:00">2018-04-19</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/转载/" itemprop="url" rel="index"><span itemprop="name">转载</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/20180419/search-engine-elasticsearch-vs-solr/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/20180419/search-engine-elasticsearch-vs-solr/" itemprop="commentCount"></span></a></span> <span id="/20180419/search-engine-elasticsearch-vs-solr/" class="leancloud_visitors" data-flag-title="搜索引擎介绍Elasticsearch和Solr"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">2,254</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Elasticsearch简介"><a href="#Elasticsearch简介" class="headerlink" title="Elasticsearch简介"></a>Elasticsearch简介</h2><p>Elasticsearch是一个实时的分布式搜索和分析引擎。它可以帮助你用前所未有的速度去处理大规模数据。</p><p>它可以用于全文搜索，结构化搜索以及分析，当然你也可以将这三者进行组合。</p><p>Elasticsearch是一个建立在全文搜索引擎 Apache Lucene™ 基础上的搜索引擎，可以说Lucene是当今最先进，最高效的全功能开源搜索引擎框架。</p><p>但是Lucene只是一个框架，要充分利用它的功能，需要使用JAVA，并且在程序中集成Lucene。需要很多的学习了解，才能明白它是如何运行的，Lucene确实非常复杂。</p><p>Elasticsearch使用Lucene作为内部引擎，但是在使用它做全文搜索时，只需要使用统一开发好的API即可，而不需要了解其背后复杂的Lucene的运行原理。</p><p>当然Elasticsearch并不仅仅是Lucene这么简单，它不但包括了全文搜索功能，还可以进行以下工作:</p><ul><li>分布式实时文件存储，并将每一个字段都编入索引，使其可以被搜索。</li><li>实时分析的分布式搜索引擎。</li><li>可以扩展到上百台服务器，处理PB级别的结构化或非结构化数据。</li></ul><p>这么多的功能被集成到一台服务器上，你可以轻松地通过客户端或者任何你喜欢的程序语言与ES的RESTful API进行交流。</p><p>Elasticsearch的上手是非常简单的。它附带了很多非常合理的默认值，这让初学者很好地避免一上手就要面对复杂的理论，</p><p>它安装好了就可以使用了，用很小的学习成本就可以变得很有生产力。</p><p>随着越学越深入，还可以利用Elasticsearch更多高级的功能，整个引擎可以很灵活地进行配置。可以根据自身需求来定制属于自己的Elasticsearch。</p><p>使用案例：</p><ul><li>维基百科使用Elasticsearch来进行全文搜做并高亮显示关键词，以及提供search-as-you-type、did-you-mean等搜索建议功能。</li><li>英国卫报使用Elasticsearch来处理访客日志，以便能将公众对不同文章的反应实时地反馈给各位编辑。</li><li>StackOverflow将全文搜索与地理位置和相关信息进行结合，以提供more-like-this相关问题的展现。</li><li>GitHub使用Elasticsearch来检索超过1300亿行代码。</li><li>每天，Goldman Sachs使用它来处理5TB数据的索引，还有很多投行使用它来分析股票市场的变动。</li></ul><p>但是Elasticsearch并不只是面向大型企业的，它还帮助了很多类似DataDog以及Klout的创业公司进行了功能的扩展。</p><h3 id="Elasticsearch的优缺点"><a href="#Elasticsearch的优缺点" class="headerlink" title="Elasticsearch的优缺点"></a>Elasticsearch的优缺点</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ol><li>Elasticsearch是分布式的。不需要其他组件，分发是实时的，被叫做”Push replication”。</li><li>Elasticsearch 完全支持 Apache Lucene 的接近实时的搜索。</li><li>处理多租户（multitenancy）不需要特殊配置，而Solr则需要更多的高级设置。</li><li>Elasticsearch 采用 Gateway 的概念，使得完备份更加简单。</li><li>各节点组成对等的网络结构，某些节点出现故障时会自动分配其他节点代替其进行工作。</li></ol><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ol><li>只有一名开发者（当前Elasticsearch GitHub组织已经不只如此，已经有了相当活跃的维护者）</li><li>还不够自动（不适合当前新的Index Warmup API）</li></ol><h2 id="Solr简介"><a href="#Solr简介" class="headerlink" title="Solr简介"></a>Solr简介</h2><p>Solr（读作“solar”）是Apache Lucene项目的开源企业搜索平台。其主要功能包括全文检索、命中标示、分面搜索、动态聚类、数据库集成，以及富文本（如Word、PDF）的处理。Solr是高度可扩展的，并提供了分布式搜索和索引复制。Solr是最流行的企业级搜索引擎，Solr4 还增加了NoSQL支持。</p><p>Solr是用Java编写、运行在Servlet容器（如 Apache Tomcat 或Jetty）的一个独立的全文搜索服务器。 Solr采用了 Lucene Java 搜索库为核心的全文索引和搜索，并具有类似REST的HTTP/XML和JSON的API。Solr强大的外部配置功能使得无需进行Java编码，便可对其进行调整以适应多种类型的应用程序。Solr有一个插件架构，以支持更多的高级定制。</p><p>因为2010年 Apache Lucene 和 Apache Solr 项目合并，两个项目是由同一个Apache软件基金会开发团队制作实现的。提到技术或产品时，Lucene/Solr或Solr/Lucene是一样的。</p><h3 id="Solr的优缺点"><a href="#Solr的优缺点" class="headerlink" title="Solr的优缺点"></a>Solr的优缺点</h3><h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><ol><li>Solr有一个更大、更成熟的用户、开发和贡献者社区。</li><li>支持添加多种格式的索引，如：HTML、PDF、微软 Office 系列软件格式以及 JSON、XML、CSV 等纯文本格式。</li><li>Solr比较成熟、稳定。</li><li>不考虑建索引的同时进行搜索，速度更快。</li></ol><h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><ol><li>建立索引时，搜索效率下降，实时索引搜索效率不高。</li></ol><h2 id="Elasticsearch与Solr的比较"><a href="#Elasticsearch与Solr的比较" class="headerlink" title="Elasticsearch与Solr的比较"></a>Elasticsearch与Solr的比较</h2><p>当单纯的对已有数据进行搜索时，Solr更快。</p><p><img src="http://i.zhcy.tk/images/search_fresh_index_while_idle.png" alt=""></p><p>当实时建立索引时, Solr会产生io阻塞，查询性能较差, Elasticsearch具有明显的优势。</p><p><img src="http://i.zhcy.tk/images/search_fresh_index_while_indexing.png" alt=""></p><p>随着数据量的增加，Solr的搜索效率会变得更低，而Elasticsearch却没有明显的变化。</p><p><img src="http://i.zhcy.tk/images/search_fresh_index_while_indexing2.png" alt=""></p><p>综上所述，Solr的架构不适合实时搜索的应用。</p><h2 id="实际生产环境测试"><a href="#实际生产环境测试" class="headerlink" title="实际生产环境测试"></a>实际生产环境测试</h2><p>下图为将搜索引擎从Solr转到Elasticsearch以后的平均查询速度有了50倍的提升。</p><p><img src="http://i.zhcy.tk/images/average_execution_time.jpg" alt=""></p><h2 id="Elasticsearch-与-Solr-的比较总结"><a href="#Elasticsearch-与-Solr-的比较总结" class="headerlink" title="Elasticsearch 与 Solr 的比较总结"></a>Elasticsearch 与 Solr 的比较总结</h2><ul><li>二者安装都很简单；</li><li>Solr 利用 Zookeeper 进行分布式管理，而 Elasticsearch 自身带有分布式协调管理功能;</li><li>Solr 支持更多格式的数据，而 Elasticsearch 仅支持json文件格式；</li><li>Solr 官方提供的功能更多，而 Elasticsearch 本身更注重于核心功能，高级功能多有第三方插件提供；</li><li>Solr 在传统的搜索应用中表现好于 Elasticsearch，但在处理实时搜索应用时效率明显低于 Elasticsearch。</li></ul><p>Solr 是传统搜索应用的有力解决方案，但 Elasticsearch 更适用于新兴的实时搜索应用。</p><h2 id="其他基于Lucene的开源搜索引擎解决方案"><a href="#其他基于Lucene的开源搜索引擎解决方案" class="headerlink" title="其他基于Lucene的开源搜索引擎解决方案"></a>其他基于Lucene的开源搜索引擎解决方案</h2><ul><li><p>直接使用 <a href="http://lucene.apache.org/" target="_blank" rel="noopener">Lucene</a></p><p> 说明：Lucene 是一个 JAVA 搜索类库，它本身并不是一个完整的解决方案，需要额外的开发工作。</p><p> 优点：成熟的解决方案，有很多的成功案例。apache 顶级项目，正在持续快速的进步。庞大而活跃的开发社区，大量的开发人员。它只是一个类库，有足够的定制和优化空间：经过简单定制，就可以满足绝大部分常见的需求；经过优化，可以支持 10亿+ 量级的搜索。</p><p> 缺点：需要额外的开发工作。所有的扩展，分布式，可靠性等都需要自己实现；非实时，从建索引到可以搜索中间有一个时间延迟，而当前的“近实时”(Lucene Near Real Time search)搜索方案的可扩展性有待进一步完善</p></li><li><p><a href="http://katta.sourceforge.net/" target="_blank" rel="noopener">Katta</a></p><p> 说明：基于 Lucene 的，支持分布式，可扩展，具有容错功能，准实时的搜索方案。</p><p> 优点：开箱即用，可以与 Hadoop 配合实现分布式。具备扩展和容错机制。</p><p> 缺点：只是搜索方案，建索引部分还是需要自己实现。在搜索功能上，只实现了最基本的需求。成功案例较少，项目的成熟度稍微差一些。因为需要支持分布式，对于一些复杂的查询需求，定制的难度会比较大。</p></li><li><p><a href="http://svn.apache.org/repos/asf/hadoop/mapreduce/trunk/src/contrib/index/README" target="_blank" rel="noopener">Hadoop contrib/index</a></p><p> 说明：Map/Reduce 模式的，分布式建索引方案，可以跟 Katta 配合使用。</p><p> 优点：分布式建索引，具备可扩展性。</p><p> 缺点：只是建索引方案，不包括搜索实现。工作在批处理模式，对实时搜索的支持不佳。</p></li><li><p><a href="http://sna-projects.com/" target="_blank" rel="noopener">LinkedIn 的开源方案</a></p><p> 说明：基于 Lucene 的一系列解决方案，包括 准实时搜索 zoie ，facet 搜索实现 bobo ，机器学习算法 decomposer ，摘要存储库 krati ，数据库模式包装 sensei 等等</p><p> 优点：经过验证的解决方案，支持分布式，可扩展，丰富的功能实现</p><p> 缺点：与 linkedin 公司的联系太紧密，可定制性比较差</p></li><li><p><a href="https://github.com/tjake/Lucandra" target="_blank" rel="noopener">Lucandra</a></p><p> 说明：基于 Lucene，索引存在 cassandra 数据库中</p><p> 优点：参考 cassandra 的优点</p><p> 缺点：参考 cassandra 的缺点。另外，这只是一个 demo，没有经过大量验证</p></li><li><p><a href="https://github.com/akkumar/hbasene" target="_blank" rel="noopener">HBasene</a></p><p> 说明：基于 Lucene，索引存在 HBase 数据库中</p><p> 优点：参考 HBase 的优点</p><p> 缺点：参考 HBase 的缺点。另外，在实现中，lucene terms 是存成行，但每个 term 对应的 posting lists 是以列的方式存储的。随着单个 term 的 posting lists 的增大，查询时的速度受到的影响会非常大</p></li></ul><p>原文： <a href="http://i.zhcy.tk/blog/elasticsearchyu-solr/" target="_blank" rel="noopener">http://i.zhcy.tk/blog/elasticsearchyu-solr/</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/316026/ubuntu-create-self-server-ngrok/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/316026/ubuntu-create-self-server-ngrok/" itemprop="url">Ubuntu下搭建ngrok 服务实现内网穿透</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-15T21:05:55+08:00">2018-03-15</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/316026/ubuntu-create-self-server-ngrok/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/316026/ubuntu-create-self-server-ngrok/" itemprop="commentCount"></span></a></span> <span id="/316026/ubuntu-create-self-server-ngrok/" class="leancloud_visitors" data-flag-title="Ubuntu下搭建ngrok 服务实现内网穿透"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">990</span></span></div></header><div class="post-body" itemprop="articleBody"><p>今天来郑州公司迁移 Google AdWords API 系统，想在上海访问这边的内网，这边是没有固定 IP的，这边就用到了内网穿透利器ngrok 了，这个东西微信开发也会用到。</p><p>ngrok官网的服务因为服务器在国外，所以不是很稳定，我们可以通过开源的代码自己搭建一个ngrok服务器。 下面是主要的操作步骤：</p><h2 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a>准备环境</h2><p>安装golang及相关依赖</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">sudo</span> apt-<span class="meta">get</span> install <span class="keyword">build-essential </span>golang mercurial git</span><br></pre></td></tr></table></figure><p>先进入到自己想安装的目录，并从github clone ngrok的项目</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">https</span>://github.com/tutumcloud/ngrok.git ngrok</span><br><span class="line">cd ngrok/</span><br></pre></td></tr></table></figure><p>通过以下命令生成并替换源码里默认的证书，注意域名xxxx.com修改为你自己的。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NGROK_DOMAIN=<span class="string">"test.lanthy.com"</span></span><br><span class="line">openssl genrsa -out base<span class="selector-class">.key</span> <span class="number">2048</span></span><br><span class="line">openssl req -new -x509 -nodes -key base<span class="selector-class">.key</span> -days <span class="number">10000</span> -subj <span class="string">"/CN=$NGROK_DOMAIN"</span> -out base.pem</span><br><span class="line">openssl genrsa -out server<span class="selector-class">.key</span> <span class="number">2048</span></span><br><span class="line">openssl req -new -key server<span class="selector-class">.key</span> -subj <span class="string">"/CN=$NGROK_DOMAIN"</span> -out server.csr</span><br><span class="line">openssl x509 -req -<span class="keyword">in</span> server<span class="selector-class">.csr</span> -CA base<span class="selector-class">.pem</span> -CAkey base<span class="selector-class">.key</span> -CAcreateserial -days <span class="number">10000</span> -out server.crt</span><br><span class="line">cp base<span class="selector-class">.pem</span> assets/client/tls/ngrokroot.crt</span><br></pre></td></tr></table></figure><h2 id="编译服务端"><a href="#编译服务端" class="headerlink" title="编译服务端"></a>编译服务端</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make <span class="keyword">release</span>-<span class="keyword">server</span></span><br></pre></td></tr></table></figure><p>如果一切正常，<code>ngrok/bin</code> 目录下应该有 ngrokd 文件</p><p>通过以下命令启动服务：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ngrok/</span><br><span class="line">sudo ./bin/ngrokd <span class="attribute">-tlsKey</span>=server.key <span class="attribute">-tlsCrt</span>=server.crt <span class="attribute">-domain</span>=<span class="string">"sub.lanthy.com"</span> <span class="attribute">-httpAddr</span>=<span class="string">":8081"</span> <span class="attribute">-httpsAddr</span>=<span class="string">":8082"</span></span><br></pre></td></tr></table></figure><p>其中httpAddr、httpsAddr 分别是 ngrok 用来转发 http、https 服务的端口，可以随意指定。同时ngrokd 还会开一个 4443 端口用来跟客户端通讯（可通过 -tunnelAddr=”:xxx” 指定）。</p><p>这里如果你的服务器配置了iptables规则，需要对外开放使用到的端口，可以本地telnet相应的端口看是否可用，不可用可以通过以下的命令开启：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">/sbin/iptables</span> -I INPUT -p tcp <span class="params">--dport</span> 8081 -j ACCEPT</span><br><span class="line"><span class="string">/sbin/iptables</span> -I INPUT -p tcp <span class="params">--dport</span> 8082 -j ACCEPT</span><br><span class="line"><span class="string">/sbin/iptables</span> -I INPUT -p tcp <span class="params">--dport</span> 4443 -j ACCEPT</span><br><span class="line"><span class="string">/etc/rc.d/init.d/iptables</span> save</span><br><span class="line"><span class="string">/etc/rc.d/init.d/iptables</span> restart</span><br><span class="line"><span class="string">/etc/init.d/iptables</span> status</span><br></pre></td></tr></table></figure><p>接下来就是需要在自己的域名提供商那里做域名映射了，这里最好把域名泛解析到相应的服务器：</p><p>*.lanthy.com</p><p>然后启动后，通过浏览器访问 test.lanthy.com:8081 如果页面显示</p><pre><code>Tunnel test.lanthy.com:8081 not found
</code></pre><p>表示启动成功，可以用客户端连接了。</p><h2 id="编译客户端"><a href="#编译客户端" class="headerlink" title="编译客户端"></a>编译客户端</h2><h3 id="编译linux客户端"><a href="#编译linux客户端" class="headerlink" title="编译linux客户端"></a>编译linux客户端</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make <span class="keyword">release</span>-<span class="keyword">client</span></span><br></pre></td></tr></table></figure><p>编译后会在<code>ngrok/bin</code> 目录下有 ngrok 文件。</p><h3 id="编译Mac客户端"><a href="#编译Mac客户端" class="headerlink" title="编译Mac客户端"></a>编译Mac客户端</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="attribute">GOOS</span>=darwin <span class="attribute">GOARCH</span>=amd64 make release-client</span><br></pre></td></tr></table></figure><p>编译后会在<code>ngrok/bin/darwin_amd64</code> 目录下有 ngrok 文件。</p><h3 id="编译windows客户端"><a href="#编译windows客户端" class="headerlink" title="编译windows客户端"></a>编译windows客户端</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="attribute">GOOS</span>=windows <span class="attribute">GOARCH</span>=amd64 make release-client</span><br></pre></td></tr></table></figure><p>编译后会在<code>ngrok/bin/windows_amd64</code> 目录下有 ngrok.exe 文件。</p><h2 id="运行测试客户端"><a href="#运行测试客户端" class="headerlink" title="运行测试客户端"></a>运行测试客户端</h2><p>将以上的不同系统版本的客户端下载到相应系统后，同一目录新增配置文件ngrok.cfg：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">server_addr:</span> test.lanthy.<span class="string">com:</span><span class="number">4443</span></span><br><span class="line"><span class="string">trust_host_root_certs:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>Mac上执行客户端</p><p>映射本地8080端口，自定义子域名test，通过终端执行以下命令：</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./ngrok -<span class="keyword">subdomain </span><span class="keyword">sub </span>-config<span class="symbol">=ngrok</span>.cfg <span class="number">8080</span></span><br></pre></td></tr></table></figure><p>Windows上执行客户端：</p><p>映射本地8090端口，自定义子域名test，通过DOS界面进入grok客户端的相应目录:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ngrok <span class="attribute">-config</span>=ngrok.cfg <span class="attribute">-subdomain</span>=sub 8080</span><br></pre></td></tr></table></figure><p>如果连接成功，会出现大概以下内容：</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ngrok                                           (Ctrl+C to quit)</span><br><span class="line">                     </span><br><span class="line">Tunnel Status                 online                                            </span><br><span class="line">Version                       <span class="number">1.7</span>/<span class="number">1.7</span>                                           </span><br><span class="line">Forwarding                    http://<span class="keyword">sub</span>.test.lanthy.com:<span class="number">8081</span> -&gt; <span class="number">127.0</span><span class="meta">.0</span><span class="meta">.1</span>:<span class="number">8080</span>      </span><br><span class="line">Forwarding                    https://<span class="keyword">sub</span>.test.lanthy.com:<span class="number">8082</span> -&gt; <span class="number">127.0</span><span class="meta">.0</span><span class="meta">.1</span>:<span class="number">8080</span>     </span><br><span class="line">Web Interface                 <span class="number">127.0</span><span class="meta">.0</span><span class="meta">.1</span>:<span class="number">4040</span>              </span><br><span class="line">            </span><br><span class="line">  # Conn                        <span class="number">0</span>                                                 </span><br><span class="line">Avg Conn Time                 <span class="number">0.</span>00ms</span><br></pre></td></tr></table></figure><p>SSH 22端口映射</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/root/ngrok/bin/ngrok <span class="attribute">-config</span>=/root/ngrok/.ngrok <span class="attribute">-subdomain</span>=test <span class="attribute">--proto</span>=tcp 22</span><br></pre></td></tr></table></figure><pre><code>使用tcp协议穿透，就不会分配2级域名，改为监控一个随机端口,如 test.lanthy.com:12389
</code></pre><p>HTTP 80端口映射</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta-keyword">/root/</span>ngrok<span class="meta-keyword">/bin/</span>ngrok -config=<span class="meta-keyword">/root/</span>ngrok/.ngrok -subdomain=<span class="string">"sub"</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>后台运行</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/root/ngrok/bin/ngrok <span class="attribute">-config</span>=/root/ngrok/.ngrok <span class="attribute">-subdomain</span>=sub <span class="attribute">--proto</span>=tcp <span class="attribute">-log</span>=stdout 22 &gt; /dev/<span class="literal">null</span> &amp;</span><br></pre></td></tr></table></figure><h2 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h2><p><a href="https://juejin.im/entry/58adb743b123db006730e691" target="_blank" rel="noopener">https://juejin.im/entry/58adb743b123db006730e691</a><br><a href="https://yii.im/posts/pretty-self-hosted-ngrokd/" target="_blank" rel="noopener">https://yii.im/posts/pretty-self-hosted-ngrokd/</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/316022/what-is-bitcoin/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/316022/what-is-bitcoin/" itemprop="url">看完你就知道什么是比特币了</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T15:27:07+08:00">2018-03-07</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/转载/" itemprop="url" rel="index"><span itemprop="name">转载</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/316022/what-is-bitcoin/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/316022/what-is-bitcoin/" itemprop="commentCount"></span></a></span> <span id="/316022/what-is-bitcoin/" class="leancloud_visitors" data-flag-title="看完你就知道什么是比特币了"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">14,123</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="https://user-gold-cdn.xitu.io/2018/1/7/160d129fe08810ee" alt="什么是比特币？"></p><h2 id="什么是比特币？"><a href="#什么是比特币？" class="headerlink" title="什么是比特币？"></a>什么是比特币？</h2><p>比特币 (bitcoin) 是一种数字货币。</p><pre><code>小知识：什么是比特(bit) ?

bit 是计算机表示二进制的单位。
例如：
1bit 可以表示 0 或者 1 两种状态；
2bit 可以表示 00/01/10/11 四种状态。

所以，习惯上人们用比特来形容数字化相关的事物，例如：比特币
</code></pre><p>既然比特币是一种数字货币，那么理解比特币之前，先要了解：什么是<code>货币</code>？</p><p>经济学上认为，货币本质上是<code>一般等价物</code>。</p><p>什么是一般等价物？</p><p>考虑原始时代的经济：</p><p>A 圈养了一头牛，B 纺织了一块布，为了满足彼此的需求，他们可以约定：</p><pre><code>一头牛 换 一匹布
</code></pre><p>通过这种原始的<code>物物交换</code>实现了简单的<code>价值流动</code>。</p><p>但是，随着社会生产力的提高，这种模式已经不能适应经济发展的要求。</p><pre><code>小思考：为什么物物交换行不通？

1、A 在安阳，B 在梅州，空间上没法物物交换；
2、A 今天生产了商品甲，下个月才需要商品乙，时间上没法物物交换；
3、参与市场的各方提供了成千上万的商品，效率上不接受物物交换。
</code></pre><p>这个时候，需要一种各方都认可的<code>一般等价物</code>来衡量、转换和传递商品的价值，从而实现商品的高效自由流动。</p><pre><code>价值流动：商品 -&gt; 一般等价物 -&gt; 商品
</code></pre><p>早期，人们使用贝壳来充当<code>一般等价物</code>，后来又使用金、银等贵金属，再发展出纸币，甚至到现在的移动支付。</p><pre><code>小思考：

财、货、贵、贩、赚、账、赁，这些字有什么共同点？
</code></pre><p>以 ￥人民币 为例，它是以国家信用为背书，充当价值媒介的一般等价物。具有价值尺度、流通手段、贮藏手段、支付手段等职能。</p><p>所以，货币本质上是一般等价物。</p><p>只要你能创造出一种东西：它满足充当一般等价物的条件，那么你就是创造了一种货币！</p><pre><code>小思考：充当一般等价物需要哪些条件？

1、全体参与方认可；
2、不可伪造；
3、方便携带、分隔、可以长期保存；
4、数量可控；
......
</code></pre><p>比特币就是这样一种东西。</p><p><img src="https://user-gold-cdn.xitu.io/2018/1/8/160d5afb3792be0d" alt="比特币"></p><p>这是一个革命性的创举，它打破了古今中外的惯例：货币都由政府的中央银行负责发行，而且只能在特定国家或地区流通。</p><p>要知道，往往只有改朝换代的时候有机会发行全新的货币，可谓百年难遇。现在比特币做到了，而且是全球性地发行和流通，前无古人！</p><h2 id="当前的货币体系"><a href="#当前的货币体系" class="headerlink" title="当前的货币体系"></a>当前的货币体系</h2><p>政府通过国家信用和强制手段保证央行发行的货币被广泛认可和接受。</p><p>例如，通过颁布法律和规章制度：《中华人民共和国中国人民银行法》、《中华人民共和国人民币管理条例》等。</p><p><img src="https://user-gold-cdn.xitu.io/2018/1/8/160d5934991362e3" alt=""></p><p>对于防止伪造，一方面通过技术手段提高纸币的伪造难度；另一方面通过法律手段打击制造、流通假币。</p><p>截至目前，通过央行发行货币是全世界通用的做法，运行良好，但缺点明显。</p><p>显而易见的问题，包括但不限于：</p><ol><li><p>由于发行权掌握在中心化的央行手中，理论上存在货币超发的可能，从而导致通货膨胀，例如：委内瑞拉、津巴布韦等国家由于通货膨胀，货币体系近乎崩溃；</p></li><li><p>即使高压打击，依然无法避免假币出现，最薄弱的环节不在于印制技术，而在于流通中需要人去辨别，而人往往是不可靠的。</p></li></ol><p><img src="https://user-gold-cdn.xitu.io/2018/1/8/160d5b5aca4c1df7" alt=""></p><h2 id="比特币系统是如何运转的？"><a href="#比特币系统是如何运转的？" class="headerlink" title="比特币系统是如何运转的？"></a>比特币系统是如何运转的？</h2><p>2008 年，一个网名为中本聪 (Satoshi Nakamoto) 的人，发表了<a href="https://bitcoin.org/bitcoin.pdf" target="_blank" rel="noopener">《比特币：一种点对点式的电子现金系统》</a>的论文，由此掀开了比特币风靡全球的大幕。</p><pre><code>小链接：

论文 PDF 版原文：https://bitcoin.org/bitcoin.pdf

中文翻译： [比特币白皮书：一种点对点的电子现金系统](http://www.8btc.com/wiki/bitcoin-a-peer-to-peer-electronic-cash-system)
</code></pre><p>由于思维定势，刚接触比特币概念的人，往往有一些认知的误区或盲区：</p><p>1、比特币是不是和硬币或纸币一样有实体形式？<br>2、比特币是数字货币，是不是和银行账户一样，在某个服务器的数据库里记录着我的账户下有多少余额？<br>3、两个人之间怎么转账？是不是和传统的银行一样：A 的账户 -100，B 的账户 +100？<br>4、比特币的数量有多少？最小分割单位是多少？<br>5、没有中央银行，那么比特币是谁发行的？<br>6、软件、音乐、文档等数字资产可以随便复制，为什么比特币不能拷贝？</p><p>……</p><p>一大堆问题！是什么？！为什么？！</p><p>当你开始思考这些问题的时候，那么恭喜你，你已经在思考如何设计一种货币系统了。</p><p>真是激动人心，从来没有想过有一天自己也可以设计一套货币系统，而且可以在真实世界运行起来。</p><p>更令人兴奋的是，你有机会参与价值的重新分配，就像淘金。</p><p>接下来，开始揭秘比特币是如何运行的。</p><div class="post-button text-center"> <a class="btn" href="/316022/what-is-bitcoin/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/316020/2018-front-end-interview-questions/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/316020/2018-front-end-interview-questions/" itemprop="url">2018前端面试题收集</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-06T19:41:27+08:00">2018-03-06</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/316020/2018-front-end-interview-questions/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/316020/2018-front-end-interview-questions/" itemprop="commentCount"></span></a></span> <span id="/316020/2018-front-end-interview-questions/" class="leancloud_visitors" data-flag-title="2018前端面试题收集"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">5,899</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="CSS-有哪些样式可以给子元素继承"><a href="#CSS-有哪些样式可以给子元素继承" class="headerlink" title="CSS 有哪些样式可以给子元素继承!"></a>CSS 有哪些样式可以给子元素继承!</h2><p>可继承的:<code>font-size</code>,<code>font-weight</code>,<code>line-height</code>,<code>color</code>,<code>cursor</code>等<br>不可继承的一般是会改变盒子模型的:<code>display</code>,<code>margin</code>、<code>border</code>、<code>padding</code>、<code>height</code>等</p><h2 id="box-sizing常用的属性有哪些-分别有啥作用"><a href="#box-sizing常用的属性有哪些-分别有啥作用" class="headerlink" title="box-sizing常用的属性有哪些? 分别有啥作用?"></a>box-sizing常用的属性有哪些? 分别有啥作用?</h2><p>box-sizing有两个值:content-box(W3C标准盒模型),border-box(怪异模型),<br>这个css 主要是改变盒子模型大小的计算形式<br>可能有人会问padding-box,这个之前只有 Firefox 标准实现了,目前50+的版本已经废除;<br>用一个栗子来距离,一个div的宽高分别100px,border为5px,padding为5px</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.test</span> &#123;</span></span><br><span class="line"><span class="undefined">      box-sizing: content-box;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 5<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f00</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">padding</span><span class="selector-pseudo">:5px</span>;</span></span><br><span class="line"><span class="undefined">      width: 100px;</span></span><br><span class="line"><span class="undefined">      height: 100px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">content-box的计算公式会把宽高的定义指向 content,border和 padding 另外计算,</span></span><br><span class="line"><span class="comment">也就是说 content + padding + border = 120px(盒子实际大小)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">而border-box的计算公式是总的大小涵盖这三者, content 会缩小,来让给另外两者</span></span><br><span class="line"><span class="comment">content(80px) + padding(5*2px) + border(5*2px) = 100px</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="清除浮动的方式有哪些-比较好的是哪一种"><a href="#清除浮动的方式有哪些-比较好的是哪一种" class="headerlink" title="清除浮动的方式有哪些?比较好的是哪一种?"></a>清除浮动的方式有哪些?比较好的是哪一种?</h2><p>常用的一般为三种<code>.clearfix</code>, <code>clear:both</code>,<code>overflow:hidden</code>;</p><h2 id="CSS-中transition和animate有何区别-animate-如何停留在最后一帧"><a href="#CSS-中transition和animate有何区别-animate-如何停留在最后一帧" class="headerlink" title="CSS 中transition和animate有何区别? animate 如何停留在最后一帧!"></a>CSS 中transition和animate有何区别? animate 如何停留在最后一帧!</h2><p>这种问题见仁见智,我的回答大体是这样的..待我捋捋.<br>transition一般用来做过渡的,而animate则是做动效,算是前者的一个补充拓展;<br>过渡的开销比动效小,前者一般用于交互居多,后者用于活动页居多;<br>至于如何让animate停留在最后一帧也好办,就它自身参数的一个值就可以了</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">animation-fill-mode: forwards;  </span><br><span class="line"><span class="comment">&lt;!--backwards则停留在首帧,both是轮流--&gt;</span></span><br></pre></td></tr></table></figure><p>让我们来举个栗子….自己新建一个 html 跑一下….</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Box-sizing<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.test</span> &#123;</span></span><br><span class="line"><span class="undefined">      box-sizing: border-box;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 5<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f00</span>;</span></span><br><span class="line"><span class="undefined">      padding: 5px;</span></span><br><span class="line"><span class="undefined">      width: 100px;</span></span><br><span class="line"><span class="undefined">      height: 100px;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">position</span><span class="selector-pseudo">:absolute</span>;</span></span><br><span class="line"><span class="undefined">      /*</span></span><br><span class="line"><span class="undefined">      简写的姿势排序</span></span><br><span class="line"><span class="css">      @<span class="keyword">keyframes</span> name : 动画名</span></span><br><span class="line"><span class="undefined">      duration 持续时间</span></span><br><span class="line"><span class="undefined">      timing-function 动画频率</span></span><br><span class="line"><span class="undefined">      delay 延迟多久开始</span></span><br><span class="line"><span class="undefined">      iteration-count 循环次数</span></span><br><span class="line"><span class="undefined">      direction 动画方式,往返还是正向</span></span><br><span class="line"><span class="undefined">      fill-mode  一般用来处理停留在某一帧</span></span><br><span class="line"><span class="undefined">      play-state running 开始,paused 暂停 ....</span></span><br><span class="line"><span class="undefined">       更多的参数去查文档吧..我就不一一列举了</span></span><br><span class="line"><span class="undefined">      */</span></span><br><span class="line"><span class="css">      <span class="selector-tag">animation</span>: <span class="selector-tag">moveChangeColor</span>  <span class="selector-tag">ease-in</span> 2<span class="selector-class">.5s</span> 1  <span class="selector-tag">forwards</span> <span class="selector-tag">running</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    @<span class="keyword">keyframes</span> moveChangeColor &#123;</span></span><br><span class="line"><span class="undefined">       from &#123;</span></span><br><span class="line"><span class="css">         <span class="selector-tag">top</span><span class="selector-pseudo">:0</span>%;</span></span><br><span class="line"><span class="css">         <span class="selector-tag">left</span><span class="selector-pseudo">:5</span>%;</span></span><br><span class="line"><span class="css">         <span class="selector-tag">background-color</span>:<span class="selector-id">#f00</span></span></span><br><span class="line"><span class="undefined">       &#125;</span></span><br><span class="line"><span class="undefined">       to&#123;</span></span><br><span class="line"><span class="css">         <span class="selector-tag">top</span><span class="selector-pseudo">:0</span>%;</span></span><br><span class="line"><span class="css">         <span class="selector-tag">left</span><span class="selector-pseudo">:50</span>%;</span></span><br><span class="line"><span class="css">         <span class="selector-tag">background-color</span>:<span class="selector-id">#ced</span>;</span></span><br><span class="line"><span class="undefined">       &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="块级元素水平垂直居中的方法"><a href="#块级元素水平垂直居中的方法" class="headerlink" title="块级元素水平垂直居中的方法"></a>块级元素水平垂直居中的方法</h2><p>我们要考虑两种情况,定宽高和不定宽高的;</p><p>方案 N 多种,我记得我很早写过这类的笔记</p><p><a href="http://blog.csdn.net/column/details/center-layout.html" target="_blank" rel="noopener">网页元素居中攻略记</a></p><h2 id="CSS样式权重的优先级"><a href="#CSS样式权重的优先级" class="headerlink" title="CSS样式权重的优先级"></a>CSS样式权重的优先级</h2><pre><code>!important &gt; 行内样式 &gt; id &gt; class &gt; tag
</code></pre><p>CSS特异性</p><h2 id="JS有几种数据类型-其中哪些的基本数据类型有哪些"><a href="#JS有几种数据类型-其中哪些的基本数据类型有哪些" class="headerlink" title="JS有几种数据类型,其中哪些的基本数据类型有哪些!"></a>JS有几种数据类型,其中哪些的基本数据类型有哪些!</h2><p>七种数据类型</p><ul><li>Boolean</li><li>Null</li><li>Undefined</li><li>Number</li><li>String</li><li>Symbol (ECMAScript 6 新定义)</li><li>Object</li></ul><p>其中5种为基本类型: <code>string</code>,<code>number</code>,<code>boolean</code>,<code>null</code>,<code>undefined</code></p><p><code>Object</code> 为引用类型(范围挺大),也包括数组、函数,</p><p><code>Symbol</code>是原始数据类型 ，表示独一无二的值</p><h2 id="null和undefined的差异"><a href="#null和undefined的差异" class="headerlink" title="null和undefined的差异"></a><code>null</code>和<code>undefined</code>的差异</h2><p><strong>相同点</strong></p><p>在 if判断语句中,值都默认为 false<br>大体上两者都是代表无,具体看差异</p><p><strong>不同点</strong></p><ul><li>null转为数字类型值为0,而undefined转为数字类型为 NaN(Not a Number)</li><li>undefined是代表调用一个值而该值却没有赋值,这时候默认则为undefined</li><li>null是一个很特殊的对象,最为常见的一个用法就是作为参数传入(说明该参数不是对象)</li><li>设置为null的变量或者对象会被内存收集器回收</li></ul><h2 id="this对象的理解"><a href="#this对象的理解" class="headerlink" title="this对象的理解"></a>this对象的理解</h2><p>简言之: 谁调用指向谁, 运行时的上下文确定, 而非定义的时候就确定;</p><p>强行绑定 this的话,可以用 call,apply,bind,箭头函数….来修改this的指向</p><h2 id="bind的-js简单模拟"><a href="#bind的-js简单模拟" class="headerlink" title="bind的 js简单模拟"></a>bind的 js简单模拟</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.emulateBind =  <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> self.apply(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="post-button text-center"> <a class="btn" href="/316020/2018-front-end-interview-questions/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.love4026.org/316018/weixin-create-local-server-env/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray"><meta itemprop="description" content="Think Difficulty"><meta itemprop="image" content="/logo.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Ray's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/316018/weixin-create-local-server-env/" itemprop="url">使用ngrok搭建微信开发本地测试环境</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-06T19:14:30+08:00">2018-03-06</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/316018/weixin-create-local-server-env/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/316018/weixin-create-local-server-env/" itemprop="commentCount"></span></a></span> <span id="/316018/weixin-create-local-server-env/" class="leancloud_visitors" data-flag-title="使用ngrok搭建微信开发本地测试环境"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span> <span class="post-meta-divider">|</span><span class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">145</span></span></div></header><div class="post-body" itemprop="articleBody"><p>微信开发的时候，必须要输入URL而且必须是外网域名，导致本地没法调试，不过使用ngrok可以创建一个内网穿透的服务器，这样就可以使用本地的服务器调试了。</p><p><a href="https://ngrok.com/download" target="_blank" rel="noopener">ngrock下载地址</a></p><p>开启 ssh 端口</p><p><code>./ngrok tcp 22</code></p><p>这时在外网即可 ssh 访问本机：</p><p><code>ssh user@0.tcp.ngrok.io -p17840</code></p><p>开启 http(s) 服务：</p><p><code>./ngrok http 80</code></p><p>免费版并不能自定义域名，每次启动时的端口都会改变</p><p><a href="https://juejin.im/entry/58adb743b123db006730e691" target="_blank" rel="noopener">CentOS6 搭建自己的 ngrok 服务</a></p><p><a href="https://www.ngrok.cc/" target="_blank" rel="noopener">https://www.ngrok.cc/</a><br><a href="https://natapp.cn/" target="_blank" rel="noopener">https://natapp.cn/</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"> <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/logo.png" alt="Ray"><p class="site-author-name" itemprop="name">Ray</p><p class="site-description motion-element" itemprop="description">Think Difficulty</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">423</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">11</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">246</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="aplayer-wrap motion-element"><div id="aplayer" class="aplayer"></div></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/sbmzhcn" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://twitter.com/love4026/" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span><span class="links-of-author-item"><a href="https://plus.google.com/u/0/106618658391372851068" target="_blank" title="Google Plus"><i class="fa fa-fw fa-google"></i> Google Plus</a></span><span class="links-of-author-item"><a href="https://www.facebook.com/love4026" target="_blank" title="Facebook"><i class="fa fa-fw fa-facebook"></i> Facebook</a></span><span class="links-of-author-item"><a href="https://www.v2ex.com/member/sbmzhcn" target="_blank" title="V2EX"><i class="fa fa-fw fa-globe"></i> V2EX</a></span><span class="links-of-author-item"><a href="mailto:love4026@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" class="cc-opacity" target="_blank"><img src="/images/cc-by-nc-nd.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://www.promopro.co.uk" title="Discount Code" target="_blank">Discount Code</a></li><li class="links-of-blogroll-item"> <a href="http://www.kamychina.com/" title="科煤机电" target="_blank">科煤机电</a></li></ul></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">Copyright &copy; <span itemprop="copyrightYear">2018</span><span class="with-love" id="heart"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray. All rights reserved.</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4, modified by Ray.</div><div class="leancloud-count"><span id="/" class="leancloud_site_visitors" data-flag-title="Ray's Blog"><i class="fa fa-eye"></i> 本站总访问量<span class="leancloud-visitors-count"></span> 次</span></div><script>var _mtac={};!function(){var t=document.createElement("script");t.src="https://pingjs.qq.com/h5/stats.js?v2.0.4",t.setAttribute("name","MTAH5"),t.setAttribute("sid","500595572");var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script id="ribbon" type="text/javascript" size="200" alpha="0.6" zindex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'ePPAQV9hFzcbhOaQvvtyjTnw-gzGzoHsz',
        appKey: 'GLniGVXsSMGBjTmaiI4wleaF',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script><link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css"><script src="/lib/algolia-instant-search/instantsearch.min.js"></script><script src="/js/src/algolia-search.js?v=5.1.4"></script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("ePPAQV9hFzcbhOaQvvtyjTnw-gzGzoHsz","GLniGVXsSMGBjTmaiI4wleaF")</script><script>function showTime(e){var t=new AV.Query(e),c=[],u=$(".leancloud_visitors");u.each(function(){c.push($(this).attr("id").trim())}),t.containedIn("url",c),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var n=0;n<e.length;n++){var o=e[n],i=o.get("url"),s=o.get("time"),l=document.getElementById(i);$(l).find(t).text(s)}for(n=0;n<c.length;n++){i=c[n],l=document.getElementById(i);var r=$(l).find(t);""==r.text()&&r.text(0)}}else u.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(i,e){var t=$(e),s=t.attr("id").trim(),l=t.attr("data-flag-title").trim(),n=new AV.Query(i);n.equalTo("url",s),n.find({success:function(e){if(0<e.length){var t=e[0];t.fetchWhenSave(!0),t.increment("time"),t.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var n=new i,o=new AV.ACL;o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),n.setACL(o),n.set("title",l),n.set("url",s),n.set("time",1),n.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_site_visitors").length&&addCount(e,".leancloud_site_visitors"),1==$(".leancloud_visitors").length?addCount(e,".leancloud_visitors"):1<$(".post-title-link").length&&showTime(e)})</script><script src="/js/src/APlayer.min.js?v=5.1.4"></script><script type="text/javascript">var playlist=[];playlist.push({title:"小城故事",author:"纯音乐",url:"http://blog-music.test.upcdn.net/xiaochenggushi.mp3",pic:"",lrc:""}),playlist.push({title:"Should it matter",author:"Sissel Kyrkjeb",url:"http://blog-music.test.upcdn.net/should-it-matter.mp3",pic:"",lrc:""}),playlist.push({title:"爱在西元前",author:"周杰伦",url:"http://blog-music.test.upcdn.net/aizaixiyuanqian.mp3",pic:"",lrc:""});var ap=new APlayer({element:document.getElementById("aplayer"),autoplay:!1,mode:"random",preload:"none",music:playlist})</script></body></html>